<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>港口设备在线安全监测系统</title>
  <script type="text/javascript" src="./js/axios.js"></script>
  <script type="text/javascript" src="./js/jq.js"></script>
  <script type="text/javascript" src="./js/cook.js"></script>
  <!-- 引入Vue -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
  <script src="./lib/vue.js"></script>
  <!-- 引入样式 -->
   <!-- <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css" />  -->
     <link rel="stylesheet" href="lib/index.css" >
  <!-- 引入组件库 -->
  <!-- <script src="https://unpkg.com/element-ui/lib/index.js"></script> -->
  <script src="./lib/index.js"></script>
  <!-- 引入fontsize库 -->
  <link rel="stylesheet" type="text/css" href="./fontss/iconfont.css" />
  <link rel="stylesheet" type="text/css" href="./breaing-icon/iconfont.css" />
  <!-- 引入展开侧边栏图标 -->
  <!-- 引入报警图标 -->
  <script src="./fonthome/iconfont.js"></script>
  <script src="./fontss/font/iconfont.js"></script>
  <!-- 引入VUR-ROUTER -->
  <script src="./lib/vue-router-3.0.1.js"></script>
  <!-- echarts画图 -->
  <script type="text/javascript" src="js/echarts1.js"></script>
  <script type="text/javascript" src="js/echarts2.js"></script>
  <script type="text/javascript" src="js/echarts3.js"></script>
  <script type="text/javascript" src="js/echarts4.js"></script>
  <script type="text/javascript" src="js/echarts5.js"></script>
  <script type="text/javascript" src="js/echarts6.js"></script>
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=6zs2cXe4YNp93HcbHxk3y4zTZV7nrfTb&__ec_v__=20190126"></script>
  <script type="text/javascript" src="js/echarts7.js"></script>
  <script src="./breaing-icon/iconfont.js"></script>
  <script src="./icon/fonts/iconfont.js"></script>
  <script src="./icon/battery/iconfont.js"></script>

  <style>
    html,
    body,
    #app {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    .home-container {
      height: 100%;
    }

    .el-button {
      line-height: 0.5;
    }

    .el-header {
      background: linear-gradient(to left,
          rgba(1, 170, 237, 1),
          rgba(82, 183, 109, 1));
      display: flex;
      /* // 使子元素首尾分散，中间元素按比例分布 */
      justify-content: space-between;
      padding-left: 0;
      /* // 使按钮在父元素框内上下居中显示 */
      align-items: center;
      color: #fff;
      font-size: 20px;
    }

    .el-header div {
      display: flex;
      align-items: center;
    }

    .el-header img {
      margin-right: 10px;
      height: 50px;
      width: 110px;
      margin-left: 5px;
      /* margin-top: 10px; */
    }

    .el-aside {
      background: rgba(57, 61, 73, 1);
      padding-top: 25px;
      width: 200px;
    }

    .el-main {
      background: #efeef0;
    }

    .home-span {
      font-size: 15px;
    }

    .el-menu {
      border-right: none;
    }

    .icon {
      width: 1.5em;
      height: 2.2em;
      fill: currentColor;
      overflow: hidden;
    }

    .collapseBtn {
      opacity: 0.3;
      padding: 1px 5px;
      margin-left: 25px;
    }

    .layui-card-body {
      position: relative;
      /* padding: 10px 15px; */
      line-height: 24px;
    }

    .layui-elem-quote {
      margin-bottom: 10px;
      padding: 15px;
      line-height: 12px;
      border-left: 5px solid #009688;
      border-radius: 0 2px 2px 0;
      background-color: #f2f2f2;
    }

    .el-card__body {
      padding: 0;
    }

    .x-red {
      color: red;
    }

    .product-box {
      width: 80%;
      /* height: 95px; */
      background-color: #CFCFCF2E;
      margin: 12px;
    }

    .product-box h3 {
      color: #888;

      padding-left: 5px;

      margin-top: 10px;

      font-size: 15px;
    }

    .product-box p {
      font-size: 22px;
      color: #009688;
      padding-left: 18px;
      margin-top: 15px;
    }

    .el-card__header {
      padding: 5px 20px
    }

    .icon-chakanxq {
      width: 40px;
      height: 30px;
      color: gray
    }

    .icon-baojing {
      width: 50px;
      color: red;
    }

    .icon-chakanxq-btn {
      border: none;
      background: none;
      cursor: pointer;
    }

    .card-margin {
      margin-bottom: 20px
    }

    .visible-btn {
      width: 80px;
      font-size: 20px;
      height: 30px;
      margin-left: 5px;
      margin: 5px;
      color: #0c9203;
    }

    .item {
      margin-top: 8px;
      right: 25px;
      /* width: 10px; */
      /* padding-right: 8px; */
    }

    .el-badge__content.is-fixed {
      right: 32px !important;
      margin-top: 10px;
    }

    .alert-page {
      margin-top: 20px
    }

    .el-breadcrumb {
      margin-bottom: 20px;
    }

    .time-select {
      float: right;
      margin-top: 5px;
      margin-right: 10px;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
    }
  

    .tag-center {
      text-align: center;
    }
    .bd{
      border-bottom: 1px solid gainsboro;
      
    }
    /* .el-form-item__label{
       padding:0 !important 
    } */
    .margin{
      border-top: 1px solid gainsboro
      ;
      height: 300px;
    }
    #yali,#temp1,#freq,#temp2,#xhao,#dyali,#dtemp1,#dfreq,#ztemp2,#zxhao{
      width: 100% !important;
    }
    .badOpt{
      margin:20px
    }
    .el-input{
      font-size:18px !important
    }
    .el-dialog__body{
      padding: 0px 20px !important
    }
    .search{
      float: right;
    margin-top: 30px;
    margin-right: 5px;
    }
    input::-ms-input-placeholder{text-align: center;}
input::-webkit-input-placeholder{text-align: center;}

/* 使卡片缩小时，查看可以显示出来 */
.zero-margin{
  margin-bottom: 0px !important;
  margin-top: 0px !important
}
  </style>
  <script type="text/javascript">
    function Onstart() {
     // if (getCookie("token") == null) {
     if(sessionStorage.getItem("token")==null){
        alert("请重新登录！");
        window.location = "Login.html";

      }
    }
  </script>
</head>

<body onload="Onstart()">
  <div id="app">
    <el-container class="home-container">
      <!-- 页面头部区域 -->
      <el-header>
        <el-row style="width: 100%">
          <el-col :span="24">
            <img src="./images/honen.png" alt="logo" />
            <span>港口设备安全在线监测系统</span>
            <!-- <el-tooltip class="item" effect="light" content="展开左侧栏" placement="bottom-start">
              <el-button @click="collapse" class="collapseBtn"><svg class="icon" aria-hidden="true">
                  <use xlink:href="#icon-zhankaicebianlan"></use>
                </svg></el-button>
            </el-tooltip> -->
          </el-col>
          <el-col :span="1" style="
              width: 2%">
            <el-tooltip content="退出" placement="bottom" effect="light">
              <a data-toggle="tooltip" data-placement="top" href="Login.html" onclick="return confirm('确定要退出吗？')">
                <svg class="icon" aria-hidden="true" style="
                width: 1em;
            ">
                  <use xlink:href="#icon-084tuichu"></use>
                </svg>
              </a>
            </el-tooltip>
          </el-col>
        </el-row>
      </el-header>
      <el-container>
        <!-- 侧边栏区域 -->
        <!-- <el-aside :width=" isCollapse ? '64px' : ''"> -->
          <!-- 一级菜单 -->
          <!-- <el-menu router default-active="home" class="el-menu-vertical-demo" background-color="#545c64"
            text-color="#fff" active-text-color="#ffd04b" :collapse="isCollapse">
            <el-menu-item index="home">
              <i class="el-icon-menu"></i>
              <span slot="title">首页</span>
            </el-menu-item>
          </el-menu>
        </el-aside> -->
        <!-- 页面主体区域 -->
        <el-main>
          <!-- 路由占位符 -->
          <router-view></router-view>
        </el-main>
  </div>
  </el-container>
  </el-container>
  </div>
  <!-- home组件的html部分 -->
  <template id="tem1">
    <div>
      <!-- 显示用户信息与时间 -->
      <el-card class="box-card card-margin">
        <div class="layui-card-body">
          <blockquote class="layui-elem-quote">
            欢迎用户：
            <span class="x-red" v-bind="username">{{username.name}}</span>
            <span>当前时间：{{date|dateFormat}}</span>
          </blockquote>
        </div>
      </el-card>
      <!-- 显示产品信息 -->
      <!-- 放置报警与查看详情处 -->
      <el-card class="box-card card-margin" v-show="flag2">
        <div slot="header" class="clearfix">
          <el-row type="flex" justify="start">
            <el-col :span="23" style="margin-top: 10px;">
              <!-- <span v-bind="DustproductName">{{DustproductName.name}}</span> </el-col> -->
              <span >除尘器安全工作监测</span> </el-col>
            <el-col :span="1.5" style="
            float: right;">
              <el-tooltip class="item" effect="dark" content="查看报警信息" placement="top-start">
                <el-badge :value="dusttotal">
                  <button class="icon-chakanxq-btn" @click="dustAlertDialogVisible = true">
                    <svg class="icon icon-baojing" aria-hidden="true">
                      <use xlink:href="#icon-baojing"></use>
                    </svg>
                  </button>
              </el-tooltip>
              </el-badge>
            </el-col>
          </el-row>
        </div>
        <!-- 具体产品信息1处 -->
        <el-row type="flex" justify="center" v-show="flag2">
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="dustInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">产品类型</h3>
              <!-- <p :class="[smallcard ? 'zero-margin': '']">{{dustInfo.productType}}</p> -->
              <p :class="[smallcard ? 'zero-margin': '']" style="font-size: 15px;">除尘器工作安全监测设备</p>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="dustInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">故障设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;color:red">{{dustInfo.badNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " class="search" id="bad" @click="searchDustEquip">查看 </el-link> 
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="dustInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">离线设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;color:red">{{dustInfo.unNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " id="offline" class="search" @click="searchDustEquip">查看 </el-link>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="dustInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">正常设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;">{{dustInfo.goodNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " class="search" id="good" @click="searchDustEquip">查看 </el-link>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="dustInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">总设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;">{{dustInfo.allNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " id=all class="search" @click="searchDustEquip">查看 </el-link>
            </el-card>
          </el-col>
        </el-row>
      </el-card>

       <!-- 显示查看除尘设备数据对话框 -->
       <el-dialog
       title="除尘器安全工作设备表"
       :visible.sync="searchDustEquipDialogVisible"
       width="90%"
     >
     <!-- 单一除尘设备数据表格 -->
     <div>
     <el-table stripe border ref="filterTable"
                 :data="dustSingleTableData.slice((dustSingleList.currentPage-1)*dustSingleList.pagesize,dustSingleList.currentPage*dustSingleList.pagesize)"
                 style="width: 100%" :cell-style="cellCenter"
                 :header-cell-style="headCenter">
                 <el-table-column prop="date" label="时间">
                 </el-table-column>
                 <el-table-column prop="name" label="设备名">
                 </el-table-column>
                 <el-table-column prop="diffPre" label="进出口压差" :filters="[{ text: '故障', value: '故障' }]"
                   :filter-method="filterdiffPre">
                 </el-table-column>
                 <el-table-column prop="pre" label="气压" :filters="[{ text: '故障', value: '故障' }]" :filter-method="filterPre">
                 </el-table-column>
                 <el-table-column prop="inFreqency" label="输灰机频率" :filters="[{ text: '故障', value: '故障' }]"
                   :filter-method="filterinFreqency">
                 </el-table-column>
                 <el-table-column prop="outFreqency" label="卸灰机频率" :filters="[{ text: '故障', value: '故障' }]"
                   :filter-method="filterinoutFreqency">
                 </el-table-column>
                 <el-table-column prop="temp" label="除尘器箱温度" :filters="[{ text: '故障', value: '故障' }]"
                   :filter-method="filtertemp">
                 </el-table-column>
                 <el-table-column prop="state" label="状态"
                   :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' },{ text: '未知', value: '未知' },{ text: '无', value: '无' }]" :filter-method="filterstate">
                 </el-table-column>
                 <el-table-column label="操作" width="200">
                   <template slot-scope="scope">
                     <el-tooltip class="item" effect="dark" content="刷新" placement="top" :enterable="false">
                       <el-button type="success" icon="el-icon-refresh" size="small" @click="singleDustRefresh(scope.$index)" style="font-size: 15px;"></el-button>
                     </el-tooltip>
                     <el-tooltip class="item" effect="dark" content="历史记录" placement="top" :enterable="false">
                       <el-button type="warning" icon="el-icon-time" size="small" @click="showSingleDustHistory(scope.$index)" style="font-size: 15px;"></el-button>
                     </el-tooltip>
                     <el-tooltip class="item" effect="dark" content="参数配置" placement="top" :enterable="false">
                       <el-button type="info" icon="el-icon-setting" size="small" @click="setSingleDustCan(scope.$index)" style="font-size: 15px;">
                       </el-button>
                     </el-tooltip>
                   </template>
                 </el-table-column>
               </el-table>
               <!-- 分页部分 -->
               <el-row type="flex" justify="start" v-show="longPage">
                <el-col :span="24" class="center">
               <el-pagination @size-change="handleSingleSizeChange" @current-change="handleSingleCurrentChange"
                 :current-page="dustSingleList.currentPage" :page-sizes="[ 10, 20, 30]" :page-size="10"
                 layout="total, sizes, prev, pager, next, jumper" :total="dustSingleTableData.length">
               
               </el-pagination>
              </el-col>
              </el-row>
              <!-- 第二种简易分页 -->
              <el-row type="flex" justify="start" v-show="shortPage">
                <el-col :span="24" class="center">
               
               <el-pagination
  small
  :page-size="10"
@current-change="handleSingleCurrentChange"
                 :current-page="dustSingleList.currentPage"
  layout="prev, pager, next"
  :total="dustSingleTableData.length">
</el-pagination>
              </el-col>
              </el-row>
            </div>
     </el-dialog>
<!-- 单一除尘设备参数配置对话框 -->
<el-dialog :title="dusttitle" :visible.sync="singleDustDataDialogVisible" width="75%">
  <div>
    <!-- 定时上传时间卡片部分 -->
    <el-card class="box-card">
      <el-row class="center">
        <el-col :span='4' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">定时上传时间</el-tag>
        </el-col>
        <el-col :span='8'>
          <el-form ref="singleUploadTimeForm" :model="singleUploadTime" label-width="80px" style="padding-top: 20px;">
            <el-form-item label="天数：">
              <el-input v-model="singleUploadTime.day" :placeholder="singleUploadTime.day1"></el-input>
            </el-form-item>
            <el-form-item label="小时：">
              <el-input v-model="singleUploadTime.hour" :placeholder="singleUploadTime.hour1"></el-input>
            </el-form-item>
            <el-form-item label="分钟：">
              <el-input v-model="singleUploadTime.minutes" :placeholder="singleUploadTime.minutes1"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
        <el-col :span="8" class="center">
          <el-button type="success" icon="el-icon-edit" size="medium"  @click="setSingleDustTime">修改</el-button>
        </el-col>
      </el-row>
    </el-card>

    <!-- 其余部分 -->
    <el-card class="box-card" style="margin-top: 30px;padding-bottom: 20px;">
      <!-- 进出口压差 -->
      <el-row type="flex" justify="end"  >
        <el-col :span='5' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">进出口压差</el-tag>
        </el-col>
        <el-col :span='16'>
          <el-form ref="singleDustPressRef" :model="singleDustPress" label-width="auto" style="padding-top: 20px;" inline>
            <el-form-item label="上限：">
              <el-input v-model="singleDustPress.up" :placeholder="singleDustPress.up1" style="width: 200px;"></el-input>
            </el-form-item>
            <el-form-item label="下限：">
              <el-input v-model="singleDustPress.down"  :placeholder="singleDustPress.down1" style="width: 200px;"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
      </el-row>
      <!-- 气压 -->
      <el-row type="flex"
      justify="end">
        <el-col :span='5' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">气压</el-tag>
        </el-col>
        <el-col :span='16'>
          <el-form ref="singleairPressureForm" :model="singleAirPressure" label-width="auto" style="padding-top: 20px;" inline>
            <el-form-item label="上限：">
              <el-input v-model="singleAirPressure.up"  :placeholder="singleAirPressure.up1" style="width: 200px;"></el-input>
            </el-form-item>
            <el-form-item label="下限：">
              <el-input v-model="singleAirPressure.down"  :placeholder="singleAirPressure.down1" style="width: 200px;"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
      </el-row>
        <!-- 输灰机频率 -->
        <el-row type="flex"
        justify="end">
        <el-col :span='5' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">输灰机频率</el-tag>
        </el-col>
        <el-col :span='16'>
          <el-form ref="singleinFreqencyForm" :model="singleinFreqency" label-width="auto" style="padding-top: 20px;" inline>
            <el-form-item label="上限：">
              <el-input v-model="singleinFreqency.up" :placeholder="singleinFreqency.up1" style="width: 200px;"></el-input>
            </el-form-item>
            <el-form-item label="下限：">
              <el-input v-model="singleinFreqency.down" :placeholder="singleinFreqency.down1" style="width: 200px;"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
        </el-row>
        <!-- 卸灰机频率 -->
        <el-row type="flex"
        justify="end">
        <el-col :span='5' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">卸灰机频率</el-tag>
        </el-col>
        <el-col :span='16'>
          <el-form ref="singleoutFreqencyForm" :model="singleoutFreqency" label-width="auto" style="padding-top: 20px;" inline>
            
            <el-form-item label="上限：">
              <el-input v-model="singleoutFreqency.up" :placeholder="singleoutFreqency.up1" style="width: 200px;"></el-input>
            </el-form-item>
            <el-form-item label="下限：">
              <el-input v-model="singleoutFreqency.down" :placeholder="singleoutFreqency.down1" style="width: 200px;"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
        </el-row>
        <!-- 除尘器箱体温度 -->
        <el-row type="flex"
        justify="end">
        <el-col :span='5' class="center">
          <el-tag type="success" size="medium" style="font-size: 18px;">除尘器箱体温度</el-tag>
          </el-col>
          <el-col :span="16">
          <el-form ref="singletempForm" :model="singletemp" label-width="auto" style="padding-top: 20px;" inline>
            <el-form-item label="上限：">
              <el-input v-model="singletemp.up" :placeholder="singletemp.up1" style="width: 200px;"></el-input>
            </el-form-item>
            <el-form-item label="下限：">
              <el-input v-model="singletemp.down" :placeholder="singletemp.down1" style="width: 200px;"></el-input>
            </el-form-item>
          </el-form>
        </el-col>
      </el-row>
   
      <div class="center">
        <el-button type="success" icon="el-icon-edit" size="medium" @click="singlesetdustlimit">修改</el-button>
      </div>
    </el-card>
  </div>
</el-dialog>
<!-- 单一除尘设备历史记录对话框 --><el-dialog title="除尘设备历史数据":visible.sync="setSingleDustHistoryDataDialogVisible" width="70%">
    <el-card style="margin-bottom: 20px;">
      <el-row type="flex" justify="center">
        <el-col :span="24">
      <el-form 
      class="center"
      ref="singleHistoryTableTypeRef" :model="singleHistoryTableTypeRefForm" >
      <el-form-item >
        <el-select v-model="singleHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="singleSelectedHistoryTableType">
          <el-option label="历史数据趋势图" value="picture"></el-option>
          <el-option label="历史数据记录表" value="recordTable"></el-option>
           <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
        </el-select>
      </el-form-item>
    </el-col>
    </el-form>
  </el-row >
  <!-- 时间选择器 -->
  <el-row type="flex" justify="center">
  <el-col :span="24" class="center">
  <el-date-picker 
  v-model="singleTimeValue"
  type="daterange"
  start-placeholder="开始日期"
  end-placeholder="结束日期"
  value-format="yyyy-MM-dd"
   @change="singleSelectedTime">
  </el-date-picker>
  </el-col>
  </el-row>
  <el-button type="success" icon="el-icon-edit" size="medium" v-show="singleDustrecordTableVisible" @click="method51" >导出表格</el-button>
  
  <!-- 趋势图 -->
  <div v-show="singleDustPageVisible">
    <div style="height: 300px;" id="singyali"></div>
    <div class="margin" style="height: 300px;" id="singfreq1"></div>
    <div class="margin" style="height: 300px;" id="singtemp1"></div>
    
  </div>
  
  <!-- 记录表 -->
  <div v-show="singleDustrecordTableVisible">
  <el-table stripe border ref="filterTable"
  :data="trueDustTableData.slice((truedustSingleList.currentPage-1)*truedustSingleList.pagesize,truedustSingleList.currentPage*truedustSingleList.pagesize)"
  style="width: 100%" :cell-style="cellCenter"
  :header-cell-style="headCenter" id="singdusttable">
  <el-table-column prop="date" label="时间">
  </el-table-column>
  <el-table-column prop="name" label="设备名">
  </el-table-column>
  <el-table-column prop="diffPre" label="进出口压差" >
  </el-table-column>
  <el-table-column prop="pre" label="气压" >
  </el-table-column>
  <el-table-column prop="inFreqency" label="输灰机频率" >
  </el-table-column>
  <el-table-column prop="outFreqency" label="卸灰机频率" >
  </el-table-column>
  <el-table-column prop="temp" label="除尘器箱温度" >
  </el-table-column>
  <!-- <el-table-column prop="state" label="状态"
    :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]" :filter-method="filterstate">
  </el-table-column> -->
</el-table>
<!-- 分页部分 -->
<el-row type="flex" justify="start" v-show="longPage">
  <el-col :span="24" class="center">
<el-pagination  @size-change="truehandleSizeChange" @current-change="truehandleCurrentChange"
  :current-page="truedustSingleList.currentPage" :page-sizes="[ 10, 20, 30]" :page-size="10"
  layout="total, sizes, prev, pager, next, jumper" :total="trueDustTableData.length">
</el-pagination>></el-col></el-row>
<!-- 第二种简易分页 -->
<el-row type="flex" justify="start" v-show="shortPage">
  <el-col :span="24" class="center">
 
 <el-pagination
 :page-size="10"
 @current-change="truehandleCurrentChange"
  :current-page="truedustSingleList.currentPage" 
small
layout="prev, pager, next"
:total="trueDustTableData.length"></el-pagination></el-col></el-row>
</div>

  <!-- 某种设备报警信息表 -->
  <div v-show="singleAlertInfoTableVislble">
  <el-table ref="singleAlertNowInfoRef" :data="singleAlertNowInfoList.slice((singleBearingalertPage.currentPage-1)*singleBearingalertPage.pagesize,singleBearingalertPage.currentPage*singleBearingalertPage.pagesize)" tooltip-effect="dark" style="width: 100%"
  :cell-style="cellCenter"
  :header-cell-style="headCenter">
    <el-table-column prop="time" label="时间" min-width="30%">
    </el-table-column>
    <el-table-column prop="alertInfo" label="报警信息">
    </el-table-column>
    <el-table-column  prop="status" label="状态" min-width="30%">
  
    </el-table-column>
  </el-table>
  <el-row type="flex" justify="start" v-show="longPage">
    <el-col :span="24" class="center">
  <el-pagination v-show="longPage" class="alert-page" 
  @current-change="singleBearingHandleAlertCurrentChange" :current-page="singleBearingalertPage.currentPage"
  :page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
  :total="singleAlertNowInfoList.length">
  </el-pagination></el-col></el-row>
  <!-- 第二种简易分页 -->
  <el-row type="flex" justify="start" v-show="shortPage">
    <el-col :span="24" >
   
   <el-pagination
small
:page-size="10"
@current-change="singleBearingHandleAlertCurrentChange" :current-page="singleBearingalertPage.currentPage"
layout="prev, pager, next"
:total="singleAlertNowInfoList.length"></el-pagination></el-col></el-row>
  </div>
</el-card>
  </el-dialog>

     <!-- 显示查看轴承设备数据对话框 -->
     <el-dialog
       title="轴温检测设备表"
       :visible.sync="searchBearingEquipDialogVisible"
       width="89%"
     >
    
       <div >
        <div v-show="singshuang1">
        <el-table border stripe ref="secondTableRef"
         :data="secondTable.slice((secondPageInfo.currentPage-1)*secondPageInfo.pageSize,secondPageInfo.currentPage*secondPageInfo.pageSize)"
          style="width: 100%;margin-top: 20px;"
          :data="secondTable" :cell-style="cellCenter"
          :header-cell-style="headCenter"
         
          >
          <el-table-column prop="date" label="时间">
          </el-table-column>
          <el-table-column prop="proName" label="设备名">
            <template slot-scope="scope">
              <el-tooltip class="item" effect="dark" content="测试点" placement="top">
                <svg class="icon" aria-hidden="true">
                  <use xlink:href="#icon-ceshidianwei"></use>
                </svg>
            </el-tooltip>
            <div>{{scope.row.proName}}</div>
          </template>
          </el-table-column>
          <el-table-column prop="envirTemp" label="测点1">
            <template slot-scope="scope">
              <svg class="icon" aria-hidden="true" style="padding-top: 12px;
              height: 1.8em;">
                <use xlink:href="#icon-wendu"></use>
              </svg>
              <div slot="content">{{scope.row.devicename1}}</div>
            <div style="color: #009688;">{{scope.row.envirTemp}}</div>
          </template>
          </el-table-column>
          <el-table-column prop="bearingTemp" label="测点2">
            <template slot-scope="scope">
              <svg class="icon" aria-hidden="true" style="padding-top: 12px;
              height: 1.8em;">
                <use xlink:href="#icon-wendu"></use>
              </svg>
              <div slot="content">{{scope.row.devicename2}}</div>
            <div style="color: #009688;">{{scope.row.bearingTemp}}</div>
          </template>
          </el-table-column>
          <el-table-column prop="signal" label="信号强度"> <template slot-scope="scope">
            <el-tooltip class="item" effect="dark" :content="signalTooltip(scope.row.signal)" placement="top">
              <img 
              style="width: 2em;"
              :src="signalIcon(scope.row.signal)">
          </el-tooltip>
          <!-- <div>信号强度</div> -->
          <!-- <div style="color: #009688;">{{scope.row.signal}}</div> -->
        </template>
          </el-table-column>
          <el-table-column prop="battery" label="电池电量">
            <template slot-scope="scope">
              <el-tooltip class="item" effect="dark" :content="batteryTooltip(scope.row.battery)" placement="top">
                <img 
                style="width: 2.8em;"
                :src="batteryIcon(scope.row.battery)">
                <!-- <svg class="icon" aria-hidden="true" style="width: 4em;">
                  <use :xlink:href="batteryIcon(scope.row.battery)"></use>
                </svg> -->
            </el-tooltip>
            <!-- <div>电池电量</div>
            <div style="color: #009688;">{{scope.row.battery}}</div> -->
          </template>
          </el-table-column>
          <el-table-column prop="state" label="状态"
          :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' },{ text: '未知', value: '未知' },{ text: '无', value: '无' }]"
          :filter-method="filterstate1"
          >
            <template slot-scope="scope">
              <el-tooltip 
              v-show="scope.row.state == '在线'"
              class="item" effect="dark" content="状态" placement="top">
                <!-- 在线图标 -->
                <svg class="icon" aria-hidden="true" style="width: 2em;">
                  <use xlink:href="#icon-normal"></use>
                </svg>    
            </el-tooltip>
            <el-tooltip 
            v-show="scope.row.state == '离线'||scope.row.state == '未知'"
              class="item" effect="dark" content="状态" placement="top">
                <!-- 离线图标 -->
                <svg class="icon" aria-hidden="true" style="width: 2em;">
                  <use xlink:href="#icon-off"></use>
                </svg>              
            </el-tooltip>
            <!-- <div>设备状态</div> -->
            <div style="color: #009688;">{{scope.row.state}}</div>
          </template>
          </el-table-column>
          <el-table-column label="操作" width="200">
            <template slot-scope="scope"> <el-tooltip class="item" effect="dark" content="刷新" placement="top" :enterable="false">
              <el-button type="success" icon="el-icon-refresh" size="small" @click="secondBearingRefresh(scope.$index)" style="font-size: 15px;"></el-button>
            </el-tooltip>
              <el-tooltip class="item" effect="dark" content="历史记录" placement="top" :enterable="false">
                <el-button type="warning" icon="el-icon-time" size="small" @click="showSecondBearingHistory(scope.$index)" style="font-size: 15px;"></el-button>
              </el-tooltip>
              <el-tooltip class="item" effect="dark" content="参数配置" placement="top" :enterable="false" >
                <el-button type="info" icon="el-icon-setting" size="small"
                  @click="setSecondBearingcan(scope.$index)" style="font-size: 15px;"></el-button>
              </el-tooltip>
              
            </template>
          </el-table-column>
        </el-table>
        <el-row type="flex" justify="start" v-show="longPage">
          <el-col :span="24" class="center">
        <el-pagination @size-change="handleSecondSizeChange" @current-change="handleSecondCurrentChange"
          :current-page="secondPageInfo.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
          layout="total, sizes, prev, pager, next, jumper" :total="secondTable.length">
        </el-pagination></el-col></el-row>
        <!-- 第二种简易分页 -->
        <el-row type="flex" justify="start" v-show="shortPage">
          <el-col :span="24" class="center">
         
         <el-pagination
small
:page-size="10"
@current-change="handleSecondCurrentChange"
          :current-page="secondPageInfo.currentPage"
layout="prev, pager, next"
:total="secondTable.length"></el-pagination></el-col></el-row>
</div>
      </div>
     </el-dialog>

     <!-- 查看轴承各种设备数参数配置对话框 -->
 <!-- 第一个表格参数配置对话框 -->
 <el-dialog title="参数配置" :visible.sync="setFirstBearingDataDialogVisible" width="70%">
  <el-card class="box-card" style="padding-bottom: 20px;">
     <!-- 采集频率以及上报频率 -->
     <el-row  type="flex" justify="start">
      <el-col :span="20" class="center">
        <el-form ref="firstFreqencyForm" :model="firstFreqency" label-width="250px" style="padding-top: 20px;" >
          <el-form-item label="采集频率：">
            <el-input v-model="firstFreqency.colFreqency" :placeholder="firstFreqency.colFreqency1"></el-input>
          </el-form-item>
          <el-form-item label="上报频率：">
            <el-input v-model="firstFreqency.upFreqency" width="80px" :placeholder="firstFreqency.upFreqency1"></el-input>
          </el-form-item>
        </el-form>
      </el-col>
    </el-row>
    <el-row class="bd" type="flex" justify="start">
      <el-col :span="24">
        <div class="center" style="margin-bottom: 10px;">
          <el-button type="success" icon="el-icon-edit" size="medium" @click="setFirstBearingFreq">修改</el-button>
        </div>

      </el-col>
    </el-row>
  <!-- 动态参数1部分，通过循环创建 -->
  <el-scrollbar :native="false">
    <!-- <el-row :gutter="80" type="flex" justify="center">
      <el-col v-for="item in movePara1" :span="Math.ceil(24/movePara1.length)">
        <el-form ref="movePara1Form" style="padding-top: 20px;">
          <el-form-item :label="item.name">
            <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
          </el-form-item>
        </el-form>
      </el-col>
    </el-row> -->
    
  <el-row type="flex"
  justify="start" v-for="item in moveFirstPara" :key="item.name">
    <el-col :span="22" class="center">
      <el-form ref="moveFirstParaRef" style="padding-top: 10px;">
        <el-form-item :label="item.name" label-width="170px">
          <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
        </el-form-item>
      </el-form>
    </el-col>
  </el-row>
</el-scrollbar>
    <div class="center">
      <el-button type="success" icon="el-icon-edit" size="medium" @click="setFirstBearingLimit">修改</el-button>
    </div>
  </el-card>

</el-dialog>
  <!-- 第一个表格历史记录对话框 -->
  <el-dialog title="轴温检测设备历史数据" :visible.sync="setFirstBearingHistoryDataDialogVisible" width="70%">
    <el-card style="margin-bottom: 20px;">
    <el-row type="flex" justify="center">
      <el-col :span="24">
    <el-form 
    class="center"
    ref="firstHistoryTableTypeRef" :model="firstHistoryTableTypeRefForm" >
    <el-form-item >
      <el-select v-model="firstHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="firstSelectedHistoryTableType">
        <el-option label="历史数据趋势图" value="picture"></el-option>
        <el-option label="历史数据记录表" value="recordTable"></el-option>
        <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
      </el-select>
    </el-form-item>
  </el-col>
  </el-form>
</el-row >
<!-- 时间选择器 -->
<el-row type="flex" justify="center">
<el-col :span="24" class="center">
<el-date-picker 
v-model="firstTimeValue"
type="daterange"
start-placeholder="开始日期"
end-placeholder="结束日期"
value-format="yyyy-MM-dd"
 @change="firstSelectedTime">
</el-date-picker>
</el-col>
</el-row>
<!-- 趋势图 -->
<div v-show="firstBearingPageVisible">
  <div style="height: 300px;" id="firsttemp"></div>
  <div class="margin" style="height: 300px;" id="firstxhao"></div>
</div>


<!-- 记录表 -->
<el-button type="success" icon="el-icon-edit" size="medium" v-show="firstRecordTableVisible" @click="method52">导出表格</el-button>

<div v-show="firstRecordTableVisible">
<el-table border stripe ref="filterTable"
:data="firstNowbearingtableData.slice((firstNowPageInfo.currentPage-1)*firstNowPageInfo.pageSize,firstNowPageInfo.currentPage*firstNowPageInfo.pageSize)"
style="width: 100%" :cell-style="cellCenter"
:header-cell-style="headCenter">
<el-table-column prop="date" label="时间">
</el-table-column>
<el-table-column prop="name" label="设备名">
</el-table-column>
<el-table-column prop="envirTemp" label="环境温度">
</el-table-column>
<el-table-column prop="bearingTemp" label="轴承温度">
</el-table-column>
<el-table-column prop="signal" label="信号强度">
</el-table-column>
<el-table-column prop="battery" label="电池电量">
</el-table-column>
<!-- <el-table-column prop="state" label="状态" :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]"
  :filter-method="filterstate"> -->
</el-table-column>
<!-- 分页部分 -->
</el-table>
<el-row type="flex" justify="start" v-show="longPage">
  <el-col :span="24" class="center">
<el-pagination  @size-change="handleFirstNowSizeChange" @current-change="handleFirstNowCurrentChange"
:current-page="firstNowPageInfo.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
layout="total, sizes, prev, pager, next, jumper" :total="firstNowbearingtableData.length">
</el-pagination></el-col></el-row>
<!-- 第二种简易分页 -->

<el-row type="flex" justify="start" v-show="shortPage">
  <el-col :span="24" class="center">
 <el-pagination
small
:page-size="10"
@current-change="handleFirstNowCurrentChange"
:current-page="firstNowPageInfo.currentPage"
layout="prev, pager, next"
:total="firstNowbearingtableData.length"></el-pagination></el-col></el-row>

</div>

<!-- 轴承报警信息表 -->
<div v-show="firstAlertInfoTableVislble">
<el-table ref="firstAlertNowInfoRef" :data="firstAlertNowInfoList.slice((firstBearingalertPage.currentPage-1)*firstBearingalertPage.pageSize,firstBearingalertPage.currentPage*firstBearingalertPage.pageSize)" tooltip-effect="dark" style="width: 100%"
:cell-style="cellCenter"
:header-cell-style="headCenter">
  <el-table-column prop="time" label="时间" min-width="30%">
  </el-table-column>
  <el-table-column prop="alertInfo" label="报警信息">
  </el-table-column>
  <el-table-column  prop="status" label="状态" min-width="30%">

  </el-table-column>
</el-table>
<el-row type="flex" justify="start" v-show="longPage">
  <el-col :span="24" class="center">
<el-pagination  class="alert-page" 
@current-change="firstBearingHandleAlertCurrentChange" :current-page="firstBearingalertPage.currentPage"
:page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
:total="firstAlertNowInfoList.length">
</el-pagination></el-col></el-row>
<!-- 第二种简易分页 -->
<el-row type="flex" justify="start" v-show="shortPage">
  <el-col :span="24" >
 <el-pagination
small
:page-size="10"
@current-change="firstBearingHandleAlertCurrentChange" :current-page="firstBearingalertPage.currentPage"
layout="prev, pager, next"
:total="firstAlertNowInfoList.length"></el-pagination></el-col></el-row>
</div>
</el-card>
</el-dialog>

<!-- 第二个表格历史记录对话框 -->
<el-dialog title="轴温检测设备历史数据" :visible.sync="setSecondBearingHistoryDataDialogVisible" width="70%">
  <el-card style="margin-bottom: 20px;">
  <el-row type="flex" justify="center">
    <el-col :span="24">
  <el-form 
  class="center"
  ref="secondHistoryTableTypeRef" :model="secondHistoryTableTypeRefForm" >
  <el-form-item >
    <el-select v-model="secondHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="secondSelectedHistoryTableType">
      <el-option label="历史数据趋势图" value="picture"></el-option>
      <el-option label="历史数据记录表" value="recordTable"></el-option>
      <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
    </el-select>
  </el-form-item>
</el-col>
</el-form>
</el-row >
<!-- 时间选择器 -->
<el-row type="flex" justify="center">
<el-col :span="24" class="center">
<el-date-picker 
v-model="secondTimeValue"
type="daterange"
start-placeholder="开始日期"
end-placeholder="结束日期"
value-format="yyyy-MM-dd"
 @change="secondSelectedTime">
</el-date-picker>
</el-col>
</el-row>
<!-- 趋势图 -->
<div v-show="secondBearingPageVisible">
<div style="height: 300px;" id="secondtemp"></div>
<div class="margin" style="height: 300px;" id="secondxhao"></div>
</div>

<!-- 记录表 -->
<el-button type="success" icon="el-icon-edit" size="medium" v-show="secondRecordTableVisible" @click="method53" >导出表格</el-button>
<div v-show="secondRecordTableVisible">
<el-table border stripe ref="filterTable"
:data="secondNowbearingtableData.slice((secondNowPageInfo.currentPage-1)*secondNowPageInfo.pageSize,secondNowPageInfo.currentPage*secondNowPageInfo.pageSize)"
style="width: 100%" :cell-style="cellCenter"
:header-cell-style="headCenter">
<el-table-column prop="date" label="时间">
</el-table-column>
<el-table-column prop="name" label="设备名">
</el-table-column>
<el-table-column prop="envirTemp" label="温度1">
</el-table-column>
<el-table-column prop="bearingTemp" label="温度2">
</el-table-column>
<el-table-column prop="signal" label="信号强度">
</el-table-column>
<el-table-column prop="battery" label="电池电量">
</el-table-column>
<!-- <el-table-column prop="state" label="状态" :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]"
:filter-method="filterstate"> -->
</el-table-column>
<!-- 分页部分 -->
</el-table>
<el-row type="flex" justify="start" v-show="longPage">
  <el-col :span="24" class="center">
<el-pagination 
@size-change="handleSecondNowSizeChange" @current-change="handleSecondNowCurrentChange"
:current-page="secondNowPageInfo.currentPage" :page-sizes="[ 10, 20, 30]" :page-size="10"
layout="total, sizes, prev, pager, next, jumper" :total="secondNowbearingtableData.length">
</el-pagination></el-col></el-row>
<!-- 第二种简易分页 -->
<el-row type="flex" justify="start" v-show="shortPage" >
  <el-col :span="24" class="center">
 
 <el-pagination
small
:page-size="10"
@current-change="handleSecondNowCurrentChange"
:current-page="secondNowPageInfo.currentPage" 
layout="prev, pager, next"
:total="secondNowbearingtableData.length"></el-pagination></el-col></el-row>

</div>

<!-- 轴承报警信息表 -->
<div v-show="secondAlertInfoTableVislble">
<el-table ref="secondAlertNowInfoRef" :data="secondAlertNowInfoList.slice((secondBearingalertPage.currentPage-1)*secondBearingalertPage.pageSize,secondBearingalertPage.currentPage*secondBearingalertPage.pageSize)" tooltip-effect="dark" style="width: 100%"
:cell-style="cellCenter"
:header-cell-style="headCenter">
<el-table-column prop="time" label="时间" min-width="30%">
</el-table-column>
<el-table-column prop="alertInfo" label="报警信息">
</el-table-column>
<el-table-column  prop="status" label="状态" min-width="30%">

</el-table-column>
</el-table>
<el-row type="flex" justify="start" v-show="longPage">
  <el-col :span="24" class="center">
<el-pagination v-show="longPage" class="alert-page" 
@current-change="handlesecondBearingalertPage" :current-page="secondBearingalertPage.currentPage"
:page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
:total="secondAlertNowInfoList.length">
</el-pagination></el-col></el-row>
<!-- 第二种简易分页 -->
<el-row type="flex" justify="start" v-show="shortPage">
  <el-col :span="24" >
 
 <el-pagination
small
:page-size="10"
@current-change="handlesecondBearingalertPage" :current-page="secondBearingalertPage.currentPage"
layout="prev, pager, next"
:total="secondAlertNowInfoList.length"></el-pagination></el-col></el-row>
</div>
</el-card>
</el-dialog>
 <!-- 第二个表格参数配置对话框 -->
 <el-dialog title="参数配置" :visible.sync="setSecondBearingDataDialogVisible" width="70%">
  <el-card class="box-card" style="padding-bottom: 20px;">
     <!-- 采集频率以及上报频率 -->
     <el-row  type="flex" justify="start">
      <el-col :span="20" class="center">
        <el-form ref="secondFreqencysecondFreqencyForm" :model="secondFreqency" label-width="250px" style="padding-top: 20px;" >
          <el-form-item label="采集频率：">
            <el-input v-model="firstFreqency.colFreqency" :placeholder="firstFreqency.colFreqency1"></el-input>
          </el-form-item>
          <el-form-item label="上报频率：">
            <el-input v-model="firstFreqency.upFreqency" width="80px" :placeholder="firstFreqency.upFreqency1"></el-input>
          </el-form-item>
        </el-form>
      </el-col>
    </el-row>
    <el-row class="bd" type="flex" justify="start">
      <el-col :span="24">
        <div class="center" style="margin-bottom: 10px;">
          <el-button type="success" icon="el-icon-edit" size="medium" @click="setFirstBearingFreq">修改</el-button>
        </div>

      </el-col>
    </el-row>
  <!-- 动态参数1部分，通过循环创建 -->
  <el-scrollbar :native="false">
    <!-- <el-row :gutter="80" type="flex" justify="center">
      <el-col v-for="item in movePara1" :span="Math.ceil(24/movePara1.length)">
        <el-form ref="movePara1Form" style="padding-top: 20px;">
          <el-form-item :label="item.name">
            <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
          </el-form-item>
        </el-form>
      </el-col>
    </el-row> -->
    
  <el-row type="flex"
  justify="start" v-for="item in moveFirstPara" :key="item.name">
    <el-col :span="22" class="center">
      <el-form ref="moveFirstParaRef" style="padding-top: 10px;">
        <el-form-item :label="item.name" label-width="170px">
          <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
        </el-form-item>
      </el-form>
    </el-col>
  </el-row>
</el-scrollbar>
    <div class="center">
      <el-button type="success" icon="el-icon-edit" size="medium" @click="setFirstBearingLimit">修改</el-button>
    </div>
  </el-card>

</el-dialog>


      <!-- 轴承产品具体设备数量放置处 -->
      <el-card class="box-card card-margin" v-show="flag3">
        <div slot="header" class="clearfix">
          <el-row type="flex" justify="start">
            <el-col :span="23" style="margin-top: 10px;float: right;">
              <!-- <span v-bind="BearingproductName">{{BearingproductName.name}}</span>  -->
              <span> 轴承温度监测 </span>
            </el-col>
            <el-col :span="1.5" >
              <el-tooltip class="item" effect="dark" content="查看报警信息" placement="top-start">
                <el-badge :value="bearingtotal">
                  <button class="icon-chakanxq-btn" @click="bearingAlertDialogVisible = true">
                    <svg class="icon icon-baojing" aria-hidden="true">
                      <use xlink:href="#icon-baojing"></use>
                    </svg>
                  </button>
                </el-badge>
              </el-tooltip>
            </el-col>
          

          </el-row>
        </div>
        <!-- 具体产品信息2处 -->
        <el-row type="flex" justify="center" >
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="bearingInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">产品类型</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="font-size: 15px;">轴承温度监测设备</p>
              <!-- <p :class="[smallcard ? 'zero-margin': '']">{{bearingInfo.productType}}</p> -->
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="bearingInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">故障设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;color:red">{{bearingInfo.badNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']"  type="success" icon="el-icon-view " class="search" @click="searchBearingEquip" id="bearingbad">查看 </el-link>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="bearingInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">离线设备数</h3>
              <p  :class="[smallcard ? 'zero-margin': '']" style="display: inline;color:red">{{bearingInfo.unNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " class="search" @click="searchBearingEquip" id="bearingun">查看 </el-link>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="bearingInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">正常设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;">{{bearingInfo.goodNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " class="search" @click="searchBearingEquip" id="bearinggood">查看 </el-link>
            </el-card>
          </el-col>
          <el-col :span="5">
            <el-card class="product-box" shadow="hover" v-model="bearingInfo">
              <h3 :class="[smallcard ? 'zero-margin': '']">总设备数</h3>
              <p :class="[smallcard ? 'zero-margin': '']" style="display: inline;">{{bearingInfo.allNum}}</p>
              <el-link :class="[smallcard ? 'zero-margin': '']" type="success" icon="el-icon-view " class="search" @click="searchBearingEquip" id="bearingall">查看 </el-link>
            </el-card>
          </el-col>
        </el-row>
      </el-card>

      <!-- 放置故障设备表格 -->
      <el-card class="card-margin">
        <!-- <el-button @click="dustVisible" type="success" plain size="medium" class="visible-btn" :autofocus="true" v-show="gdflag">除尘
        </el-button>
        <el-button @click="bearingVisible" type="success" plain size="medium" class="visible-btn" v-show="gzflag">轴承</el-button> -->
        <el-select v-model="badTablevalue" placeholder="请选择" @change="selectBadTable"
        class="badOpt" style="
        border-radius: 10px;">
          <el-option
            v-for="item in badOptions"
            :key="item.value"
            :label="item.label"
            :value="item.value"
            >
          </el-option>
        </el-select>
        <el-row
        v-show="roleBtn"
        style="margin-left: 20px;
      margin-bottom: 10px;" >
      <el-col :span="1.5">
        <el-button type="success" plain  v-show="dan">单路</el-button>
      </el-col>
      <el-col :span="1.5">
        <el-button type="success" plain  v-show="shuang">双路</el-button>
      </el-col>
      </el-row>
        <!-- <el-tag type="success" style="float: right;    margin-top: 5px;
        margin-right: 5px;cursor: pointer;" @click="reset">重置</el-tag> -->
        <!-- 除尘故障表格 -->
        <div v-show="flag" v-show="gdflag">
          <!-- data表示前端分页 -->
          <el-table stripe border ref="filterTable"
            :data="tableData.slice((dustList.currentPage-1)*dustList.pagesize,dustList.currentPage*dustList.pagesize)"
            style="width: 100%" :cell-style="cellCenter"
            :header-cell-style="headCenter">
            <el-table-column prop="date" label="时间">
            </el-table-column>
            <el-table-column prop="name" label="设备名">
            </el-table-column>
            <el-table-column prop="diffPre" label="进出口压差" :filters="[{ text: '故障', value: '故障' }]"
              :filter-method="filterdiffPre">
            </el-table-column>
            <el-table-column prop="pre" label="气压" :filters="[{ text: '故障', value: '故障' }]" :filter-method="filterPre">
            </el-table-column>
            <el-table-column prop="inFreqency" label="输灰机频率" :filters="[{ text: '故障', value: '故障' }]"
              :filter-method="filterinFreqency">
            </el-table-column>
            <el-table-column prop="outFreqency" label="卸灰机频率" :filters="[{ text: '故障', value: '故障' }]"
              :filter-method="filterinoutFreqency">
            </el-table-column>
            <el-table-column prop="temp" label="除尘器箱温度" :filters="[{ text: '故障', value: '故障' }]"
              :filter-method="filtertemp">
            </el-table-column>
            <el-table-column prop="state" label="状态"
              :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' },{ text: '未知', value: '未知' },{ text: '无', value: '无' }]" :filter-method="filterstate">
            </el-table-column>
            <el-table-column label="操作" width="200">
              <template slot-scope="scope">
                <el-tooltip class="item" effect="dark" content="刷新" placement="top" :enterable="false">
                  <el-button type="success" icon="el-icon-refresh" size="small" @click="Dustrefresh(scope.$index)" style="font-size: 15px;"></el-button>
                </el-tooltip>
                
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="历史记录" placement="top" :enterable="false">
                  <el-button type="warning" icon="el-icon-time" size="small" @click="showDustHistory(scope.$index)" style="font-size: 15px;"></el-button>
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="参数配置" placement="top" :enterable="false">
                  <el-button type="info" icon="el-icon-setting" size="small" @click="setdustcan1(scope.$index)" style="font-size: 15px;">
                  </el-button>
              </template>
            </el-table-column>
          </el-table>
          <!-- 分页部分 -->
          <el-row type="flex" justify="start" v-show="longPage">
            <el-col :span="24" class="center">
          <el-pagination  @size-change="handleSizeChange" @current-change="handleCurrentChange"
            :current-page="dustList.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
            layout="total, sizes, prev, pager, next, jumper" :total="tableData.length">
          </el-pagination></el-col></el-row>
          <!-- 第二种简易分页 -->
          <el-row type="flex" justify="start" v-show="shortPage">
            <el-col :span="24" class="center">
           
           <el-pagination
small
:page-size="10"
@current-change="handleCurrentChange"
            :current-page="dustList.currentPage" 
layout="prev, pager, next"
:total="tableData.length"></el-pagination></el-col></el-row>
          <!-- 参数配置对话框 -->
          <el-dialog :title="dusttitle" :visible.sync="setDustDataDialogVisible" width="75%" >
     
              <!-- 定时上传时间卡片部分 -->
              <el-card class="box-card" >
                <el-row class="center">
                  <el-col :span='4' class="center">
                    <el-tag type="success" size="medium" style="font-size: 18px;">定时上传时间</el-tag>
                  </el-col>
                  <el-col :span='8'>
                    <el-form ref="uploadTimeForm" :model="uploadTime" label-width="80px" style="padding-top: 20px;">
                      <el-form-item label="天数：">
                        <el-input v-model="uploadTime.day" :placeholder="uploadTime.day1"></el-input>
                      </el-form-item>
                      <el-form-item label="小时：">
                        <el-input v-model="uploadTime.hour" :placeholder="uploadTime.hour1"></el-input>
                      </el-form-item>
                      <el-form-item label="分钟：">
                        <el-input v-model="uploadTime.minutes" :placeholder="uploadTime.minutes1"></el-input>
                      </el-form-item>
                    </el-form>
                  </el-col>
                  <el-col :span="8" class="center">
                    <el-button type="success" icon="el-icon-edit" size="medium" @click="setdusttime()">修改</el-button>
                  </el-col>
                </el-row>
              </el-card>

              <!-- 其余部分 -->
              <el-card class="box-card" style="margin-top: 30px;padding-bottom: 20px;">
                <!-- 进出口压差 -->
                
                <el-row 
                type="flex"
                
                justify="end">
                <el-col :span='5' class="center">
                  <el-tag type="success" size="medium" style="font-size: 18px;">进出口压差</el-tag>
                </el-col>
                <el-col :span='16' >
                  <el-form ref="dustpressForm" :model="dustpress" label-width="auto" style="padding-top: 20px;" :inline="true" class="demo-form-inline">

                      <el-form-item label="上限：">
                        <el-input v-model="dustpress.up" :placeholder="dustpress.up1" style="width: 200px;"></el-input>
                      </el-form-item>
                      <el-form-item label="下限：">
                        <el-input v-model="dustpress.down" :placeholder="dustpress.down1" style="width: 200px;"></el-input>
                      </el-form-item>
                    </el-form>
                    <!-- 气压 -->
                  </el-col>
                </el-row>
          <el-row type="flex"
          
          justify="end">
          <el-col :span='5' class="center">
            
            <el-tag type="success" style="font-size: 18px;">气压</el-tag>
          </el-col>
                  <el-col :span='16' >
                    <el-form ref="airPressureForm" :model="airPressure" label-width="auto" style="padding-top: 20px;" inline>
                  
                      <el-form-item label="上限：">
                        <el-input v-model="airPressure.up" :placeholder="airPressure.up1" style="width: 200px;"></el-input>
                      </el-form-item>
                      <el-form-item label="下限：">
                        <el-input v-model="airPressure.down" :placeholder="airPressure.down1" style="width: 200px;"></el-input>
                      </el-form-item>
                    </el-form>
                  </el-col>
                </el-row>
                <el-row type="flex"
                justify="end">
                  <!-- 输灰机频率 -->
                  <el-col :span='5' class="center">
                    <el-tag type="success"style="font-size: 18px;">输灰机频率</el-tag>
                  </el-col>
                  <el-col :span="16">
                    <el-form ref="inFreqencyForm" :model="inFreqency" label-width="auto" style="padding-top: 20px;" inline>
                      <el-form-item label="上限：">
                        <el-input v-model="inFreqency.up" :placeholder="inFreqency.up1" style="width:200px;"></el-input>
                      </el-form-item>
                      <el-form-item label="下限：">
                        <el-input v-model="inFreqency.down" :placeholder="inFreqency.down1" style="width:200px;"></el-input>
                      </el-form-item>
                    </el-form>
                  </el-col>
</el-row>
                  <!-- 卸灰机频率 -->
                  <el-row type="flex" justify="end">
                  <el-col :span='5' class="center">
                    <el-tag type="success" style="font-size: 18px;">卸灰机频率</el-tag>
                  </el-col>
                  <el-col :span='16'>
                    <el-form ref="outFreqencyForm" :model="outFreqency" label-width="auto" style="padding-top: 20px;" inline>

                      <el-form-item label="上限：">
                        <el-input v-model="outFreqency.up" :placeholder="outFreqency.up1" style="width:200px;"></el-input>
                      </el-form-item>
                      <el-form-item label="下限：">
                        <el-input v-model="outFreqency.down" :placeholder="outFreqency.down1" style="width:200px;"></el-input>
                      </el-form-item>
                    </el-form>
                  </el-col>
                </el-row>
                  <!-- 除尘器箱体温度 -->
                  <el-row type="flex" justify="end">
                  <el-col :span='5' class="center">
                    <el-tag type="success"  style="font-size: 18px;">除尘器箱体温度</el-tag>
                    </el-col>
                    <el-col :span='16'>
                    <el-form ref="tempForm" :model="temp" label-width="auto" style="padding-top: 20px;" inline>

                      <el-form-item label="上限：">
                        <el-input v-model="temp.up" :placeholder="temp.up1" style="width:200px;"></el-input>
                      </el-form-item>
                      <el-form-item label="下限：">
                        <el-input v-model="temp.down" :placeholder="temp.down1" style="width:200px;"></el-input>
                      </el-form-item>
                    </el-form>
                  </el-col>
                
                </el-row>
                <el-row>
               <el-col :span='24' class="center">
                  <el-button type="success" icon="el-icon-edit" size="medium" @click="setdustlimit()">修改</el-button>
                </el-col>
              </el-row>
              </el-card>

          </el-dialog>
          <!-- 历史记录对话框 -->
          <el-dialog title="除尘设备历史数据" :visible.sync="setDustHistoryDataDialogVisible1" width="70%">
            <div>
              <el-card style="margin-bottom: 20px;">
                <!-- 选择图表类型 -->
                <el-row type="flex" justify="center">
                  <el-col :span="24">
                <el-form 
                class="center"
                ref="alldustHistoryTableTypeRef" :model="alldustHistoryTableTypeRefForm" >
                <el-form-item >
                  <el-select v-model="alldustHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="alldustSelectedHistoryTableType">
                    <el-option label="历史数据趋势图" value="picture"></el-option>
                    <el-option label="历史数据记录表" value="recordTable"></el-option>
                     <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
                  </el-select>
                </el-form-item>
              </el-col>
              </el-form>
              </el-row>
              <!-- 时间选择器 -->
  <el-row type="flex" justify="center">
    <el-col :span="24" class="center">
    <el-date-picker 
    v-model="alldustTimeValue"
    type="daterange"
    start-placeholder="开始日期"
    end-placeholder="结束日期"
    value-format="yyyy-MM-dd"
    @change="alldustSelectedTime">
    </el-date-picker>
    </el-col>
    </el-row>
                <!-- 趋势图 -->
                <div v-show="allDustPageVisible">
                <el-row >
                <el-col style="height: 280px;" :span="24" id="yali">
              </el-col>
                
                </el-row>
                <el-row>
                  <el-col style="height: 280px;" :span="24" id="temp1"></el-col>
                </el-row>
                <el-row >
                  <el-col style="height: 280px;" :span="24"  id="freq"></el-col>
                </el-row>
             
              </div>
 
<!-- 记录表 -->


<el-button type="success" icon="el-icon-edit" size="medium" v-show="allDustrecordTableVisible" @click="method51" >导出表格</el-button>

<div v-show="allDustrecordTableVisible">
  <el-table stripe border ref="filterTable"
  :data="allDustTableData.slice((alldustSingleList.currentPage-1)*alldustSingleList.pagesize,alldustSingleList.currentPage*alldustSingleList.pagesize)"
  style="width: 100%" :cell-style="cellCenter"
  :header-cell-style="headCenter" >
  <el-table-column prop="date" label="时间">
  </el-table-column>
  <el-table-column prop="name" label="设备名">
  </el-table-column>
  <el-table-column prop="diffPre" label="进出口压差" >
  </el-table-column>
  <el-table-column prop="pre" label="气压" >
  </el-table-column>
  <el-table-column prop="inFreqency" label="输灰机频率" >
  </el-table-column>
  <el-table-column prop="outFreqency" label="卸灰机频率" >
  </el-table-column>
  <el-table-column prop="temp" label="除尘器箱温度" >
  </el-table-column>
  <!-- <el-table-column prop="state" label="状态"
    :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]" :filter-method="filterstate">
  </el-table-column> -->
</el-table> 
<!-- 分页部分 -->

<el-row type="flex" justify="start" v-show="longPage" >
  <el-col :span="24" class="center">
 <el-pagination  @size-change="alldusthandleSizeChange" @current-change="alldusthandleCurrentChange"
  :current-page="alldustSingleList.currentPage" :page-sizes="[10, 20,30]" :page-size="10"
  layout="total, sizes, prev, pager, next, jumper" :total="allDustTableData.length">
</el-pagination></el-col></el-row>
<!-- 第二种简易分页 -->
<el-row type="flex" justify="start" v-show="shortPage" >
  <el-col :span="24" class="center">
 
 <el-pagination
small
:page-size="10"
@current-change="alldusthandleCurrentChange"
  :current-page="alldustSingleList.currentPage" 
layout="prev, pager, next"
:total="allDustTableData.length"></el-pagination></el-col></el-row>
</div>

  <!-- 某种设备报警信息表 -->
  <div v-show="alldustAlertInfoTableVislble">
  <el-table ref="alldustAlertNowInfoRef" :data="alldustAlertNowInfoList.slice((alldustalertPage.currentPage-1)*alldustalertPage.pagesize,alldustalertPage.currentPage*alldustalertPage.pagesize)" tooltip-effect="dark" style="width: 100%"
  :cell-style="cellCenter"
  :header-cell-style="headCenter">
    <el-table-column prop="time" label="时间" min-width="30%">
    </el-table-column>
    <el-table-column prop="alertInfo" label="报警信息">
    </el-table-column>
    <el-table-column  prop="status" label="状态" min-width="30%">
  
    </el-table-column>
  </el-table>
  <el-row type="flex" justify="start" v-show="longPage" >
    <el-col :span="24" class="center">
  <el-pagination  class="alert-page" 
  @current-change="alldustHandleAlertCurrentChange" :current-page="alldustalertPage.currentPage"
  :page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
  :total="alldustAlertNowInfoList.length">
  </el-pagination></el-col></el-row>

  <!-- 第二种简易分页 -->
  <el-row type="flex" justify="start" v-show="shortPage">
    <el-col :span="24" >
   
   <el-pagination
small
:page-size="10"
@current-change="alldustHandleAlertCurrentChange" :current-page="alldustalertPage.currentPage"
layout="prev, pager, next"
:total="alldustAlertNowInfoList.length"></el-pagination></el-col></el-row>
  </div>

              </el-card>
            </div>
          </el-dialog>
        </div>
        <!-- 轴承故障表格 -->
        <div v-show="flag1" v-show="gzflag">
          <!-- 单路表格 -->
          <!-- <div v-show="alldan"> -->
            <div>
          <el-table border stripe ref="filterTable"
            :data="tableData1.slice((bearingList.currentPage-1)*bearingList.pagesize,bearingList.currentPage*bearingList.pagesize)"
            style="width: 100%" :cell-style="cellCenter"
            :header-cell-style="headCenter"
            
            >
            <el-table-column prop="date" label="时间">
              
            </el-table-column>
            <el-table-column prop="proName" label="设备名">
              <template slot-scope="scope">
                <el-tooltip class="item" effect="dark" content="测试点" placement="top">
                  <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-ceshidianwei"></use>
                  </svg>
              </el-tooltip>
              <div>{{scope.row.proName}}</div>
            </template>
            </el-table-column>
            <el-table-column prop="envirTemp" label="测点1">
              <template slot-scope="scope">
                  <svg class="icon" aria-hidden="true" style="padding-top: 12px;
                  height: 1.8em;">
                    <use xlink:href="#icon-wendu"></use>
                  </svg>
                  <div slot="content">{{scope.row.devicename1}}</div>
                <div style="color: #009688;">{{scope.row.envirTemp}}</div>
              </template>
            </el-table-column>
            <el-table-column prop="bearingTemp" label="测点2">
              <template slot-scope="scope">
                  <svg class="icon" aria-hidden="true" style="padding-top: 12px;
                  height: 1.8em;">
                    <use xlink:href="#icon-wendu"></use>
                  </svg>
                  <div slot="content">{{scope.row.devicename2}}</div>
                <div style="color: #009688;">{{scope.row.bearingTemp}}</div>
              </template>
            </el-table-column>
            <el-table-column prop="signal" label="信号强度">
              <template slot-scope="scope">
                <el-tooltip class="item" effect="dark" :content="signalTooltip(scope.row.signal)" placement="top">
                  <img 
                  style="width: 2em;"
                  :src="signalIcon(scope.row.signal)">
                  <!-- <svg class="icon" aria-hidden="true">
                    <use :xlink:href="signalIcon(scope.row.signal)"></use>
                  </svg> -->
              </el-tooltip>
              <!-- <div>信号强度</div> -->
              <!-- <div style="color: #009688;">{{scope.row.signal}}</div> -->
            </template>
            </el-table-column>
            <el-table-column prop="battery" label="电池电量">
              <template slot-scope="scope">
                <el-tooltip class="item" effect="dark" :content="batteryTooltip(scope.row.battery)" placement="top">
                  <img 
                style="width: 2.8em;"
                :src="batteryIcon(scope.row.battery)">
              </el-tooltip>
              <!-- <div>电池电量</div>
              <div style="color: #009688;">{{scope.row.battery}}</div> -->
            </template>
            </el-table-column>
            <el-table-column prop="state" label="状态" :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' },{ text: '未知', value: '未知' },{ text: '无', value: '无' }]" :filter-method="filterstate">
              <template slot-scope="scope">
                <el-tooltip 
                v-show="scope.row.state == '在线'"
                class="item" effect="dark" content="状态" placement="top">
                  <!-- 在线图标 -->
                  <svg class="icon" aria-hidden="true" style="width: 2em;">
                    <use xlink:href="#icon-normal"></use>
                  </svg>    
              </el-tooltip>
              <el-tooltip 
                v-show="scope.row.state == '离线'||scope.row.state == '未知'"
                class="item" effect="dark" content="状态" placement="top">
                  <!-- 离线图标 -->
                  <svg class="icon" aria-hidden="true" style="width: 2em;">
                    <use xlink:href="#icon-off"></use>
                  </svg>              
              </el-tooltip>
              <!-- <div>设备状态</div> -->
              <div style="color: #009688;">{{scope.row.state}}</div>
            </template>
            </el-table-column>
            <el-table-column label="操作" width="200">
              <template slot-scope="scope"> 
                <el-tooltip class="item" effect="dark" content="刷新" placement="top" :enterable="false">
                  <el-button type="success" icon="el-icon-refresh" size="small"
                    @click="bearingRefresh(scope.$index)" style="font-size: 15px;"></el-button>
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="历史记录" placement="top" :enterable="false">
                  <el-button type="warning" icon="el-icon-time" size="small" @click="showBearingHistory(scope.$index)" style="font-size: 15px;"></el-button>
                </el-tooltip>
                <el-tooltip class="item" effect="dark" content="参数配置" placement="top" :enterable="false" >
                  <el-button type="info" icon="el-icon-setting" size="small"
                    @click="setBearingcan1(scope.$index)" style="font-size: 15px;"></el-button>
                </el-tooltip>
              </template>
            </el-table-column>
          </el-table>
          <el-row type="flex" justify="start" v-show="longPage">
            <el-col :span="24" class="center">
          <el-pagination  @size-change="handleSizeChange1" @current-change="handleCurrentChange1"
            :current-page="bearingList.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
            layout="total, sizes, prev, pager, next, jumper" :total="tableData1.length">
          </el-pagination></el-col></el-row>
          <!-- 第二种简易分页 -->
          <el-row type="flex" justify="start" v-show="shortPage">
            <el-col :span="24" class="center">
           
           <el-pagination 
small
:page-size="10"
@current-change="handleCurrentChange1"
            :current-page="bearingList.currentPage" 
layout="prev, pager, next"
:total="tableData1.length"></el-pagination></el-col></el-row></div>

        </div>
      </el-card>
          <!-- 所有故障轴承表格中单路参数配置对话框 -->
          <el-dialog title="参数配置" :visible.sync="setBearingDataDialogVisible1" width="70%">
            <el-card class="box-card" style="padding-bottom: 20px;">
              <!-- 采集频率以及上报频率 -->
              <el-row  type="flex" justify="start">
                <el-col :span="20" class="center" >
                  <el-form ref="Freqency1Form" :model="Freqency1" label-width="250px" style="padding-top: 20px;">
                    <el-form-item label="采集频率：">
                      <el-input v-model="Freqency1.colFreqency" :placeholder="Freqency1.colFreqency1"></el-input>
                    </el-form-item>
                    <el-form-item label="上报频率：">
                      <el-input v-model="Freqency1.upFreqency" width="80px" :placeholder="Freqency1.upFreqency1" ></el-input>
                    </el-form-item>
                  </el-form>
                </el-col>
              </el-row>
              <el-row class="bd" type="flex" justify="start">
                <el-col :span="24">
                  <div class="center" style="margin-bottom: 10px;">
                    <el-button type="success" icon="el-icon-edit" size="medium" @click="setbearingfreq" > 修改</el-button>
                  </div>

                </el-col>
              </el-row>
          
            <!-- 动态参数1部分，通过循环创建 -->
            <el-scrollbar :native="false">
              <el-row type="flex"
              justify="start" v-for="item in movePara1" :key="item.Name">
                <el-col :span="22" class="center">
                  <el-form ref="movePara1Form" style="padding-top: 10px;">
                    <el-form-item :label="item.name" label-width="170px">
                      <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
                    </el-form-item>
                  </el-form>
                </el-col>
              </el-row>
            </el-scrollbar>
              <div class="center">
                <el-button type="success" icon="el-icon-edit" size="medium" @click="setbearinglimit">修改</el-button>
              </div>
            </el-card>
          </el-dialog>
          <!-- 所有故障轴承表格中单路历史记录对话框 -->
          <el-dialog  title="轴温检测设备历史数据" :visible.sync="setBearingHistoryDataDialogVisible1" width="70%" @close="BearingHistoryDataDialogVisible1Close">
            <div>
              <el-card style="margin-bottom: 20px;">
                <el-form 
    class="center"
    ref="allfirstHistoryTableTypeRef" :model="allfirstHistoryTableTypeRefForm" >
    <el-form-item >
      <el-select v-model="allfirstHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="allfirstSelectedHistoryTableType">
        <el-option label="历史数据趋势图" value="picture"></el-option>
        <el-option label="历史数据记录表" value="recordTable"></el-option>
        <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
      </el-select>
    </el-form-item>
  </el-col>
  </el-form>
</el-row >
<!-- 时间选择器 -->
<el-row type="flex" justify="center">
<el-col :span="24" class="center">
<el-date-picker 
v-model="allfirstTimeValue"
type="daterange"
start-placeholder="开始日期"
end-placeholder="结束日期"
value-format="yyyy-MM-dd"
 @change="allfirstSelectedTime">
</el-date-picker>
</el-col>
</el-row>

                <!-- 趋势图 -->
                <div v-show="allfirstBearingPageVisible">
              <div style="height: 300px;" id="temp2"></div>
              <div class="margin" id="xhao"></div>
            </div>


  
            <!-- 记录表 -->
            <el-button type="success" icon="el-icon-edit" size="medium" v-show="allfirstRecordTableVisible" @click="method52" >导出表格</el-button>
<div v-show="allfirstRecordTableVisible">
  <el-table border stripe ref="filterTable"
  :data="allfirstNowbearingtableData.slice((allfirstNowPageInfo.currentPage-1)*allfirstNowPageInfo.pageSize,allfirstNowPageInfo.currentPage*allfirstNowPageInfo.pageSize)"
  style="width: 100%" :cell-style="cellCenter"
  :header-cell-style="headCenter">
  <el-table-column prop="date" label="时间">
  </el-table-column>
  <el-table-column prop="name" label="设备名">
  </el-table-column>
  <el-table-column prop="envirTemp" label="温度1">
  </el-table-column>
  <el-table-column prop="bearingTemp" label="温度2">
  </el-table-column>
  <el-table-column prop="signal" label="信号强度">
  </el-table-column>
  <el-table-column prop="battery" label="电池电量">
  </el-table-column>
  <!-- <el-table-column prop="state" label="状态" :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]"
    :filter-method="filterstate">
  </el-table-column> -->
  <!-- 分页部分 -->
  </el-table>
  <el-row type="flex" justify="start" v-show="longPage" >
    <el-col :span="24" class="center">
  <el-pagination  @size-change="allhandleFirstNowSizeChange" @current-change="allhandleFirstNowCurrentChange"
  :current-page="allfirstNowPageInfo.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
  layout="total, sizes, prev, pager, next, jumper" :total="allfirstNowbearingtableData.length">
  </el-pagination></el-col></el-row>
  <!-- 第二种简易分页 -->
  <el-row type="flex" justify="start" v-show="shortPage" >
    <el-col :span="24" class="center">
   
   <el-pagination
small
:page-size="10"
@current-change="allhandleFirstNowCurrentChange"
  :current-page="allfirstNowPageInfo.currentPage" 
layout="prev, pager, next"
:total="allfirstNowbearingtableData.length">
  </el-pagination></el-col></el-row>
  </div>
  
  <!-- 轴承报警信息表 -->
  <div v-show="allfirstAlertInfoTableVislble">
  <el-table ref="allfirstAlertNowInfoRef" :data="allfirstAlertNowInfoList.slice((allfirstBearingalertPage.currentPage-1)*allfirstBearingalertPage.pageSize,allfirstBearingalertPage.currentPage*allfirstBearingalertPage.pageSize)" tooltip-effect="dark" style="width: 100%"
  :cell-style="cellCenter"
  :header-cell-style="headCenter">
    <el-table-column prop="time" label="时间" min-width="30%">
    </el-table-column>
    <el-table-column prop="alertInfo" label="报警信息">
    </el-table-column>
    <el-table-column  prop="status" label="状态" min-width="30%">
  
    </el-table-column>
  </el-table>
  <el-row type="flex" justify="start" v-show="longPage">
    <el-col :span="24" class="center">
  <el-pagination  class="alert-page" 
  @current-change="allfirstBearingHandleAlertCurrentChange" :current-page="allfirstBearingalertPage.currentPage"
  :page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
  :total="allfirstAlertNowInfoList.length">
  </el-pagination></el-col></el-row>
  <!-- 第二种简易分页 -->
  <el-row type="flex" justify="start" v-show="shortPage">
    <el-col :span="24" >
   
   <el-pagination
small
:page-size="10"
@current-change="allfirstBearingHandleAlertCurrentChange" :current-page="allfirstBearingalertPage.currentPage"
layout="prev, pager, next"
:total="allfirstAlertNowInfoList.length"></el-pagination></el-col></el-row>
  </div>
              </el-card>
            </div>
          </el-dialog>
       <!-- 第二路表格的参数配置和历史记录对话框 -->
      <!-- 第二路表格的参数配置对话框 -->
      <el-dialog title="参数配置" :visible.sync="setBearingDataDialogVisible2" width="70%">
        <el-card class="box-card" style="padding-bottom: 20px;">
          <!-- 采集频率以及上报频率 -->
          <el-row  type="flex" justify="start">
           <el-col :span="20" class="center">
             <el-form ref="allsecondFreqencysecondFreqencyForm" :model="allsecondFreqency" label-width="250px" style="padding-top: 20px;" >
               <el-form-item label="采集频率：">
                 <el-input v-model="allsecondFreqency.colFreqency" :placeholder="allsecondFreqency.colFreqency"></el-input>
               </el-form-item>
               <el-form-item label="上报频率：">
                 <el-input v-model="allsecondFreqency.upFreqency" width="80px" :placeholder="allsecondFreqency.upFreqency"></el-input>
               </el-form-item>
             </el-form>
           </el-col>
         </el-row>
         <el-row class="bd" type="flex" justify="start">
           <el-col :span="24">
             <div class="center" style="margin-bottom: 10px;">
               <el-button type="success" icon="el-icon-edit" size="medium" @click="allsetSecondBearingFreq">修改</el-button>
             </div>
     
           </el-col>
         </el-row>
       <!-- 动态参数1部分，通过循环创建 -->
       <el-scrollbar :native="false">
        
       <el-row type="flex"
       justify="start" v-for="item in allmoveSecondPara" :key="item.name">
         <el-col :span="22" class="center">
           <el-form ref="allmoveSecondParaRef" style="padding-top: 10px;">
             <el-form-item :label="item.name" label-width="170px">
               <el-input v-model="item.data" :placeholder="item.data1" :id="item.id"></el-input>
             </el-form-item>
           </el-form>
         </el-col>
       </el-row>
     </el-scrollbar>
         <div class="center">
           <el-button type="success" icon="el-icon-edit" size="medium" @click="allsetSecondBearingLimit">修改</el-button>
         </div>
       </el-card>
     
          
        </el-card>
      </el-dialog>
      <!-- 第二路表格的历史记录对话框 -->
      <el-dialog title="轴温检测设备历史数据" :visible.sync="setBearingHistoryDataDialogVisible2" width="70%">
        <el-card style="margin-bottom: 20px;">
          <el-row type="flex" justify="center">
            <el-col :span="24">
          <el-form 
          class="center"
          ref="allsecondHistoryTableTypeRef" :model="allsecondHistoryTableTypeRefForm" >
          <el-form-item >
            <el-select v-model="allsecondHistoryTableTypeRefForm.type" placeholder="请选择图表类型" @change="allsecondSelectedHistoryTableType">
              <el-option label="历史数据趋势图" value="picture"></el-option>
              <el-option label="历史数据记录表" value="recordTable"></el-option>
              <el-option label="历史报警信息表" value="alertInfoTable"></el-option>
            </el-select>
          </el-form-item>
        </el-col>
        </el-form>
        </el-row >
        <!-- 时间选择器 -->
        <el-row type="flex" justify="center">
        <el-col :span="24" class="center">
        <el-date-picker 
        v-model="allsecondTimeValue"
        type="daterange"
        start-placeholder="开始日期"
        end-placeholder="结束日期"
        value-format="yyyy-MM-dd" @change="allsecondSelectedTime">
        </el-date-picker>
        </el-col>
        </el-row>
        <!-- 趋势图 -->
        <div v-show="allsecondBearingPageVisible">
        <div style="height: 300px;" id="allfirsttemp"></div>
        <div class="margin" style="height: 300px;" id=allfirstxhao></div>
        </div>
        
        
        <!-- 记录表 -->
        <el-button type="success" icon="el-icon-edit" size="medium" v-show="allsecondRecordTableVisible" @click="method53">导出表格</el-button>
        <div v-show="allsecondRecordTableVisible">
        <el-table border stripe ref="filterTable"
        :data="allsecondNowbearingtableData.slice((allsecondNowPageInfo.currentPage-1)*allsecondNowPageInfo.pageSize,allsecondNowPageInfo.currentPage*allsecondNowPageInfo.pageSize)"
        style="width: 100%">
        <el-table-column prop="date" label="时间">
        </el-table-column>
        <el-table-column prop="name" label="设备名">
        </el-table-column>
        <el-table-column prop="envirTemp" label="温度1">
        </el-table-column>
        <el-table-column prop="bearingTemp" label="温度2">
        </el-table-column>
        <el-table-column prop="signal" label="信号强度">
        </el-table-column>
        <el-table-column prop="battery" label="电池电量">
        </el-table-column>
        <!-- <el-table-column prop="state" label="状态" :filters="[{ text: '在线', value: '在线' },{ text: '离线', value: '离线' }]"
        :filter-method="filterstate">
        </el-table-column> -->
        <!-- 分页部分 -->
        </el-table>
        <el-row type="flex" justify="start" v-show="longPage">
          <el-col :span="24" class="center">
        <el-pagination  @size-change="allhandleSecondNowSizeChange" @current-change="allhandleSecondNowCurrentChange"
        :current-page="allsecondNowPageInfo.currentPage" :page-sizes="[10, 20, 30]" :page-size="10"
        layout="total, sizes, prev, pager, next, jumper" :total="allsecondNowbearingtableData.length">
        </el-pagination>
        <!-- 第二种简易分页 -->
        <el-row type="flex" justify="start" v-show="shortPage">
          <el-col :span="24" class="center">
         
         <el-pagination
small
:page-size="10"
@current-change="allhandleSecondNowCurrentChange"
        :current-page="allsecondNowPageInfo.currentPage"
layout="prev, pager, next"
:total="allsecondNowbearingtableData.length">
</el-pagination></el-col></el-row>
        </div>
        
        <!-- 轴承报警信息表 -->
        <div v-show="allsecondAlertInfoTableVislble">
        <el-table ref="allsecondAlertNowInfoRef" :data="allsecondAlertNowInfoList.slice((allsecondBearingalertPage.currentPage-1)*allsecondBearingalertPage.pageSize,allsecondBearingalertPage.currentPage*allsecondBearingalertPage.pageSize)" tooltip-effect="dark" style="width: 100%"
        :cell-style="cellCenter"
        :header-cell-style="headCenter">
        <el-table-column prop="time" label="时间" min-width="30%">
        </el-table-column>
        <el-table-column prop="alertInfo" label="报警信息">
        </el-table-column>
        <el-table-column  prop="status" label="状态" min-width="30%">
        
        </el-table-column>
        </el-table>
        <el-row type="flex" justify="start" v-show="longPage">
          <el-col :span="24" class="center">
        <el-pagination  class="alert-page" 
        @current-change="allsecondBearingHandleAlertCurrentChange" :current-page="allsecondBearingalertPage.currentPage"
        :page-sizes="[10,20,30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
        :total="allsecondAlertNowInfoList.length">
        </el-pagination></el-col></el-row>
        <!-- 第二种简易分页 -->
        <el-row type="flex" justify="start" v-show="shortPage">
          <el-col :span="24" >
         <el-pagination
small
:page-size="10"
@current-change="allsecondBearingHandleAlertCurrentChange" :current-page="allsecondBearingalertPage.currentPage"
layout="prev, pager, next"
:total="allsecondAlertNowInfoList.length"></el-pagination></el-col></el-row>
        </div>
        </el-card>
      </el-dialog>


      <!-- 显示除尘报警信息对话框 -->
      <el-dialog title="除尘报警信息" :visible.sync="dustAlertDialogVisible" width="70%">
        <el-card>
         
        <el-table ref="alertInfoRef" :data="dustalertInfoList" tooltip-effect="dark" style="width: 100%"
          @select="handleSelection" @select-all="handleSelection" :cell-style="cellCenter"
          :header-cell-style="headCenter">
          <el-table-column prop="time" label="时间" min-width="30%" >
          </el-table-column>
          <el-table-column prop="alertInfo" label="报警信息">
          </el-table-column>
          <el-table-column type="selection" >

          </el-table-column>
        </el-table>
        <div style="margin-top: 20px;float:right">
          <el-button @click="clearSelection" type="info" plain>取消选择</el-button>
          <el-button @click="readedInfo(dustselectedCheckboxId)" type="danger" plain>已读</el-button>
        </div>
        <el-row type="flex" justify="start" v-show="longPage">
          <el-col :span="24" class="center">
        <el-pagination v-show="longPage" class="alert-page" @size-change="handleAlertSizeChange"
          @current-change="handleAlertCurrentChange" :current-page="dustalertPage.currentPage" :page-sizes="[10,20,30]"
          :page-size="10" layout="total, sizes, prev, pager, next, jumper" :total="dusttotal">
        </el-pagination></el-col></el-row>
        <!-- 第二种简易分页 -->
        <el-row type="flex" justify="start" v-show="shortPage">
          <el-col :span="24" >
         
         <el-pagination
small
:page-size="10"
@current-change="handleAlertCurrentChange" :current-page="dustalertPage.currentPage"
layout="prev, pager, next"
:total="dusttotal"></el-pagination></el-col></el-row>
      </el-card>
        
      </el-dialog>

      <!-- 显示轴承报警信息对话框 -->
      <el-dialog title="轴温报警信息" :visible.sync="bearingAlertDialogVisible" width="70%">
         <el-card>
        <el-table ref="alertInfoRef" :data="bearingalertInfoList" tooltip-effect="dark" style="width: 100%"
          @select="bearinghandleSelection" @select-all="bearinghandleSelection" :cell-style="cellCenter"
          :header-cell-style="headCenter" >
          <el-table-column prop="time" label="时间" min-width="30%"> 
          </el-table-column>
          <el-table-column prop="alertInfo" label="报警信息">
          </el-table-column>
          <el-table-column type="selection" >

          </el-table-column>
        </el-table>
        <div style="margin-top: 20px;float:right">
          <el-button @click="clearSelection" type="info" plain>取消选择</el-button>
          <el-button @click="bearingReadedInfo(bearingselectedCheckboxId)" type="danger" plain>已读</el-button>
        </div>
        <el-row type="flex" justify="start" v-show="longPage">
          <el-col :span="24" class="center">
        <el-pagination  class="alert-page" @size-change="bearinghandleAlertSizeChange"
          @current-change="bearinghandleAlertCurrentChange" :current-page="bearingalertPage.currentPage"
          :page-sizes="[10, 20, 30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper"
          :total="bearingtotal">
        </el-pagination></el-col></el-row>
        <!-- 第二种简易分页 -->
        <el-row type="flex" justify="start" v-show="shortPage">
          <el-col :span="24" >
         
         <el-pagination
small
:page-size="10"
          @current-change="bearinghandleAlertCurrentChange" :current-page="bearingalertPage.currentPage"
layout="prev, pager, next"
:total="bearingtotal"></el-pagination></el-col></el-row>
</el-card>
      </el-dialog>
      <el-table 
      :data="dusthistorytableexcel"
       id="dusthistorytable" v-show="false" >
      <el-table-column prop="date" label="时间">
      </el-table-column>
      <el-table-column prop="name" label="设备名">
      </el-table-column>
      <el-table-column prop="diffPre" label="进出口压差" >
      </el-table-column>
      <el-table-column prop="pre" label="气压" >
      </el-table-column>
      <el-table-column prop="inFreqency" label="输灰机频率" >
      </el-table-column>
      <el-table-column prop="outFreqency" label="卸灰机频率" >
      </el-table-column>
      <el-table-column prop="temp" label="除尘器箱温度" >
      </el-table-column>
    </el-table> 

      <el-table border stripe ref="filterTable"
  :data="bearinghistorytableexecl1"
  id="bearinghistorytable1" v-show="false">
  <el-table-column prop="date" label="时间">
  </el-table-column>
  <el-table-column prop="name" label="设备名">
  </el-table-column>
  <el-table-column prop="envirTemp" label="温度1">
  </el-table-column>
  <el-table-column prop="bearingTemp" label="温度2">
  </el-table-column>
  <el-table-column prop="signal" label="信号强度">
  </el-table-column>
  <el-table-column prop="battery" label="电池电量">
  </el-table-column>

  </el-table>

  <!-- <el-table border stripe ref="filterTable"
        :data="bearinghistorytableexecl2"
        style="width: 100%" v-show="false" id="bearinghistorytable2">
        <el-table-column prop="date" label="时间">
        </el-table-column>
        <el-table-column prop="name" label="设备名">
        </el-table-column>
        <el-table-column prop="envirTemp" label="测点温度1">
        </el-table-column>
        <el-table-column prop="bearingTemp" label="测点温度2">
        </el-table-column>
        <el-table-column prop="signal" label="信号强度">
        </el-table-column>
        <el-table-column prop="battery" label="电池电量">
        </el-table-column>
      </el-table> -->
    </div>

    
  </template>
  
</body>

<script>
  var token=sessionStorage.getItem("token");
  var pkey1 = new Array();//除尘
  var pkey2 = new Array();//轴承
  let loading;
  var idTmr;
  var Main = {
    methods: {
      open(msg) {
        this.$message({
          message: msg,
          duration: 3000,
        });
      }
    }
  }
  var Ctor = Vue.extend(Main);
  // 定义home组件模板对象
  var home = {
    template: '#tem1',
    data() {
      return {
        // 用户名
        username: {
          name: sessionStorage.getItem("username")
        },
        // 时间信息
        date: 
        new Date(),
        // 产品名
        DustproductName: {
          name: '产品名称1'
        },
        BearingproductName: {
          name: '产品名称2'
        },
        // 除尘产品设备信息
        dustInfo: {
         // productType: '除尘',
          allNum: '0',
          badNum: '0',
          goodNum: '0',
          unNum: '0'
        },
        // 轴承产品设备信息
        bearingInfo: {
         // productType: '轴承',
          allNum: '0',
          badNum: '0',
          goodNum: '0',
          unNum: '0'
        },
        // 除尘故障表格数据
        tableData: [
        ],
        // 除尘每页显示数据
        dustList: {
          currentPage: 1,// 当前页
          pagesize: 10// 每页显示条数
        },
        // 轴承故障每页显示的数据
        bearingList: {
          // 当前页
          currentPage: 1,
          // 每页显示条数
          pagesize: 10
        },
        // 轴承故障数据
        tableData1: [
        ],
        tableData2:[
        ],
        tableData1key:[],
        tableData2key:[],
        // 选择两个表格的展示
        flag: false,
        flag1: false,
        flag2: false,
        flag3: false,
        gdflag:false,
        gzflag:false,
        dan:false,
        shuang:false,
        // 故障表格选择


        badOptions:[
        ],

        dustbad:[],//存放卡片对应的数据
        dustbadkey:[],
        dustbadsimid:[],
        dustgood:[],
        dustgoodkey:[],
        dustgoodsimid:[],
        dustun:[],
        dustunkey:[],
        dustunsimid:[],
        dustall:[],
        dustdevicekey: [],//所有设备key
        dustsimid:[],//所有simid
        bearingbad:[],
        bearingbadkey:[],
        bearingbadtype:[],
        bearingbadsimid:[],
        bearinggood:[],
        bearinggoodkey:[],
        bearinggoodtype:[],
        bearinggoodsimid:[],
        bearingun:[],
        bearingunkey:[],
        bearinguntype:[],
        bearingunsimid:[],
        bearingall:[],
        bearingsimid:[],//所有simid
        bearingtype:[],
        bearingtype1:[],
        bearingtype2:[],
        bearingtypeoff:[],
        bearingtypebad:[],
        bearingtypegood:[],
        bearingdevicekey: [],//所有设备key
        dusttype:[],
        dusttype1:[],
        dusttype2:[],
        dusttypeoff:[],
        dusttypebad:[],
        dusttypegood:[],
        // 存放选择的故障表格value值
        badTablevalue:'1',
        dusttotal: 0,
        bearingtotal: 0,
        setDustDataDialogVisible1: false,//除尘参数配置框
        // 是否显示除尘历史记录对话框
        setDustHistoryDataDialogVisible1: false,
        setBearingDataDialogVisible1: false,
        // 是否显示轴承历史记录对话框
        setBearingHistoryDataDialogVisible1: false,
        // 除尘报警框显示
        dustAlertDialogVisible: false,
        // 存放报警信息列表
        dustalertInfoList: [
        ],
        dustalertid: [],//报警信息的id
        bearingalertid: [],//报警信息的id
        gdustdevicekey: [],//故障设备key
        gdustdevicesimid:[],
        gbearingdevicekey: [],//故障设备key
        gbearingdevicekey2: [],//故障设备key
        bearingdevicename: [],//所有设备名
        dustdevicename: [],//所有设备名
        dusthistoryname:'',
        duststatus:[],
        bearingstatus:[],
        demess:[],//除尘设备信息
        devmessage:[],//轴承设备信息
        // 除尘报警信息页数
        shuadevicenum:0, //刷新的index
        dustnum:0,

        bearingnum:0,
        bearingnum2:0,
        dustcannum:0,//除尘参数的index
        bearingcannum:0,

        singdustnum:0,//除尘卡片内选择的按钮标号

        firstTablekey:[],
        secondTablekey:[],
        dustalertPage: {
          currentPage: 1,
          pagesize: 10
        },
        // 除尘故障参数配置对话框显示
        setDustDataDialogVisible: false,
        // 除尘历史数据对话框显示
        setDustHistoryDataDialogVisible1: false,
        // 存放监听到的已选择的checkbox对应的id值
        dustselectedCheckboxId: [],
        // 轴承报警对话框的显示与否
        bearingAlertDialogVisible: false,
        // 轴承报警信息
        bearingalertInfoList: [],

        alertcan:[],//轴承报警参数数据
        // 轴承报警信息页数
        bearingalertPage: {
          currentPage: 1,
          pagesize: 10
        },
        dustcanmessage:'',
        //  除尘参数设置内容
        //  除尘定时上传时间
        uploadTime: {
          day: '',
          hour: '',
          minutes: '',
          day1: '',
          hour1: '',
          minutes1: ''
        },
        // 除尘进出口压差
        dustpress: {
          up: '',
          down: '',
          up1: '',
          down1: ''
        },
        // 气压
        airPressure: {
          up: '',
          down: '',
          up1: '',
          down1: ''
        },
        // 输灰机频率
        inFreqency: {
          up: '',
          down: '',
          up: '',
          down: ''
        },
        // 卸灰机频率
        outFreqency: {
          up: '',
          down: '',
          up1: '',
          down1: ''
        },
        // 除尘器箱体温度
        temp: {
          up: '',
          down: '',
          up1: '',
          down1: ''
        },
        // 采集频率以及上报频率
        Freqency1: {
          colFreqency: '',
          upFreqency: '',
          colFreqency1: '',
          upFreqency1: '',
        },
        // 轴承动态参数1
        movePara1: [],
        // 除尘设备数据对话框显示
        searchDustEquipDialogVisible:false,
        // 轴承设备数据对话框显示
        searchBearingEquipDialogVisible:false,
        // 储存选择图表的类型
        historyTableTypeRefForm:{
          type:''
        },
        // 是否显示单路双路按钮
        roleBtn:false,
        // 双路表格数据
       
        // 第二个轴承故障表格每页显示的数据
        bearingList1: {
          // 当前页
          currentPage: 1,
          // 每页显示条数
          pagesize: 10
        },
        // 第二个轴承故障表格的历史记录和参数配置对话框的显示
        setBearingDataDialogVisible2:false,
        setBearingHistoryDataDialogVisible2:false,
        // 所有轴承故障表格双路的第二个表格的参数配置对话框信息
        // 第2个表格参数配置对话框内的数据
      allsecondFreqency:{
        colFreqency:'',
        upFreqency:''
      },
      allmoveSecondPara:[
        {name:'参数1',data:'xx',data1:'', id:'0'},
        {name:'参数2',data:'xx',data1:'',id:'1'},
        {name:'参数3',data:'xx',data1:'',id:'2'}
      ],
devicebname:[],

      //  轴承产品里查看后的单双路表格信息
      // 单路表格信息
      firstTable:[

      ],
      // 单路页数信息
      firstPageInfo:{
        currentPage:1,
        pageSize:10
      },
      //双路第二个表格信息
      secondTable:[
      ],
      // 双路第二个表格页数信息
      secondPageInfo:{
        currentPage:1,
        pageSize:10
      },
      // 第一个表格的参数配置对话框显示
      setFirstBearingDataDialogVisible:false,
      // 第一个表格参数配置对话框内的数据
      firstFreqency:{
        colFreqency:'',
        upFreqency:'',
        colFreqency1:'',
        upFreqency1:''
      },
      moveFirstPara:[
 
      ],
      // 第2个表格的参数配置对话框显示
      setSecondBearingDataDialogVisible:false,
      // 第2个表格参数配置对话框内的数据
      secondFreqency:{
        colFreqency:'',
        upFreqency:''
      },
      moveSecondPara:[

      ],
      // 第1 2个表格历史记录对话框
      setFirstBearingHistoryDataDialogVisible:false,
      setSecondBearingHistoryDataDialogVisible:false ,
      // 第1 2个表格储存图表类型
      firstHistoryTableTypeRefForm:{type:'picture'},
      secondHistoryTableTypeRefForm:{
        type:'picture'
      },
      // 双路时间选择部分
      firstTimeValue:'',
      secondTimeValue:'',
      // 双路表格三个图的显示
      firstBearingPageVisible:false,
      firstRecordTableVisible:false,
      firstAlertInfoTableVislble:false,
      secondBearingPageVisible:false,
      secondRecordTableVisible:false,
      secondAlertInfoTableVislble:false,
      alldan:false,
    allshuang:false,
    singdan1:false,
     singshuang1:false,
     singdan2:false,
     singshuang2:false,
      // 双路表格的当前设备记录表数据
      firstNowbearingtableData:[

      ],
      secondNowbearingtableData:[
      ],
      // 双路表格的当前设备记录表分页数据
      firstNowPageInfo:{
        currentPage:1,
        pageSize:10
      },
      secondNowPageInfo:{
        currentPage:1,
        pageSize:10
      },
      // 两个表格的当前设备报警信息数据
      firstAlertNowInfoList:[
      ],
      secondAlertNowInfoList:[
      ],
      // 2个表格的当前设备报警信息分页
      firstBearingalertPage:{
        currentPage:1,
        pageSize:10
      },
      firstNowBearingtotal:10,
      secondBearingalertPage:{
        currentPage:1,
        pageSize:10
      },
      secondNowBearingtotal:10,

      //  卡片内除尘单一故障的设备数据表格
      dustSingleTableData:[
      ],
      dustSingleTablekey:[],
      dustSinglesimid:[],
      bearingSingleTableData:[
      ],
      bearingSingleTablekey:[],
      // 卡片内除尘单一故障的设备数据分页信息
      dustSingleList:{
        currentPage:1,
        pagesize:10
      },
      // 单一除尘设备参数配置对话框
      singleDustDataDialogVisible:false,
      // 单一除尘设备参数配置数据
      singleUploadTime:{
        day:'',hour:'',minutes:'',
        day1:'',hour1:'',minutes1:''
      },
      singleDustPress:{up:'',down:'',up1:'',down1:''},
      singleAirPressure:{up:'',down:'',up1:'',down1:''},
      singleinFreqency:{up:'',down:'',up1:'',down1:''},
      singleoutFreqency:{up:'',down:'',up1:'',down1:''},
      singletemp:{up:'',down:'',up1:'',down1:''},
      // 单一除尘设备历史记录对话框
      setSingleDustHistoryDataDialogVisible : false,
      // 单一除尘设备图表类型
      singleHistoryTableTypeRefForm:{type:'picture'},
      singleTimeValue:'',
      bearingcankey:'',
      // 卡片显示设备数据记录表
      trueDustTableData:[],
        trueDustTablekey:[],
      truedustSingleList:{
        currentPage:1,
        pagesize:10
      },
            dusttitle:'',
      dusthistorytableexcel:[],//打印时存储所有数据的表格
      bearinghistorytableexecl1:[],
      bearinghistorytableexecl2:[],
      // 某种除尘设备报警信息
       singleAlertNowInfoList:[
       ],
      singleBearingalertPage:{
        currentPage:1,
        pagesize:10
      },
      singleNowDusttotal:10,
      //除尘三种类型图表的显示与否
      singleDustPageVisible:false,
      singleDustrecordTableVisible:false,
      singleAlertInfoTableVislble:false,
// 除尘所有故障历史记录对话框
allSetDustHistoryDataDialogVisible1:false,
// 除尘所有故障图表类型存储
alldustHistoryTableTypeRefForm:{type:'picture'},
alldustTimeValue:'',
// 除尘所有故障历史记录三种图表类型
allDustPageVisible:false,
allDustrecordTableVisible:false,
alldustAlertInfoTableVislble:false,
// 除尘所有故障历史记录中某一设备数据
allDustTableData:[],
alldustSingleList:{
  currentPage:1,
  pagesize:10
},
// 除尘历史记录内的报警信息
alldustAlertNowInfoList:[],
alldustalertPage:{
  currentPage:1,
  pagesize:10
},
alldustNowDusttotal:10,
// 所有故障轴承设备的历史记录数据
// 第1 2个表格储存图表类型
allfirstHistoryTableTypeRefForm:{type:'picture'},
      allsecondHistoryTableTypeRefForm:{
        type:'picture'
      },
      // 双路时间选择部分
      allfirstTimeValue:'',
      allsecondTimeValue:'',
      // 双路表格三个图的显示
      allfirstBearingPageVisible:false,
      allfirstRecordTableVisible:false,
      allfirstAlertInfoTableVislble:false,
      allsecondBearingPageVisible:false,
      allsecondRecordTableVisible:false,
      allsecondAlertInfoTableVislble:false,
      // 双路表格的当前设备记录表数据
      allfirstNowbearingtableData:[
      ],
      allsecondNowbearingtableData:[
      ],
      // 双路表格的当前设备记录表分页数据
      allfirstNowPageInfo:{
        currentPage:1,
        pageSize:10
      },
      allsecondNowPageInfo:{
        currentPage:1,
        pageSize:10
      },
      // 两个表格的当前设备报警信息数据
      allfirstAlertNowInfoList:[
     
      ],
      allsecondAlertNowInfoList:[
      ],
      // 2个表格的当前设备报警信息分页
      allfirstBearingalertPage:{
        currentPage:1,
        pageSize:10
      },
      allfirstNowBearingtotal:10,
      allsecondBearingalertPage:{
        currentPage:1,
        pageSize:10
      },
      allsecondNowBearingtotal:10,
    // 两种分页的显示
    longPage:false,
    shortPage:false,
    screenWidth: document.body.clientWidth,  //设置的监听屏幕的变化
    // 设置卡片缩小时，使margin消失显示卡片的查看字样
    smallcard : false,
    smallchooseTime:false
      }
    }
    ,
    // 随时监听屏幕宽度
    watch: {
      screenWidth:{
      handler (val) {
             if(val < 600){
             	this.shortPage = true
               this.longPage = false
               this.smallcard = true
             }else{
              this.shortPage = false
               this.longPage = true
               this.smallcard = false
             }
         
          },
          immediate: true
    }
    },
    //拿到屏幕的宽度
    mounted () {
      const that = this
        window.onresize = () => {
            return (() => {
                window.screenWidth = document.body.clientWidth
                that.screenWidth = window.screenWidth
            })()
        }
    },
    created() {
      Onget("http://api.ahusmart.com/api/v1/product",token, this.origint);
    },
   
    methods: {
      // 若信号小于30%，则显示较弱
      signalTooltip(signal){
        if (parseFloat(signal) < parseFloat("30.0%")) {
          return "信号较弱"
        }else{
          return "信号较强"
        }
        
      },
      // 若信号小于30%，图像显示较弱的信号强度图像
      signalIcon(signal){
        if (parseFloat(signal) < parseFloat("30.0%")) {
          return "icon/信号弱.png"
        }else{
          return "icon/信号强.png"
        }
      },
      batteryTooltip(battery){
        if (parseFloat(battery) < parseFloat("40.0%")) {
          return "电量不足"
        }else{
          return "电量充足"
        }

      },
      batteryIcon(battery){
        if (parseFloat(battery) < parseFloat("40.0%")) {
          return "icon/电量低.png"
        }else{
          return "icon/电量高.png"
        }
      },
      objectSpanMethod({ row, column, rowIndex, columnIndex }) {
        if (columnIndex === 0) {
          if (rowIndex % 2 === 0) {
            return {
              rowspan: 2,
              colspan: 1
            };
          } else {
            return {
              rowspan: 0,
              colspan: 0
            };
          }
        }
        // if (columnIndex === 0) {
        //   if (rowIndex % 2 === 0) {
        //     return {
        //       rowspan: 2,
        //       colspan: 1
        //     };
        //   } else {
        //     return {
        //       rowspan: 0,
        //       colspan: 0
        //     };
        //   }
        // }
      },
      origint: function (json) {//获取用户下面产品信息
        var dkey = new Array();
        var zkey = new Array();
        var pdata = json;
        if (pdata["code"] == "200") {
          var count = Number(pdata["data"]["productInfo"]["length"]);
          for (var i = 0; i < count; i++) {
            var type = pdata["data"]["productInfo"][i]["typeIdentify"];
            if (type == "nsgcc") {///除尘
              dkey.push(pdata["data"]["productInfo"][i]["productKey"]);
              this.DustproductName.name = pdata["data"]["productInfo"][i]["productName"];
            }
            else {
              zkey.push(pdata["data"]["productInfo"][i]["productKey"]);
              sessionStorage.setItem("ztype",pdata["data"]["productInfo"][i]["typeIdentify"])
              this.BearingproductName.name = pdata["data"]["productInfo"][i]["productName"];
            }
          }
          if (dkey.length !== 0) {
            sessionStorage.setItem("dkey",dkey[0]);
            this.badOptions.push({value:"1",label:"除尘器监测异常设备表"})
            this.gdflag=true;
            this.flag2 = true;
            var url1 = "http://api.ahusmart.com/api/v1/productDetail?productKey=" + sessionStorage.getItem("dkey");
            Onget(url1, token, this.convert);
            var asdata1 = {
              "productKey": sessionStorage.getItem("dkey"),
              "pageIndex": 1, // 页号
              "pageSize": 10, // 每页数量
              "asc": 0 // 0倒序，1正序
            };
            Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata1, token, this.Alert1);

          } else {
            sessionStorage.setItem("dkey","Null");
          }
          if (zkey.length != 0) {
            this.badOptions.push({value:"2",label:"轴承温度监测异常设备表"})
            this.gzflag=true;
            this.flag3 = true;
            sessionStorage.setItem("zkey",zkey[0]);
            var url2 = "http://api.ahusmart.com/api/v1/productDetail?productKey=" + sessionStorage.getItem("zkey");
            Onget(url2, token, this.convert1);
            var asdata2 = {
              "productKey": sessionStorage.getItem("zkey"),
              "pageIndex": 1, // 页号
              "pageSize": 10, // 每页数量
              "asc": 0 // 0倒序，1正序
            };
            Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata2, token, this.Alert2);
          } else {
            sessionStorage.setItem("zkey","Null");
          }
          if (dkey.length != 0 ) {
            this.flag = true;
            this.badTablevalue="1";
          }
          else if (dkey.length == 0 && zkey.length != 0) {
            this.flag1 = true;
            this.badTablevalue="2";
          }
          else{
            alert("用户无除尘和轴承产品");
            window.location="Login.html";
          }
        }
      },
      convert: function (json) {
        var redata = json;
        if (redata["code"] == "200") {
          this.DustproductName.name = redata["data"]["productName"];
          this.dustInfo.allNum = redata["data"]["deviceInfo"].length;
          var count = Number(redata["data"]["deviceInfo"].length)
          for (var i = 0; i < count; i++) {
            this.dustdevicekey.push(redata["data"]["deviceInfo"][i]["deviceKey"]);
            this.dustdevicename.push(redata["data"]["deviceInfo"][i]["deviceName"])
            this.dustsimid.push(redata["data"]["deviceInfo"][i]["nickname"]);
            this.dusttype.push(redata["data"]["deviceInfo"][i]["deviceType"]);
          }
          var sdata = {
            productKey: sessionStorage.getItem("dkey"),
            deviceKeyList: this.dustdevicekey
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata, token, this.deviceDetail1)
        }
        else {
          new Ctor().open('获取除尘产品信息失败');
        }
      },
      convert1: function (json) {
        var redata1 = json;
        // var devicelist1=new Array();
        if (redata1["code"] == "200") {
          var count = Number(redata1["data"]["deviceInfo"].length)
          this.bearingInfo.allNum = count;
          for (var j = 0; j < count; j++) {
            this.bearingdevicekey.push(redata1["data"]["deviceInfo"][j]["deviceKey"]);
            this.bearingdevicename.push(redata1["data"]["deviceInfo"][j]["deviceName"])
            this.bearingsimid.push(redata1["data"]["deviceInfo"][j]["nickname"]);
           this.bearingtype.push(redata1["data"]["deviceInfo"][j]["deviceType"])
           if(redata1["data"]["deviceInfo"][j]["deviceType"]=="NB7122"){
            var  bname={
             name1:  redata1["data"]["deviceInfo"][j]["extraInfo"]["deviceName1"]["Value"],
             name2:redata1["data"]["deviceInfo"][j]["extraInfo"]["deviceName2"]["Value"]
           }
           this.devicebname.push(bname)
           }else{
            var  bname={
             name1: '环境温度',
             name2:'轴承温度'
           }
           this.devicebname.push(bname)
           }
          }
          var sdata1 = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: this.bearingdevicekey
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceStatus",sdata1,token,this.Statusmessage2)
        }
        else {
          new Ctor().open('获取轴承产品信息失败');
        }
      },

     Statusmessage2:function(json){
      if(json["code"]=="200"){
        var bearingdevicekey2=new Array();
        var count=json["data"]["deviceStatus"].length;
        for(var i=0;i<count;i++){
          bearingdevicekey2.push(json["data"]["deviceStatus"][i]["deviceKey"]);
        }

 for(var i=0;i<this.bearingdevicekey.length;i++){
   for(var j=0;j<count;j++){
     if(bearingdevicekey2.indexOf(this.bearingdevicekey[i])!=-1){
if(bearingdevicekey2[j]==this.bearingdevicekey[i]){
  this.bearingstatus.push(json["data"]["deviceStatus"][j]["status"]);
  break;
}else{

}
     }
     else{
      this.bearingstatus.push("nostatus");
      break;
     }
   }
 }
 var sdata1 = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: this.bearingdevicekey
          };
 Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata1, token, this.deviceDetail2)
       } 
       else{
         new   Ctor().open("查询轴承设备状态失败");
       }
     },

      deviceDetail1: function (json) {
       var  dangdate=Date.parse(new Date());
        var redata2 = json;
        var dustdevicekey1 = new Array();
        if (redata2["code"] == "200") {
          var count = Number(redata2["data"]["deviceData"].length);
          for(var k=0;k<count;k++){
            dustdevicekey1.push(redata2["data"]["deviceData"][k]["deviceKey"]);
          }

for(var i=0;i<this.dustdevicekey.length;i++){
  for(var j=0;j<count;j++){
    if(dustdevicekey1.indexOf(this.dustdevicekey[i])!=-1){
                 if(dustdevicekey1[j]==this.dustdevicekey[i]){
           var yacha = getNumber1(redata2["data"]["deviceData"][j]["yacha"], 2) + "Kpa";
            var qiya = getNumber1(redata2["data"]["deviceData"][j]["qiya"], 2) + "Mpa";
            var wenkong = getNumber1(redata2["data"]["deviceData"][j]["wenkong"], 2) + "℃";
            var pinlv11 = getNumber1(redata2["data"]["deviceData"][j]["freq11"], 2) + "Hz";
            var pinlv12 = getNumber1(redata2["data"]["deviceData"][j]["freq12"], 2) + "Hz";
            var guzhang = {
                date: timestampToTime(redata2["data"]["deviceData"][j]["time"] * 1000),
                name:this.dustdevicename[i],
                diffPre: yacha,
                pre: qiya,
                inFreqency: pinlv11,
                outFreqency: pinlv12,
                temp: wenkong,
                state: '在线'
              };
            
           // if(this.duststatus[i]=="offline"){
              if( dangdate- redata2["data"]["deviceData"][j]["time"] * 1000>=3600000){
                guzhang.date= timestampToTime(dangdate);
                guzhang.diffPre="--";
                guzhang.pre="--";
                guzhang.inFreqency="--";
                guzhang.outFreqency="--";
                guzhang.temp="--";
                guzhang.state="离线";
              this.dustInfo.unNum++;
              this.dustun.push(guzhang);
              this.dustunkey.push(this.dustdevicekey[i]);
              this.dustunsimid.push(this.dustsimid[i])
              this.tableData.push(guzhang);
              this.dusttype1.push(this.dusttype[i]);
              this.dusttypebad.push(this.dusttype[i]);
              this.gdustdevicekey.push(this.dustdevicekey[i]);
              this.gdustdevicesimid.push(this.dustsimid[i])
              this.dustall.push(guzhang);
            }
           // else if (this.duststatus[i]=="online") {
             else if(dangdate- redata2["data"]["deviceData"][j]["time"] * 1000<3600000){
              this.dustInfo.goodNum++;
              this.dustgood.push(guzhang);
              this.dustgoodkey.push(this.dustdevicekey[i]);
              this.dusttypegood.push(this.dusttype[i]);
              this.dustgoodsimid.push(this.dustsimid[i])
              this.dustall.push(guzhang);

              // this.gdustdevicekey.push(redata2["data"]["deviceData"][j]["deviceKey"]);
              // this.tableData.push(guzhang);
            }
            // else if (this.duststatus[i]=="nostatus") {
            //   this.dustInfo.badNum++;
            //   guzhang.state="无";
            //     this.dustbad.push(guzhang);
            //     this.dustbadkey.push(this.dustdevicekey[i]);
            //     this.dustbadsimid.push(this.dustsimid[i]);
            //     this.tableData.push(guzhang);
            //     this.gdustdevicekey.push(redata2["data"]["deviceData"][j]["deviceKey"]);
            //     this.gdustdevicesimid.push(this.dustsimid[i])
            //     this.dustall.push(guzhang);
            // }
            // else {
            //     this.dustInfo.badNum++;
            //     guzhang.state="故障";
            //     this.dustbad.push(guzhang);
            //     this.dustbadkey.push(this.dustdevicekey[i]);
            //     this.dustbadsimid.push(this.dustsimid[i]);
            //     this.tableData.push(guzhang);
            //     this.gdustdevicekey.push(redata2["data"]["deviceData"][j]["deviceKey"]);
            //     this.gdustdevicesimid.push(this.dustsimid[i])
            //     this.dustall.push(guzhang);
            // }
                break;
                 }
    }
    else{
      da=Date.parse(new Date());
      var guzhang1 = {
                date: timestampToTime(new Date(da)),
                name: this.dustdevicename[i],
                diffPre: "--",
                pre: "--",
                inFreqency: "--",
                outFreqency:"--",
                temp: "--",
                state: '未知'
              };
              this.dustInfo.badNum++;
              this.dustbad.push(guzhang1);
              this.dustbadkey.push(this.dustdevicekey[i]);
              this.dusttypebad.push(this.dusttype[i]);
              this.dusttype1.push(this.dusttype[i]);
              this.tableData.push(guzhang1);
              this.gdustdevicekey.push(this.dustdevicekey[i]);
              this.gdustdevicesimid.push(this.dustsimid[i]);
              this.dustall.push(guzhang1);
              break;
    }
  }
}
        }
      else {
          new Ctor().open('获取除尘设备数据失败');
        }
      },
      deviceDetail2: function (json) {
        var redata3 = json;
        if (redata3["code"] == "200") {
          var count = Number(redata3["data"]["deviceData"].length);
          var dateo= Date.parse(new Date());
          var bearingdevicekey1 = new Array();
          for (var i = 0; i < count; i++) {
               bearingdevicekey1.push(redata3["data"]["deviceData"][i]["deviceKey"]);
          }

          for (var i = 0; i < this.bearingdevicekey.length; i++) {
            for(var j=0;j<count;j++){
              if(bearingdevicekey1.indexOf(this.bearingdevicekey[i])!=-1){
                if(bearingdevicekey1[j]==this.bearingdevicekey[i]){
                  var guzhang1 = {
              date: timestampToTime(redata3["data"]["deviceData"][j]["time"] * 1000),
              proName: this.bearingdevicename[i],
              envirTemp: getNumber1(redata3["data"]["deviceData"][j]["envirTemp"], 1) + "℃",
              bearingTemp: getNumber1(redata3["data"]["deviceData"][j]["zhouchenTemp"], 1) + "℃",
              signal: getNumber1(redata3["data"]["deviceData"][j]["rssi"], 1) + "%",
              battery: getNumber1(redata3["data"]["deviceData"][j]["vbat"], 1) + "%",
              state: '在线',
              devicename1:this.devicebname[i].name1,
              devicename2:this.devicebname[i].name2

            }
            if(this.bearingstatus[i]=="online"){
              this.bearingInfo.goodNum++;
              this.bearinggood.push(guzhang1);
              this.bearingtypegood.push(this.bearingtype[i]);
              this.bearinggoodtype.push(this.bearingtype[i])
              this.bearinggoodkey.push(this.bearingdevicekey[i]);
              this.bearingall.push(guzhang1);

              this.tableData1.push(guzhang1);
              this.bearingtype1.push(this.bearingtype[i]);
             this.tableData1key.push(this.bearingdevicekey[i]);//测试

             //   if(this.bearingtype[i]=="NB7132"){
            //     this.tableData1.push(guzhang1);
            //   this.tableData1key.push(this.bearingdevicekey[i]);
            //   }else{
            //     this.tableData2.push(guzhang1);
            //   this.tableData2key.push(this.bearingdevicekey[i]);
            //  }//测试
            }
           else if(this.bearingstatus[i]=="offline"){
         //else if(dateo-redata3["data"]["deviceData"][j]["time"] * 1000>=3600000){
              this.bearingInfo.unNum++;
              guzhang1.state="离线";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";

              this.bearingun.push(guzhang1);
              this.bearingunkey.push(this.bearingdevicekey[i]);
              this.bearingtype1.push(this.bearingtype[i]);
              this.bearingtypeoff.push(this.bearingtype[i]);
              this.bearinguntype.push(this.bearingtype[i]);
              this.bearingall.push(guzhang1);
              this.tableData1.push(guzhang1);

        this.tableData1key.push(this.bearingdevicekey[i]);//测试
            }
            else if(this.bearingstatus[i]=="nostatus"){
              this.bearingInfo.badNum++;
              guzhang1.state="未知";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
              this.tableData1.push(guzhang1);
              this.bearingtypebad.push(this.bearingtype[i]);
              this.bearingtype1.push(this.bearingtype[i]);
              this.tableData1key.push(this.bearingdevicekey[i]);
              
            }
            else{
              this.bearingInfo.badNum++;
              guzhang1.state="故障";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
              this.bearingbad.push(guzhang1);
              this.bearingunkey.push(this.bearingdevicekey[i]);
              this.bearinguntype.push(this.bearingtype[i]);
              this.bearingtype1.push(this.bearingtype[i]);
              this.bearingtypebad.push(this.bearingtype[i]);
              this.bearingall.push(guzhang1);
              this.tableData1.push(guzhang1);
              this.tableData1key.push(this.bearingdevicekey[i]);//测试
            }
            break;
            }
                }
              else{
                var date=Date.parse(new Date());
                var guzhang2 = {
              date: timestampToTime(new Date(date)),
              proName: this.bearingdevicename[i],
              envirTemp: '--',
              bearingTemp: '--',
              signal: '--',
              battery: '--',
              state: '未知'
            };
            this.bearingInfo.badNum++;
            this.bearingbad.push(guzhang2);
            this.bearingunkey.push(this.bearingdevicekey[i]);
            this.bearingtypebad.push(this.bearingtype[i]);
            this.bearingtype1.push(this.bearingtype[i]);
            this.bearinguntype.push(this.bearingtype[i]);
            this.bearingall.push(guzhang2);
            this.tableData1.push(guzhang2);
             this.tableData1key.push(this.bearingdevicekey[i]);//测试
            break;
              }
            }
          }
          if(this.bearingtype.indexOf("NB7132")!=-1){
            this.alldan=true;
            this.singdan1=true;
          }
          if(this.bearingtype.indexOf("NB7122")!=-1){
            this.allshuang=true;
            this.singshuang1=true;
          }
        }
      },
      setdustcan1(index) {
        this.uploadTime.day1='';
  this.uploadTime.hour1='';
  this.uploadTime.minutes1='';
  this.dustpress.up1='';
  this.dustpress.down1='';
  this.airPressure.up1='';
  this.airPressure.down1='';
  this.inFreqency.up1='';
  this.inFreqency.down1='';
  this.outFreqency.up1='';
  this.outFreqency.down1='';
  this.temp.up1='';
  this.temp.down1='';
        this.setDustDataDialogVisible = true;
        var num = (this.dustList.currentPage - 1) * this.dustList.pagesize + index;
        this.dustcannum=num;
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + this.gdustdevicekey[num];
        Onget(urls, token, this.Dmessages);

      },

 Dmessages:function(json){
   
  this.uploadTime.day='';
  this.uploadTime.hour='';
  this.uploadTime.minutes='';
  this.dustpress.up='';
  this.dustpress.down='';
  this.airPressure.up='';
  this.airPressure.down='';
  this.inFreqency.up='';
  this.inFreqency.down='';
  this.outFreqency.up='';
  this.outFreqency.down='';
  this.temp.up='';
  this.temp.down='';
if(json["code"]=="200"){
  var gata = json["data"]["extraInfo"];
  this.dusttitle= "PLC编号:"+gata["plcNumber"]["Value"]+" / "+"除尘器号:"+ gata["chuchenhao"]["Value"]

  this.dustcanmessage=json["data"];
  this.uploadTime.day1=gata["nDay"]["Value"]+"天";
  this.uploadTime.hour1=gata["nHour"]["Value"]+"小时";
  this.uploadTime.minutes1=gata["nMinute"]["Value"]+"分钟";
  this.dustpress.up1=gata["nUpPa"]["Value"]+"pa";
  this.dustpress.down1=gata["nDownPa"]["Value"]+"pa";
  this.airPressure.up1=gata["nUppressure"]["Value"]+"pa";
  this.airPressure.down1=gata["nDownpressure"]["Value"]+"pa";
  this.inFreqency.up1=gata["nUpHz11"]["Value"]+"Hz";
  this.inFreqency.down1=gata["nDownHz12"]["Value"]+"Hz";
  this.outFreqency.up1=gata["nUpHz21"]["Value"]+"Hz";
  this.outFreqency.down1=gata["nDownHz22"]["Value"]+"Hz";
  this.temp.up1=gata["nUpTemp"]["Value"]+"℃";
  this.temp.down1=gata["nDownTemp"]["Value"]+"℃";
}else{
  new Ctor.open("获取参数信息失败");
}
 },

   setdusttime(){
    var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
    this.demess=[];
   var day=this.dustcanmessage["extraInfo"]["nDay"]["Value"];
   var hours=this.dustcanmessage["extraInfo"]["nHour"]["Value"];
   var min=this.dustcanmessage["extraInfo"]["nMinute"]["Value"];
   if(this.uploadTime.day!=""){
day=this.uploadTime.day;
}
if(this.uploadTime.hour!=""){
hours=this.uploadTime.hour;
}
if(this.uploadTime.minutes!=""){
min=this.uploadTime.minutes;
}

   if (isNaN(+day) || isNaN(+hours) || isNaN(+min) || Number(hours) >= 24 || Number(min) >= 60) {
         alert("输入参数错误！");
         }
else{
  for(var i=0;i<this.dustsimid.length;i++){
       if(this.dustcanmessage["nickname"].split(":")[0]==this.dustsimid[i].split(":")[0]){
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + this.dustdevicekey[i];
        Onget(urls, token, this.Dmessages1);
       }
     }
  var obj1 = {
             "nickname":this.dustcanmessage["nickname"],
             "ordertype": 43,
             "oDay":Number( this.dustcanmessage["extraInfo"]["nDay"]["Value"]),
             "oHour":Number( this.dustcanmessage["extraInfo"]["nHour"]["Value"]),
             "oMinute":Number( this.dustcanmessage["extraInfo"]["nMinute"]["Value"]),
             "nDay": Number(day),
             "nHour":Number(hours),
             "nMinute":Number(min)
                     };
                     if(obj1["nDay"]=="0"&&obj1["nHour"]==0&&obj1["nMinute"]==0){
                      alert("输入参数错误！");
                     }
                     else{
                      var urld= "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" + this.dusttype1[this.dustcannum] + "&bodyType=json&timeout=15";
     this.openFullScreen2("配置中.....")
     Onpost1(urld, obj1, token, this.reTime);
                     }
    
}
}
else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
 },
   setdustlimit(){
    var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
      var ya1=  this.dustcanmessage["extraInfo"]["nUpPa"]["Value"] ;
       var ya2=  this.dustcanmessage["extraInfo"]["nDownPa"]["Value"] ;
        var qy1= this.dustcanmessage["extraInfo"]["nUppressure"]["Value"] ;
        var qy2= this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]  ;
         var fr11= this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]  ;
          var fr12= this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"] ;
         var fr21= this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"] ;
          var fr22= this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"] ;
           var w1= this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"] ;
           var w2= this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"] ;
                  if (this.dustpress.up!="") {
                      ya1=this.dustpress.up;//修改前压差上极限
                  }
                  if(this.dustpress.down!=""){
                      ya2=this.dustpress.down;
                      }
                  if( this.airPressure.up!=""){
                      qy1=this.airPressure.up;
                  }
                  if(this.airPressure.down!=""){
                      qy2=this.airPressure.down;
                  }
                  if(this.inFreqency.up!=""){
                      fr11=this.inFreqency.up;
                  }
                  if(this.inFreqency.down!=""){
                      fr12=this.inFreqency.down;
                  }
                  if(this.outFreqency.up!=""){
                      fr21=this.outFreqency.up;
                  }  
                  if(this.outFreqency.down!=""){
                      fr22=this.outFreqency.down;
                  }
                  if(this.temp.up!=""){
                      w1=this.temp.up;
                  }
                  if(this.temp.down!=""){
                      w2=this.temp.down;
                  } 
                   else{ }

            if(isNaN(+ya1)||isNaN(+ya2)||isNaN(+qy1)||isNaN(+qy2)||isNaN(+fr11)||isNaN(+fr12)||isNaN(+fr21)||isNaN(+fr22)||isNaN(+w1)||isNaN(+w2))
                   {
                       alert("输入参数错误！");
                   }

                   else {
                   var obj3 = {
                           "nickname": this.dustcanmessage["nickname"],
                           "ordertype": 45,
                           "oUpPa": parseFloat(this.dustcanmessage["extraInfo"]["nUpPa"]["Value"]).toFixed(2),//修改前压差上极限
                           "oDownPa": parseFloat(this.dustcanmessage["extraInfo"]["nDownPa"]["Value"]).toFixed(2),//修改前压差下极限
                           "oUppressure": parseFloat(this.dustcanmessage["extraInfo"]["nUppressure"]["Value"]).toFixed(2),//修改前气压上极限
                           "oDownpressure": parseFloat(this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]).toFixed(2),//修改前气压下极限
                           "oUpHz11": parseFloat(this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]).toFixed(2),//修改前频率11上极限
                           "oDownHz12": parseFloat(this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"]).toFixed(2),//修改前频率12下极限
                           "oUpHz21": parseFloat(this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"]).toFixed(2),//修改前频率21上极限
                           "oDownHz22": parseFloat(this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"]).toFixed(2),//修改前频率21下极限
                           "oUpTemp": parseFloat(this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"]).toFixed(2),//修改前温度上极限
                           "oDownTemp": parseFloat(this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"]).toFixed(2),//修改前温度下极限
                           "nUpPa": parseFloat(ya1).toFixed(2),//修改后压差上极限
                           "nDownPa": parseFloat(ya2).toFixed(2),//修改后压差下极限
                           "nUppressure": parseFloat(qy1).toFixed(2),//修改后气压上极限
                           "nDownpressure": parseFloat(qy2).toFixed(2),//修改后气压下极限
                           "nUpHz11": parseFloat(fr11).toFixed(2),//修改后频率11上极限
                           "nDownHz12": parseFloat(fr12).toFixed(2),//修改后频率12下极限
                           "nUpHz21": parseFloat(fr21).toFixed(2),//修改后频率21上极限
                           "nDownHz22": parseFloat(fr22).toFixed(2),//修改后频率21下极限
                           "nUpTemp": parseFloat(w1).toFixed(2),//修改后温度上极限
                           "nDownTemp": parseFloat(w2).toFixed(2)//修改
                       };
           var urld= "http://api.ahusmart.com/api/v1/newDownRaw?productKey=" + this.dusttype1[this.dustcannum] + "&bodyType=json&timeout=15";
           this.openFullScreen2('配置中......')
             Onpost1(urld, obj3, token, this.reYu);
                      }
                    }
    else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{

    }
                    },

 Dmessages1:function(json){
if(json["code"]=="200"){
  this.demess.push(json);
}
},
 reTime:function(json){
   loading.close();
var t=json;
if (json["status"] == "success") {
                       var day =this.uploadTime.day ;
                       var hours =this.uploadTime.hour ;
                       var min = this.uploadTime.minutes;
                       if (day == "") { day = this.dustcanmessage["extraInfo"]["nDay"]["Value"]; }
                       if (hours == "") { hours = this.dustcanmessage["extraInfo"]["nHour"]["Value"]; }
                       if (min == "") { min = this.dustcanmessage["extraInfo"]["nMinute"]["Value"]; }
                       for (var m = 0; m < this.demess.length; m++) {
                               var objo =
                               {
                                   "productKey": this.demess[m]["data"]["productKey"],
                                   "deviceKey": this.demess[m]["data"]["deviceKey"],
                                   "deviceName": this.demess[m]["data"]["deviceName"],
                                   "nickname": this.demess[m]["data"]["nickname"],
                                   "netType": this.demess[m]["data"]["netType"],
                                   "deviceType": this.demess[m]["data"]["deviceType"],
                                   "extraInfo": this.demess[m]["data"]["extraInfo"]
                               };
                                   objo["extraInfo"]["nDay"]["Value"] = Number(day);
                                   objo["extraInfo"]["nHour"]["Value"] = Number(hours);
                                   objo["extraInfo"]["nMinute"]["Value"] = Number(min);
                               Onput1("http://api.ahusmart.com/api/v1/device", objo, token, this.DeviceUpdate);
                       }
                       new Ctor().open("设置成功！")
}
else{
  new Ctor().open("设置失败");
}
 },

  reYu:function(json){
  loading.close();
    if(json["status"]=="success"){
    var objo1 = {
            "productKey": sessionStorage.getItem("dkey"),
             "deviceKey": this.dustcanmessage["deviceKey"],
             "deviceName":this.dustcanmessage["deviceName"],
            "nickname": this.dustcanmessage["nickname"],
             "netType": this.dustcanmessage["netType"],
             "deviceType": this.dustcanmessage["deviceType"],
             "extraInfo": this.dustcanmessage["extraInfo"]
                       }
                 var ya1=  this.dustcanmessage["extraInfo"]["nUpPa"]["Value"] ;
                 var ya2=  this.dustcanmessage["extraInfo"]["nDownPa"]["Value"] ;
                  var qy1= this.dustcanmessage["extraInfo"]["nUppressure"]["Value"] ;
                  var qy2= this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]  ;
                  var fr11= this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]  ;
                  var fr12= this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"] ;
                  var fr21= this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"] ;
                  var fr22= this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"] ;
                  var w1= this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"] ;
                  var w2= this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"] ;

                  if (this.dustpress.up!="") {
                      ya1=this.dustpress.up;//修改前压差上极限
                  }
                  if(this.dustpress.down!=""){
                      ya2=this.dustpress.down;
                      }
                  if( this.airPressure.up!=""){
                      qy1=this.airPressure.up;
                  }
                  if(this.airPressure.down!=""){
                      qy2=this.airPressure.down;
                  }
                  if(this.inFreqency.up!=""){
                      fr11=this.inFreqency.up;
                  }
                  if(this.inFreqency.down!=""){
                      fr12=this.inFreqency.down;
                  }
                  if(this.outFreqency.up!=""){
                      fr21=this.outFreqency.up;
                  }
                  if(this.outFreqency.down!=""){
                      fr22=this.outFreqency.down;
                  }
                  if(this.temp.up!=""){
                      w1=this.temp.up;
                  }
                  if(this.temp.down!=""){
                      w2=this.temp.down;
                  }
                       objo1["extraInfo"]["nUpPa"]["Value"]=getNumber2(ya1);
                       objo1["extraInfo"]["nDownPa"]["Value"]=getNumber2(ya2);
                       objo1["extraInfo"]["nUppressure"]["Value"]=getNumber2( qy1);
                       objo1["extraInfo"]["nDownpressure"]["Value"]=getNumber2( qy2);
                       objo1["extraInfo"]["nUpHz11"]["Value"]=getNumber2(fr11);
                       objo1["extraInfo"]["nDownHz12"]["Value"]=getNumber2(fr12);
                       objo1["extraInfo"]["nUpHz21"]["Value"]=getNumber2(fr21);
                       objo1["extraInfo"]["nDownHz22"]["Value"]=getNumber2(fr22);
                       objo1["extraInfo"]["nUpTemp"]["Value"]=getNumber2(w1);
                       objo1["extraInfo"]["nDownTemp"]["Value"] = getNumber2(w2);
                       Onput1("http://api.ahusmart.com/api/v1/device", objo1, token, this.DeviceUpdate);
                      new Ctor().open("设置成功");
                      }
                      else{
                        new Ctor().open("设置失败")
                      }
                      },
 
   DeviceUpdate:function(json){
  if(json["code"]=="200"){
   console.log("数据库修改定时成功");
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + this.gdustdevicekey[this.dustcannum];
        Onget(urls, token, this.Dmessages);
}
 },


  setBearingcan1(index){
      this.setBearingDataDialogVisible1 = true;
        var num = (this.bearingList.currentPage - 1) * this.bearingList.pagesize + index;
        this.bearinngum=num;
        this.bearingcankey=this.tableData1key[num];
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey
        Onget(urls, token, this.Bmessages);

        },
        setBearingcan2(index){
      this.setBearingDataDialogVisible1 = true;
        var num = (this.bearingList1.currentPage - 1) * this.bearingList1.pagesize + index;
        this.bearingnum=num;
        this.bearingcankey=this.tableData2key[num];
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey;
        Onget(urls, token, this.Bmessages);

        },

  Bmessages:function(json){

    this.movePara1=[];
    this.Freqency1.upFreqency="";
    this.Freqency1.colFreqency="";
    this.Freqency1.upFreqency1="";
    this.Freqency1.colFreqency1="";
    if(json["code"]=="200"){
      var einfo=new Array();
      var namein=new Array();
      var valuein=new Array();
      this.devmessage=json["data"];
      var json1 = json["data"]["extraInfo"];
            for (var ever in json1) {
                einfo.push(ever);
            }
            for (var i = 0; i < einfo.length; i++) {
                var data1 = einfo[i];
                namein.push(json1[data1]["Name"]);
                valuein.push(json1[data1]["Value"]);
                if(einfo[i]=="uploadRate"){
                 this.Freqency1.upFreqency1=json1[data1]["Value"]+"分钟"
                }
                if(einfo[i]=="collectRate"){
                 this.Freqency1.colFreqency1=json1[data1]["Value"]+"分钟"
                }
                else{
                  if(json1[data1]["Name"].indexOf("温度")!=-1&&json1[data1]["Name"].indexOf("测点温度")==-1){
                    var bearingcan={
                     name:json1[data1]["Name"],
                     id:einfo[i],
                     data:'',
                     data1:json1[data1]["Value"]+"℃"
                   };
                    this.movePara1.push(bearingcan);
                  }
                  if(json1[data1]["Name"].indexOf("电量")!=-1){
                    var bearingcan1={
                     name:json1[data1]["Name"],
                     id:einfo[i],
                     data:'',
                     data1:json1[data1]["Value"]+"%"
                   };
                    this.movePara1.push(bearingcan1);
                  }
                }
            }
    }
    else{
      new Ctor().open("获取轴承设备参数失败");
    }
  },
 setbearingfreq(){
  var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
              var collect = this.Freqency1.colFreqency;
               var upload = this.Freqency1.upFreqency;
               if (isNaN(+collect) || isNaN(+upload)) {
                       alert('输入参数错误');
                   }
                   else {
                       if (collect== "") {
                           collect =this.devmessage["extraInfo"]["collectRate"]["Value"];
                       }
                       if (upload == "") {
                           upload = this.devmessage["extraInfo"]["uploadRate"]["Value"]
                       }
                       var urlp = "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" + this.bearingtype1[this.bearinngum] + "&bodyType=json&timeout=10";
                       var objp = {
                           "sim": this.devmessage["nickname"],
                           "collectRate": collect,
                           "uploadRate": upload,
                           "type": "rate"
                       };
           this.openFullScreen2('参数配置中.....')
                       Onpost1(urlp, objp, token, this.reRate1);
                   }
          }
       else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
 },

 setbearinglimit(){
  var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
               var obj2 = {
                   "sim": this.devmessage["nickname"],
                   "type": "warn",
               };
   for(var i=0;i<this.movePara1.length;i++){
     if (isNaN(+this.movePara1[i].data)){
       new Ctor().open("输入参数错误")
       return;
     }
   if(this.movePara1[i].id=="vbat"){
     var vbat=this.movePara1[i].data;
    if (vbat != "") {
                   var key1 = "vbat";
                   var value1 = vbat;
                   obj2[key1] = value1;
               }
   }
   if(this.movePara1[i].id=="warn1"){
     var warn1=this.movePara1[i].data;
    if (warn1 != "") {
                   var key1 = "warn1";
                   var value1 = warn1;
                   obj2[key1] = value1;
               }
   }
   if(this.movePara1[i].id=="warn2"){
     var warn2=this.movePara1[i].data;
    if (warn2 != "") {
                   var key1 = "warn2";
                   var value1 = warn2;
                   obj2[key1] = value1;
               }
   }
   if(this.movePara1[i].id=="warn3"){
     var warn3=this.movePara1[i].data;
    if (warn3 != "") {
                   var key1 = "warn3";
                   var value1 = warn3;
                   obj2[key1] = value1;
               };
      }
   }
   var urlp = "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" + this.bearingtype1[this.bearinngum] + "&bodyType=json&timeout=10";
this.openFullScreen2('参数配置中.....')
     Onpost1(urlp, obj2,token, this.relimit1);
          }
     else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
   },

  reRate1:function(json){
    loading.close();
             var collect1 = this.Freqency1.colFreqency;
               var upload1 = this.Freqency1.upFreqency;
               var objm = {
                   "productKey": this.devmessage["productKey"],
                   "deviceKey": this.devmessage["deviceKey"],
                   "deviceName": this.devmessage["deviceName"],
                   "nickname": this.devmessage["nickname"],
                   "netType": this.devmessage["netType"],
                   "deviceType": this.devmessage["deviceType"],
                   "extraInfo": this.devmessage["extraInfo"]
               }
               if (json["status"] == "success") {
                   if (collect1 == "") {
                       collect1 = this.devmessage["extraInfo"]["collectRate"]["Value"];
                   }
                   if (upload1 == "") {
                       upload1 = this.devmessage["extraInfo"]["uploadRate"]["Value"]
                   }
                   objm["extraInfo"]["collectRate"]["Value"] = collect1;
                   objm["extraInfo"]["uploadRate"]["Value"] = upload1;
                   Onput1("http://api.ahusmart.com/api/v1/device", objm, token, this.DeviceUpdate2);
                  new Ctor().open ("设置成功！");

               }
               else if (json["status"] == "fail") {
                new Ctor().open("设置失败");
               }
               else{
                new Ctor().open("设置失败");
               }
  },
  relimit1:function(json){
    loading.close();
      if (json["status"] == "success") {
        var objm = {
          "productKey": this.devmessage["productKey"],
           "deviceKey": this.devmessage["deviceKey"],
           "deviceName": this.devmessage["deviceName"],
           "nickname": this.devmessage["nickname"],
           "netType": this.devmessage["netType"],
           "deviceType":this.devmessage["deviceType"],
          "extraInfo":this.devmessage["extraInfo"]
                   };

     for(var i=0;i<this.movePara1.length;i++){
   if(this.movePara1[i].id=="vbat"){
     var vbat=this.movePara1[i].data;
    if (vbat != "") {
      objm["extraInfo"]["vbat"]["Value"] =vbat;
               }
   }
   if(this.movePara1[i].id=="warn1"){
     var warn1=this.movePara1[i].data;
    if (warn1 != "") {
      objm["extraInfo"]["warn1"]["Value"] = warn1;
               }
   }
   if(this.movePara1[i].id=="warn2"){
     var warn2=this.movePara1[i].data;
    if (warn2 != "") {
      objm["extraInfo"]["warn2"]["Value"] = warn2;
               }
   }
   if(this.movePara1[i].id=="warn3"){
     var warn3=this.movePara1[i].data;
    if (warn3 != "") {
      objm["extraInfo"]["warn3"]["Value"] = warn3
               };
      }
   }
   Onput1("http://api.ahusmart.com/api/v1/device", objm, token, this.DeviceUpdate2);
         new Ctor().open("设置成功！");
                   }
     else {
                new Ctor().open("设置失败！");
         }
  },

 DeviceUpdate2:function(json){
 if(json["code"]=="200"){
  console.log("数据库修改轴承频率成功");
   this.Freqency1.colFreqency='';
     this.Freqency1.upFreqency='';
  var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey;
        Onget(urls, token, this.Bmessages);
 }
  },
      dustVisible() {
        this.flag = true
        this.flag1 = false
      },
      bearingVisible() {
        this.flag1 = true
        this.flag = false
      },
      openFullScreen2(tex) {
         loading = this.$loading({
          lock: true,
          text: tex,
          spinner: 'el-icon-loading',
          background: 'rgba(0, 0, 0, 0.7)'
        });
      },
      // 筛选进出口压差
      filterdiffPre(value, row) {
        return row.diffPre === value;
      },
      // 筛选气压
      filterPre(value, row) {
        return row.pre === value;
      },
      // 筛选输灰机频率
      filterinFreqency(value, row) {
        return row.inFreqency === value;
      },
      // 筛选卸灰机频率
      filterinoutFreqency(value, row) {
        return row.outFreqency === value;
      },
      // 筛选除尘器箱温度
      filtertemp(value, row) {
        return row.temp === value;
      },
      // 筛选状态
      filterstate(value, row) {
        return row.state === value;
      },
      filterstate1(value,row){
        return row.state === value
      },
      // 监听除尘每页显示多少条数据
      handleSizeChange(val) {
        console.log(`每页 ${val} 条`);
        this.dustList.pagesize = val
      },
      // 监听除尘当前页数
      handleCurrentChange(val) {
        console.log(`当前页: ${val}`);
        this.dustList.currentPage = val
      },
      // 监听轴承每页显示多少条数据
      handleSizeChange1(val) {
        this.bearingList.pagesize = val
      },
      // 监听轴承当前页数
      handleCurrentChange1(val) {
        this.bearingList.currentPage = val
        // 需要再次向服务器请求一次数据信息，才能刷新页码值。
      },
      handleSelectionChange(val) {
        console.log(val)
      },
      // 处理除尘报警信息前端分页
      handleAlertSizeChange(val) {
        this.dustalertPage.pagesize = val
        var asdata1 = {
          "productKey": sessionStorage.getItem("dkey"),
          "pageIndex": this.dustalertPage.currentPage, // 页号
          "pageSize": val, // 每页数量
          "asc": 0 // 0倒序，1正序
        };
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata1, token, this.Alert1);
      },
      //除尘报警
      Alert1: function (json) {
        var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.dustalertInfoList = [];
          this.dustalertid = [];
          this.dusttotal = ardata1["data"]["total"];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          for (var i = 0; i < count; i++) {
            this.dustalertid.push(ardata1["data"]["alertInfo"][i]["alertId"])
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"]
            };
            this.dustalertInfoList.push(dustalert);
          }
        } else {
           this.dustalertInfoList=[];
        }
      },
      //轴承报警
      Alert2: function (json) {
        var ardata2 = json;
        if (ardata2["code"] == "200") {
          this.bearingalertInfoList = [];
          this.bearingalertid = [];
          this.bearingtotal = ardata2["data"]["total"];
          var count = Number(ardata2["data"]["alertInfo"]["length"]);
          for (var i = 0; i < count; i++) {
            this.bearingalertid.push(ardata2["data"]["alertInfo"][i]["alertId"])
            var bearingalert = {
              id: i,
              time: timestampToTime(ardata2["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata2["data"]["alertInfo"][i]["Content"]
            };
            this.bearingalertInfoList.push(bearingalert);
          }
        } else {
          this.bearingalertInfoList=[];
        }
      },
      //除尘报警当前页
      handleAlertCurrentChange(val) {
        this.dustalertPage.currentPage = val
        var asdata1 = {
          "productKey": sessionStorage.getItem("dkey"),
          "pageIndex": val, // 页号
          "pageSize": this.dustalertPage.pagesize, // 每页数量
          "asc": 0 // 0倒序，1正序
        };
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata1, token, this.Alert1);
      },
      // 监听复选框,并将选中的id值存入数组中
      handleSelection(selection) {
        this.dustselectedCheckboxId = []
        selection.forEach(item => {
          this.dustselectedCheckboxId.push(item.id)
        })
      },
      //除尘报警状态修改回复后重新获取相应条数报警信息
      Rtatus: function (json) {
        if (json["code"] == "200") {
          var sdatad2 = {
            "productKey": sessionStorage.getItem("dkey"),
            "pageIndex": this.dustalertPage.currentPage, // 页号
            "pageSize": this.dustalertPage.pagesize, // 每页数量
            "asc": 0 // 0倒序，1正序
          }
          Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", sdatad2, token, this.Alert1)
        }
      },
      //轴承报警状态修改回复后重新获取相应条数报警信息
      Rtatus1: function (json) {
        if (json["code"] == "200") {
          var sdatab3 = {
            "productKey": sessionStorage.getItem("zkey"),
            "pageIndex": this.bearingalertPage.currentPage, // 页号
            "pageSize": this.bearingalertPage.pagesize, // 每页数量
            "asc": 0 // 0倒序，1正序
          }
          Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", sdatab3, token, this.Alert2)
        }
      },
      // 除尘报警已读事件，遍历原始数据，将标记的报警记录删除
      readedInfo(id) {
        var Sendid = [];
        for (var i = 0; i < this.dustselectedCheckboxId.length; i++) {
          var a = this.dustselectedCheckboxId[i];
          Sendid.push(this.dustalertid[i]);
        }
        var alertdust = {
          "productKey": sessionStorage.getItem("dkey"),//指定产品key
          "alertIds": Sendid // 获取的alertId
        };
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfos", alertdust, token, this.Rtatus)
      },
      // 用户清空选择事件
      clearSelection() {
        this.$refs.alertInfoRef.clearSelection()
      },
      // 处理轴承报警分页
      bearinghandleAlertSizeChange(val) {
        this.bearingalertPage.pagesize = val
        var asdata2 = {
          "productKey": sessionStorage.getItem("zkey"),
          "pageIndex": this.bearingalertPage.currentPage , // 页号
          "pageSize": this.bearingalertPage.pagesize, // 每页数量
          "asc": 0 // 0倒序，1正序
        };//获取轴承报警信息
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata2, token, this.Alert2);
      },
      //轴承报警信息页数监听
      bearinghandleAlertCurrentChange(val) {
        this.bearingalertPage.currentPage = val
        var asdata1 = {
          "productKey": sessionStorage.getItem("zkey"),
          "pageIndex": val, // 页号
          "pageSize": this.bearingalertPage.pagesize, // 每页数量
          "asc": 0 // 0倒序，1正序
        };
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfo", asdata1, token, this.Alert2);
      },
      // 监听轴承复选框,并将选中的id值存入数组中
      bearinghandleSelection(selection) {
        this.bearingselectedCheckboxId = []
        selection.forEach(item => {
          this.bearingselectedCheckboxId.push(item.id)
        })
      },
      // 轴承已读事件，遍历原始数据，将已读的报警信息状态修改
      bearingReadedInfo(id) {
        var Sendid1 = [];
        for (var i = 0; i < this.bearingselectedCheckboxId.length; i++) {
          var a = this.bearingselectedCheckboxId[i];
          Sendid1.push(this.bearingalertid[i]);
        }
        var alertbearing = {
          "productKey": sessionStorage.getItem("zkey"),//指定产品key
          "alertIds": Sendid1 // 获取的alertId
        };//更改轴承报警信息状态
        Onpost1("http://api.ahusmart.com/api/v1/productAlertInfos", alertbearing,token, this.Rtatus1)

      },
      //  打开除尘历史记录对话
      showDustHistory(index) {
        
        this.alldustTimeValue=[];
        this.alldustHistoryTableTypeRefForm.type="picture";
        this.setDustHistoryDataDialogVisible1 = true;
        this.allDustPageVisible = true 
       this.allDustrecordTableVisible = false
       this.alldustAlertInfoTableVislble = false 
         this.dustnum = (this.dustList.currentPage - 1) * this.dustList.pagesize + index;//（页数-1）X每页数据量+序号
        var devicekey=this.gdustdevicekey[this.dustnum];//获取故障表格中对应devicekey
        var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59";
        
        var dusth={
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     };
                     this.openFullScreen2('数据查询中.....');
      Onpost1(" http://api.ahusmart.com/api/v1/historyData",dusth,token,this.rdhistory1);

                     var obj2 = {
                                      "productKey": sessionStorage.getItem("dkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.ahistory1);
      },

      ahistory1:function(json){

  var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.alldustAlertNowInfoList = [];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          var status="";
          for (var i = 0; i < count; i++) {
            if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
              status="未读"
            }else{
              status="已读"
            }
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
              status:status
            };
            this.alldustAlertNowInfoList.push(dustalert);
          }
        } else {
           this.alldustAlertNowInfoList=[];
        }

      },

    rdhistory1:function(json){
      loading.close();
      this.allDustTableData=[];
      this.dusthistorytableexcel=[];
  if(json["code"]=="200"){
    var wendu = new Array();
                     var qiya = new Array();
                     var yacha= new Array();
                     var pinlv1= new Array();
                     var pinlv2 = new Array();
                     var time = new Array();
                     var count=Number(json["data"]["deviceData"]["length"]);
                             for(var i=count-1;i>=0;i--){
                                 qiya.push( getNumber1(json["data"]["deviceData"][i]["qiya"],2));
                                 yacha.push( getNumber1(json["data"]["deviceData"][i]["yacha"],2));
                                 pinlv1.push(getNumber1(json["data"]["deviceData"][i]["freq11"],2));
                                 pinlv2.push(getNumber1(json["data"]["deviceData"][i]["freq12"],2));
                                 wendu.push(getNumber1(json["data"]["deviceData"][i]["wenkong"],2));
                                 time.push(json["data"]["deviceData"][i]["date"]);
                                 var data={
                                  date: json["data"]["deviceData"][i]["date"],
                name:json["data"]["deviceData"][i]["deviceName"],
                          diffPre:getNumber1(json["data"]["deviceData"][i]["yacha"],2)+"Kpa",
                    pre: getNumber1(json["data"]["deviceData"][i]["qiya"],2)+"Mpa",
                 inFreqency: getNumber1(json["data"]["deviceData"][i]["freq11"],2)+"Hz",
                 outFreqency:getNumber1(json["data"]["deviceData"][i]["freq12"],2)+"hz",
                 temp: getNumber1(json["data"]["deviceData"][i]["wenkong"],2)+"℃"
              
                                 }
                               this.allDustTableData.push(data);
                               this.dusthistorytableexcel.push(data);
                             }
                             Tu3(qiya,yacha,time,"yali");
                             Tu4(wendu,time,"temp1");
                             Tu5(pinlv1,pinlv2,time,"freq");
                             window.onresize= function () {
                              Tu3(qiya,yacha,time,"yali");
                             Tu4(wendu,time,"temp1");
                             Tu5(pinlv1,pinlv2,time,"freq");
              }
  }
  else{
    new Ctor().open("未查询到数据");
    qiya=[];yacha=[];time=[];wendu=[];pinlv1=[];pinlv2=[];
    Tu3(qiya,yacha,time,"yali");
    Tu4(wendu,time,"temp1");
    Tu5(pinlv1,pinlv2,time,"freq");
  }
  
},
// 轴承历史记录对话框关闭将选择框内的重置为历史数据趋势图
BearingHistoryDataDialogVisible1Close(){
  this.allfirstHistoryTableTypeRefForm.type='历史数据趋势图'
},
    //打开轴承历史记录
    showBearingHistory(index) {
      this.allfirstTimeValue=[];
      this.allfirstHistoryTableTypeRefForm.type === 'picture'
            this.allfirstBearingPageVisible = true;
            this.allfirstRecordTableVisible = false;
            this.allfirstAlertInfoTableVislble = false;
      this.setBearingHistoryDataDialogVisible1 = true;
      this.bearingnum = (this.bearingList.currentPage - 1) * this.bearingList.pagesize + index;//（页数-1）X每页数据量+序号
        var devicekey=this.tableData1key[this.bearingnum];//获取故障表格中对应devicekey
        var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59";
        var bearingh={
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....');
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rzhistory1);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.bearingahistory1);
    },
bearingahistory1:function(json){
  var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.allfirstAlertNowInfoList = [];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          var status="";
          for (var i = 0; i < count; i++) {
            if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
              status="未读"
            }else{
              status="已读"
            }
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
              status:status
            };
            this.allfirstAlertNowInfoList.push(dustalert);
          }
        } else {
           this.allfirstAlertNowInfoList=[];
        }
},
    rzhistory1:function(json){

     
      this.allfirstNowbearingtableData=[];
      this.bearinghistorytableexecl1=[];
      var rdata = json;
      var etemp = new Array();
            var ztemp = new Array();
            var rs= new Array();
            var vb= new Array();
            var time = new Array();
          if(rdata["code"]=="200"){
            
            var count=Number(rdata["data"]["deviceData"]["length"]);
            for(var i=count-1;i>=0;i--){
               etemp.push(getNumber1( rdata["data"]["deviceData"][i]["envirTemp"],1));
               ztemp.push(getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1));
               rs.push(getNumber1(rdata["data"]["deviceData"][i]["rssi"],1));
               vb.push(getNumber1(rdata["data"]["deviceData"][i]["vbat"],1));
               time.push(rdata["data"]["deviceData"][i]["date"]);
               var allfirst={
date:rdata["data"]["deviceData"][i]["date"],
name:rdata["data"]["deviceData"][i]["deviceName"],
envirTemp: getNumber1(rdata["data"]["deviceData"][i]["envirTemp"],1)+"℃"+"("+this.tableData1[this.bearingnum].devicename1+")",
bearingTemp:getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1)+"℃"+"("+this.tableData1[this.bearingnum].devicename2+")",
signal:getNumber1(rdata["data"]["deviceData"][i]["rssi"],1)+"%",
battery:getNumber1(rdata["data"]["deviceData"][i]["vbat"],1)+"%",
               };
               this.allfirstNowbearingtableData.push(allfirst);
               this.bearinghistorytableexecl1.push(allfirst);
                             }
                 Tu1(etemp, ztemp, time,"temp2","环境","轴承");
                 Tu2(rs, vb, time,"xhao");
               window.onresize= function () {
                 Tu1(etemp, ztemp, time,"temp2","环境","轴承");
                 Tu2(rs, vb, time,"xhao");

              }
     }
   else{
    new Ctor().open("未查询到数据");
     etemp = [];
            ztemp = [];
             rs= [];
             vb= [];
             time = [];

             Tu1(etemp, ztemp, time,"temp2","环境","轴承");
                 Tu2(rs, vb, time,"xhao");
  }
  loading.close();
},
      // 当除尘历史记录选择框内容发生变化时触发
      // dustValue1ChangeEvent() {
      //   var end=new Date(). toLocaleDateString()+" 23:59:59";
      //   var start="";
      //   if(this.dustValue1=="选项1"){
      //       start=new Date().toLocaleDateString()+" 00:00:00";
      //   }
      //  else if(this.dustValue1=="选项2"){
      //         start=N(3)+" 00:00:00";
      //   }
      //   else if(this.dustValue1=="选项3"){
      //         start=N(7)+" 00:00:00";
      //   }
      //   else {
      //         start=N(30)+" 00:00:00";
      //   }
      //   var obj1 = {
      //              deviceKey: this.gdustdevicekey[this.dustnum],
      //              startTime: new Date(start).getTime() / 1000,
      //              endTime: new Date(end).getTime() / 1000,
      //              asc: 0
      //          }
      //     this.openFullScreen2('数据查询中...')
      //    Onpost1("http://api.ahusmart.com/api/v1/historyData", obj1, token, this.rdhistory1);
      // },
      // // 当轴承历史记录选择框内容发生变化时触发
      // bearingValue1ChangeEvent() {
      //   //console.log(this.bearingValue1)
      //   var end=new Date(). toLocaleDateString()+" 23:59:59";
      //   var start="";
      //   if(this.bearingValue1=="选项1"){
      //       start=new Date().toLocaleDateString()+" 00:00:00";
      //   }
      //  else if(this.bearingValue1=="选项2"){
      //         start=N(3)+" 00:00:00";
      //   }
      //   else if(this.bearingValue1=="选项3"){
      //         start=N(7)+" 00:00:00";
      //   }
      //   else {
      //         start=N(30)+" 00:00:00";
      //   }
      //   var obj1 = {
      //              deviceKey: this.gbearingdevicekey[this.bearingnum],
      //              startTime: new Date(start).getTime() / 1000,
      //              endTime: new Date(end).getTime() / 1000,
      //              asc: 0
      //          }
      //     this.openFullScreen2('数据查询中...')
      //    Onpost1("http://api.ahusmart.com/api/v1/historyData", obj1, token, this.rzhistory1);
      // },
      // // 刷新事件
      Dustrefresh(index){
    this.shuadevicenum=(this.dustList.currentPage - 1) * this.dustList.pagesize + index;
    var nickname=this.gdustdevicesimid[this.shuadevicenum];
        obj1 = {
             "nickname":nickname,
             "ordertype": 41,
                     };
    
                      var urld= "http://api.ahusmart.com/api/v1/downRaw?productKey=" + sessionStorage.getItem("dkey") + "&bodyType=json&timeout=15";
     this.openFullScreen2("检测中.....")
     Onpost1(urld, obj1, token, this.shiceg);

    // 
      },

      shiceg:function(json){
        loading.close();
        if(json["status"]=="success"){
          var date=Date.parse(new Date());
          var guzhang = {
                date: timestampToTime(new Date(date)),
                name: this.tableData[this.shuadevicenum].name,
                diffPre: getNumber1(json["yacha"],2) +"Kpa",
                pre: getNumber1(json["qiya"],2)+"Mpa",
                inFreqency: getNumber1(json["freq11"],2)+"Hz",
                outFreqency: getNumber1(json["freq12"],2)+"Hz",
                temp: getNumber1(json["wenkong"],2)+"℃",
                state: "在线"
              }; 
              this.tableData[this.shuadevicenum]= guzhang ;
              this.tableData.push(guzhang)  ;
              delete this.tableData[this.tableData.length-1];
              this.tableData.length=this.tableData.length-1;
          new Ctor().open("检测成功");
        }
        else{
          new Ctor().open("检测失败");
        }
        
      },
//  Singdust:function(json){
//         var  redata2=json;
//          if(json["code"]=="200"){
//             var yacha = getNumber1(redata2["data"]["deviceData"][0]["yacha"], 2) + "Kpa";
//             var qiya = getNumber1(redata2["data"]["deviceData"][0]["qiya"], 2) + "Mpa";
//             var wenkong = getNumber1(redata2["data"]["deviceData"][0]["wenkong"], 2) + "℃";
//             var pinlv11 = getNumber1(redata2["data"]["deviceData"][0]["freq11"], 2) + "Hz";
//             var pinlv12 = getNumber1(redata2["data"]["deviceData"][0]["freq12"], 2) + "Hz";
//             var yachasin = redata2["data"]["deviceData"][0]["yachasin"];
//             var qiyasin = redata2["data"]["deviceData"][0]["qiyasin"];
//             var wenkongsin = redata2["data"]["deviceData"][0]["wenkongsin"];
//             var pinlv11sin = redata2["data"]["deviceData"][0]["pinlvsin11"];
//             var pinlv12sin = redata2["data"]["deviceData"][0]["pinlvsin12"];
//               var guzhang = {
//                 date: timestampToTime(redata2["data"]["deviceData"][0]["time"] * 1000),
//                 name: redata2["data"]["deviceData"][0]["deviceName"],
//                 diffPre: yacha,
//                 pre: qiya,
//                 inFreqency: pinlv11,
//                 outFreqency: pinlv12,
//                 temp: wenkong,
//                 state: this.tableData[this.shuadevicenum].state
//               }; 
//               this.tableData[this.shuadevicenum]= guzhang ;
//               this.tableData.push(guzhang)  ;
//               delete this.tableData[this.tableData.length-1];
//               new Ctor().open("数据更新成功");
// }
// else{
//   new Ctor().open("数据更新失败");
// }
//       },
       // 监听故障表格选择框
      selectBadTable(){
        if(this.badTablevalue == 1){
          this.flag = true
          this.gdflag = true
          this.flag1= false
          this.gzflag = false
          this.roleBtn = false
        } 
        if(this.badTablevalue == 2){
          this.flag1 = true 
          this.gzflag = true
          this.flag = false
          this.gdflag = false
          this.roleBtn = true

        }

      },
       // 除尘产品设备显示表格
       searchDustEquip(e){
        // console.log("a")
        this.dustSingleTableData=[];
        this.dusttype2=[];
        var id=e.currentTarget.id;
        this.searchDustEquipDialogVisible = true
        var data=new Array()
        if(id=="bad"){

          data=this.dustbad;
          this.dustSingleTablekey=this.dustbadkey;
          this.dustSinglesimid=this.dustbadsimid;
          this.dusttype2=this.dusttypebad;
          
        }
        else if(id=="good"){
          data=this.dustgood;
          this.dustSingleTablekey=this.dustgoodkey;
          this.dustSinglesimid=this.dustgoodsimid;
          this.dusttype2=this.dusttypegood;
        }
       else if(id=="offline"){
        data=this.dustun;
        this.dustSingleTablekey=this.dustunkey;
        this.dustSinglesimid=this.dustunsimid;
        this.dusttype2=this.dusttypeoff;
        }
        else{
          data=this.dustall;
          this.dustSingleTablekey=this.dustdevicekey;
          this.dustSinglesimid=this.dustsimid;
          this.dusttype2=this.dusttype;
        }
for(var i=0;i<data.length;i++){
  this.dustSingleTableData.push(data[i]);
}

      },
      // 轴承产品设备显示表格
      searchBearingEquip(e){
        this.searchBearingEquipDialogVisible = true
        this.firstTable=[];
        this.secondTable=[];
        this.bearingtype2=[];
       this.secondTablekey=[];
       this.firstTablekey=[];
        var id=e.currentTarget.id;
        var data=new Array();
        var datatype=new Array();
        if(id=="bearingbad"){
          data=this.bearingbad;
          this.bearingSingleTablekey=this.bearingbadkey;
           datatype=this.bearingbadtype;
           this.bearingtype2=this.bearingtypebad;
        }
        else if(id=="bearinggood"){
          data=this.bearinggood;
          this.bearingSingleTablekey=this.bearinggoodkey;
          datatype=this.bearinggoodtype;
          this.bearingtype2=this.bearingtypegood;
        }
       else if(id=="bearingun"){
        data=this.bearingun;
        this.bearingSingleTablekey=this.bearingunkey;
        this.bearingtype2=this.bearingtypeoff;
        datatype=this.bearinguntype;
        }
        else{
          data=this.bearingall;
          this.bearingSingleTablekey=this.bearingdevicekey;
          this.bearingtype2=this.bearingtype;
          datatype=this.bearingtype;
        }
        for(var i=0;i<data.length;i++){
        this.secondTable.push(data[i]);
    this.secondTablekey.push(this.bearingSingleTablekey[i])
        }
      },
      // 轴承1刷新事件
      bearingRefresh(index){
        this.bearingnum = (this.bearingList.currentPage - 1) * this.bearingList.pagesize + index;
        var devicekey=this.tableData1key[this.bearingnum];
        var devivelist=new Array();
        devivelist.push(devicekey);
        var sdata = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: devivelist
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata, token, this.Singbearing)

      },
      Singbearing:function(json){
        var redata3=json
        if(redata3["code"]=="200"){

          var guzhang1 = {
              date: timestampToTime(redata3["data"]["deviceData"][0]["time"] * 1000),
              proName: redata3["data"]["deviceData"][0]["deviceName"],
              envirTemp: getNumber1(redata3["data"]["deviceData"][0]["envirTemp"], 1) + "℃",
              bearingTemp: getNumber1(redata3["data"]["deviceData"][0]["zhouchenTemp"], 1) + "℃",
              signal: getNumber1(redata3["data"]["deviceData"][0]["rssi"], 1) + "%",
              battery: getNumber1(redata3["data"]["deviceData"][0]["vbat"], 1) + "%",
              state: this.tableData1[this.bearingnum].state,
              devicename1:this.tableData1[this.bearingnum].devicename1,
              devicename2:this.tableData1[this.bearingnum].devicename2,
            }
            if(this.tableData1[this.bearingnum].state!="在线"){
              guzhang1.envirTemp="--";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
            }
            this.tableData1[this.bearingnum]=guzhang1;
            this.tableData1.push("11");
            delete this.tableData1[this.tableData1.length-1];
            this.tableData1.length=this.tableData1.length-1;
            new Ctor().open("刷新成功")
        }
        else{
          new Ctor().open("刷新失败")
        }
      },
      // 双路轴承2刷新事件index
      bearingRefresh1(index){
        this.bearingnum2 = (this.bearingList1.currentPage - 1) * this.bearingList1.pagesize + index;
        var devicekey=this.tableData2key[this.bearingnum2];
        var devivelist=new Array();
        devivelist.push(devicekey);
        var sdata = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: devivelist
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata, token, this.Singbearing2)
      },
      Singbearing2:function(json){
        var redata3=json
        if(redata3["code"]=="200"){
          var guzhang1 = {
              date: timestampToTime(redata3["data"]["deviceData"][0]["time"] * 1000),
              proName: redata3["data"]["deviceData"][0]["deviceName"],
              envirTemp: getNumber1(redata3["data"]["deviceData"][0]["envirTemp"], 1) + "℃",
              bearingTemp: getNumber1(redata3["data"]["deviceData"][0]["zhouchenTemp"], 1) + "℃",
              signal: getNumber1(redata3["data"]["deviceData"][0]["rssi"], 1) + "%",
              battery: getNumber1(redata3["data"]["deviceData"][0]["vbat"], 1) + "%",
              state: this.tableData2[this.bearingnum2].state
            }
            if(this.tableData2[this.bearingnum].state!="在线"){
              guzhang1.envirTemp="--";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
            }
            this.tableData2[this.bearingnum2]=guzhang1;
            this.tableData2.push("11");
            delete this.tableData2[this.tableData2.length-1];
            this.tableData2.length=this.tableData2.length-1;
            new Ctor().open("刷新成功")
        }
        else{
          new Ctor().open("刷新失败")
        }
      },
      // 双路页数事件
      handleSizeChange2(val){
        this.bearingList1.pageSize= val
      },
      handleCurrentChange2(val){
        this.bearingList1.currentPage = val
      },
      // 第二路点击历史记录事件
      showBearingHistory2(index){
        this.allsecondTimeValue=[];
        this.allsecondHistoryTableTypeRefForm.type = 'picture';
            this.allsecondBearingPageVisible = true;
            this.allsecondRecordTableVisible = false;
            this.allsecondAlertInfoTableVislble = false;
      this.setBearingHistoryDataDialogVisible2=true;
      this.bearingnum2 = (this.bearingList1.currentPage - 1) * this.bearingList1.pagesize + index;//（页数-1）X每页数据量+序号
        var devicekey=this.tableData2key[this.bearingnum2];//获取故障表格中对应devicekey
        var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59";
        var bearingh={
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....')
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rallzhistory2);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.bearingahistory2);
  



      },

      bearingahistory2:function(json){
  var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.allsecondAlertNowInfoList = [];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          var status="";
          for (var i = 0; i < count; i++) {
            if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
              status="未读"
            }else{
              status="已读"
            }
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
              status:status
            };
            this.allsecondAlertNowInfoList.push(dustalert);
          }
        } else {
           this.allsecondAlertNowInfoList=[];
        }
},
 

      rallzhistory2:function(json){
// console.log(this.secondTable)
loading.close();
this.allsecondNowbearingtableData=[];
this.bearinghistorytableexecl2=[];
var rdata = json;
var etemp = new Array();
      var ztemp = new Array();
      var rs= new Array();
      var vb= new Array();
      var time = new Array();
    if(rdata["code"]=="200"){
      var count=Number(rdata["data"]["deviceData"]["length"]);
      for(var i=count-1;i>=0;i--){
         etemp.push(getNumber1( rdata["data"]["deviceData"][i]["envirTemp"],1));
         ztemp.push(getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1));
         rs.push(getNumber1(rdata["data"]["deviceData"][i]["rssi"],1));
         vb.push(getNumber1(rdata["data"]["deviceData"][i]["vbat"],1));
         time.push(rdata["data"]["deviceData"][i]["date"]);
         var allfirst={
date:rdata["data"]["deviceData"][i]["date"],
name:rdata["data"]["deviceData"][i]["deviceName"],
envirTemp: getNumber1(rdata["data"]["deviceData"][i]["envirTemp"],1)+"℃"+"("+this.secondTable[this.bearingnum2].devicename1+")",
bearingTemp:getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1)+"℃"+"("+this.secondTable[this.bearingnum2].devicename2+")",
signal:getNumber1(rdata["data"]["deviceData"][i]["rssi"],1)+"%",
battery:getNumber1(rdata["data"]["deviceData"][i]["vbat"],1)+"%"
         };
         this.allsecondNowbearingtableData.push(allfirst);
         this.bearinghistorytableexecl2.push(allfirst);
                       }
           Tu1(etemp, ztemp, time,"allfirsttemp","测点1","测点2");
           Tu2(rs, vb, time,"allfirstxhao");
         window.onresize= function () {
          Tu1(etemp, ztemp, time,"allfirsttemp","测点1","测点2");
           Tu2(rs, vb, time,"allfirstxhao");

        }
}
else{
new Ctor().open("未查询到数据");
etemp = [];
  ztemp = [];
  rs= [];
  vb= [];
   time = [];

       Tu1(etemp, ztemp, time,"allfirsttemp","测点1","测点2");
           Tu2(rs, vb, time,"allfirstxhao");
}
},

      // 第二路参数配置点击事件
      // setBearingcan2(){
      //   this.setBearingDataDialogVisible2=true
      // },

      // 轴承产品里查看后的单双路事件
      // 第一个表格刷新
      firstBearingRefresh(index){
        this.bearingnum=(this.firstPageInfo.currentPage-1)*this.firstPageInfo.pageSize+index;
        var devicekey=this.firstTablekey[this.bearingnum];
        var devivelist=new Array();
        devivelist.push(devicekey);
        var sdata = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: devivelist
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata, token, this.Singfirstbearing)
      },
      Singfirstbearing:function(json){
        var redata3=json
        if(redata3["code"]=="200"){
          var guzhang1 = {
              date: timestampToTime(redata3["data"]["deviceData"][0]["time"] * 1000),
              proName: redata3["data"]["deviceData"][0]["deviceName"],
              envirTemp: getNumber1(redata3["data"]["deviceData"][0]["envirTemp"], 1) + "℃",
              bearingTemp: getNumber1(redata3["data"]["deviceData"][0]["zhouchenTemp"], 1) + "℃",
              signal: getNumber1(redata3["data"]["deviceData"][0]["rssi"], 1) + "%",
              battery: getNumber1(redata3["data"]["deviceData"][0]["vbat"], 1) + "%",
              state: this.firstTable[this.bearingnum].state
            }
            if(this.firstTable[this.bearingnum].state!="在线"){
              guzhang1.envirTemp="--";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
            }
            this.firstTable[this.bearingnum]=guzhang1;
            this.firstTable.push("11");
            delete this.firstTable[this.firstTable.length-1];
            this.firstTable.length=this.firstTable.length-1
            new Ctor().open("刷新成功")
        }
        else{
          new Ctor().open("刷新失败")
        }
      },
      // 第一个表格历史记录事件
      showFirstBearingHistory(index){
        this.firstHistoryTableTypeRefForm.type = 'picture';
            this.firstBearingPageVisible = true ;
            this.firstRecordTableVisible = false;
            this.firstAlertInfoTableVislble = false;
        this.setFirstBearingHistoryDataDialogVisible = true;
this.bearingnum=(this.firstPageInfo.currentPage-1)*this.firstPageInfo.pageSize+index
var devicekey=this.firstTablekey[this.bearingnum];
var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59";
        var bearingh={
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....')
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rfirstzhistory1);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.firstbearingahistory1);
      },
      firstbearingahistory1:function(json){
        var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.firstAlertNowInfoList = [];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          var status="";
          for (var i = 0; i < count; i++) {
            if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
              status="未读"
            }else{
              status="已读"
            }
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
              status:status
            };
            this.firstAlertNowInfoList.push(dustalert);
          }
        } else {
           this.firstAlertNowInfoList=[];
        }
      },
      rfirstzhistory1:function(json){
        loading.close();
      this.firstNowbearingtableData=[];
      this.bearinghistorytableexecl1=[];
      var rdata = json;
      var etemp = new Array();
            var ztemp = new Array();
            var rs= new Array();
            var vb= new Array();
            var time = new Array();
          if(rdata["code"]=="200"){
            var count=Number(rdata["data"]["deviceData"]["length"]);
            for(var i=count-1;i>=0;i--){
               etemp.push(getNumber1( rdata["data"]["deviceData"][i]["envirTemp"],1));
               ztemp.push(getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1));
               rs.push(getNumber1(rdata["data"]["deviceData"][i]["rssi"],1));
               vb.push(getNumber1(rdata["data"]["deviceData"][i]["vbat"],1));
               time.push(rdata["data"]["deviceData"][i]["date"]);
               var allfirst={
date:rdata["data"]["deviceData"][i]["date"],
name:rdata["data"]["deviceData"][i]["deviceName"],
envirTemp: getNumber1(rdata["data"]["deviceData"][i]["envirTemp"],1)+"℃",
bearingTemp:getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1)+"℃",
signal:getNumber1(rdata["data"]["deviceData"][i]["rssi"],1)+"%",
battery:getNumber1(rdata["data"]["deviceData"][i]["vbat"],1)+"%"
               };
               this.firstNowbearingtableData.push(allfirst);
               this.bearinghistorytableexecl1.push(allfirst);
                             }
                 Tu1(etemp, ztemp, time,"firsttemp","环境","轴承");
                 Tu2(rs, vb, time,"firstxhao");
               window.onresize= function () {
                Tu1(etemp, ztemp, time,"firsttemp","环境","轴承");
                 Tu2(rs, vb, time,"firstxhao");

              }
     }
   else{
    new Ctor().open("未查询到数据");
     etemp = [];
            ztemp = [];
             rs= [];
             vb= [];
             time = [];

             Tu1(etemp, ztemp, time,"firsttemp","环境","轴承");
                 Tu2(rs, vb, time,"firstxhao");
  }
      },
      // 第一个表格参数配置事件
      setFirstBearingcan(index){
        // alert("参数配置")
        this.setFirstBearingDataDialogVisible = true
        this.bearingnum=(this.firstPageInfo.currentPage-1)*this.firstPageInfo.pageSize+index;
        this.bearingcankey=this.firstTablekey[this.bearingnum];
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey
        Onget(urls, token, this.firstBmessages);
      },
      firstBmessages:function(json){
        this.moveFirstPara=[];
        this.firstFreqency.upFreqency="";
        this.firstFreqency.colFreqency="";
        this.firstFreqency.upFreqency1="";
        this.firstFreqency.colFreqency1="";
    if(json["code"]=="200"){
      var einfo=new Array();
      var namein=new Array();
      var valuein=new Array();
      this.devmessage=json["data"];
      var json1 = json["data"]["extraInfo"];
            for (var ever in json1) {
                einfo.push(ever);
            }
            for (var i = 0; i < einfo.length; i++) {
                var data1 = einfo[i];
                namein.push(json1[data1]["Name"]);
                valuein.push(json1[data1]["Value"]);
                if(einfo[i]=="uploadRate"){
                 this.firstFreqency.upFreqency1=json1[data1]["Value"]+"分钟"
                }
                if(einfo[i]=="collectRate"){
                 this.firstFreqency.colFreqency1=json1[data1]["Value"]+"分钟"
                }
                else{
                  if(json1[data1]["Name"].indexOf("温度")!=-1&&json1[data1]["Name"].indexOf("测点温度")==-1){
                    var bearingcan={
                     name:json1[data1]["Name"],
                     id:einfo[i],
                     data:'',
                     data1:json1[data1]["Value"]+"℃"
                   };
                    this.moveFirstPara.push(bearingcan);
                  }
                  if(json1[data1]["Name"].indexOf("电量")!=-1){
                    var bearingcan1={
                     name:json1[data1]["Name"],
                     id:einfo[i],
                     data:'',
                     data1:json1[data1]["Value"]+"%"
                   };
                    this.moveFirstPara.push(bearingcan1);
                  }
                }
            }
    }
    else{
      new Ctor().open("获取轴承设备参数失败");
    }
      },
      // 第一个表格分页事件
      handleFirstSizeChange(val){
        this.firstPageInfo.pageSize = val
      },
      handleFirstCurrentChange(val){
        this.firstPageInfo.currentPage = val
      },
      // 第二个表格刷新
      secondBearingRefresh(index){
        this.bearingnum=(this.secondPageInfo.currentPage-1)*this.secondPageInfo.pageSize+index;
        var devicekey=this.secondTablekey[this.bearingnum];
        var devivelist=new Array();
        devivelist.push(devicekey);
        var sdata = {
            productKey: sessionStorage.getItem("zkey"),
            deviceKeyList: devivelist
          };
          Onpost1("http://api.ahusmart.com/api/v1/batchDeviceData", sdata, token, this.Singfirstbearing2)
      },
      // 第二个表格历史记录事件
      showSecondBearingHistory(index){
        this.secondHistoryTableTypeRefForm.type = 'picture';
            this.secondBearingPageVisible = true ;
            this.secondRecordTableVisible = false;
            this.secondAlertInfoTableVislble = false;
        this.setSecondBearingHistoryDataDialogVisible = true;
this.bearingnum2=(this.secondPageInfo.currentPage-1)*this.secondPageInfo.pageSize+index;
var devicekey1=this.secondTablekey[this.bearingnum2];
var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59";
        var bearingh={
                   deviceKey:devicekey1,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....');
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rfirstzhistory2);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey1,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.secondbearingahistory2);
      },
      Singfirstbearing2:function(json){
        var redata3=json
        if(redata3["code"]=="200"){
          var guzhang1 = {
              date: timestampToTime(redata3["data"]["deviceData"][0]["time"] * 1000),
              proName: redata3["data"]["deviceData"][0]["deviceName"],
              envirTemp: getNumber1(redata3["data"]["deviceData"][0]["envirTemp"], 1) + "℃",
              bearingTemp: getNumber1(redata3["data"]["deviceData"][0]["zhouchenTemp"], 1) + "℃",
              signal: getNumber1(redata3["data"]["deviceData"][0]["rssi"], 1) + "%",
              battery: getNumber1(redata3["data"]["deviceData"][0]["vbat"], 1) + "%",
              state: this.secondTable[this.bearingnum].state,
              devicename1:this.secondTable[this.bearingnum].devicename1,
              devicename2:this.secondTable[this.bearingnum].devicename2,
            }
            
            if(this.secondTable[this.bearingnum].state!="在线"){
              guzhang1.envirTemp="--";
              guzhang1.envirTemp="--";
              guzhang1.bearingTemp="--";
              guzhang1.signal="--";
              guzhang1.battery="--";
            }
            this.secondTable[this.bearingnum]=guzhang1;
            this.secondTable.push("11");
            delete this.secondTable[this.secondTable.length-1];
            this.secondTable.length=this.secondTable.length-1;
            new Ctor().open("刷新成功")
        }
        else{
          new Ctor().open("刷新失败")
        }
      },
  secondbearingahistory2:function(json){
    var ardata1 = json;
        if (ardata1["code"] == "200") {
          this.secondAlertNowInfoList = [];
          var count = Number(ardata1["data"]["alertInfo"]["length"]);
          var status="";
          for (var i = 0; i < count; i++) {
            if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
              status="未读"
            }else{
              status="已读"
            }
            var dustalert = {
              id: i,
              time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
              alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
              status:status
            };
            this.secondAlertNowInfoList.push(dustalert);
          }
        } else {
           this.secondAlertNowInfoList=[];
        }
  },
     
      rfirstzhistory2:function(json){
        loading.close();
      this.secondNowbearingtableData=[];
      this.bearinghistorytableexecl2=[];
      var rdata = json;
      var etemp = new Array();
            var ztemp = new Array();
            var rs= new Array();
            var vb= new Array();
            var time = new Array();
          if(rdata["code"]=="200"){
            
            var count=Number(rdata["data"]["deviceData"]["length"]);
            for(var i=count-1;i>=0;i--){
               etemp.push(getNumber1( rdata["data"]["deviceData"][i]["envirTemp"],1));
               ztemp.push(getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1));
               rs.push(getNumber1(rdata["data"]["deviceData"][i]["rssi"],1));
               vb.push(getNumber1(rdata["data"]["deviceData"][i]["vbat"],1));
               time.push(rdata["data"]["deviceData"][i]["date"]);
               var allfirst={
date:rdata["data"]["deviceData"][i]["date"],
name:rdata["data"]["deviceData"][i]["deviceName"],
envirTemp: getNumber1(rdata["data"]["deviceData"][i]["envirTemp"],1)+"℃"+"("+this.secondTable[this.bearingnum2].devicename1+")",
bearingTemp:getNumber1(rdata["data"]["deviceData"][i]["zhouchenTemp"],1)+"℃"+"("+this.secondTable[this.bearingnum2].devicename2+")",
signal:getNumber1(rdata["data"]["deviceData"][i]["rssi"],1)+"%",
battery:getNumber1(rdata["data"]["deviceData"][i]["vbat"],1)+"%"
               };
               this.secondNowbearingtableData.push(allfirst);
               this.bearinghistorytableexecl2.push(allfirst);
                             }
                 Tu1(etemp, ztemp, time,"secondtemp",this.secondTable[this.bearingnum2].devicename1,this.secondTable[this.bearingnum2].devicename2);
                 Tu2(rs, vb, time,"secondxhao");
               window.onresize= function () {
                Tu1(etemp, ztemp, time,"secondtemp",this.secondTable[this.bearingnum2].devicename1,this.secondTable[this.bearingnum2].devicename2);
                 Tu2(rs, vb, time,"secondxhao");

              }
     }
   else{
    new Ctor().open("未查询到数据");
     etemp = [];
            ztemp = [];
             rs= [];
             vb= [];
             time = [];
             Tu1(etemp, ztemp, time,"secondtemp","测点1","测点1");
                 Tu2(rs, vb, time,"secondxhao");
  }
      },
 
      // 第二个表格参数配置事件
      setSecondBearingcan(index){
        // alert("参数配置")
        this.setSecondBearingDataDialogVisible = true;
        this.bearingnum=(this.secondPageInfo.currentPage-1)*this.secondPageInfo.pageSize+index;
        this.bearingcankey=this.secondTablekey[this.bearingnum];
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey
        Onget(urls, token, this.firstBmessages);

      },
      // 第二个表格分页事件
      handleSecondSizeChange(val){
        this.secondPageInfo.pageSize = val
        console.log(val);
      },
      handleSecondCurrentChange(val){
        this.secondPageInfo.currentPage = val
        console.log(val);
      },
      // 第一个表格参数配置对话框内的事件
        // 修改
        setFirstBearingFreq(){
          var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
          var collect = this.firstFreqency.colFreqency;
               var upload = this.firstFreqency.upFreqency;
               if (isNaN(+collect) || isNaN(+upload)) {
                       alert('输入参数错误');
                   }
                   else {
                       if (collect== "") {
                           collect =this.devmessage["extraInfo"]["collectRate"]["Value"];
                       }
                       if (upload == "") {
                           upload = this.devmessage["extraInfo"]["uploadRate"]["Value"]
                       }
                       var urlp = "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" + this.bearingtype2[this.bearingnum] + "&bodyType=json&timeout=10";
                       var objp = {
                           "sim": this.devmessage["nickname"],
                           "collectRate": collect,
                           "uploadRate": upload,
                           "type": "rate"
                       };
           this.openFullScreen2('参数配置中.....')
                       Onpost1(urlp, objp, token, this.firstreRate1);
                   }
                  }
                  else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
        },
        firstreRate1:function(json){
          loading.close();
             var collect1 = this.firstFreqency.colFreqency;
               var upload1 = this.firstFreqency.upFreqency;
               var objm = {
                   "productKey": this.devmessage["productKey"],
                   "deviceKey": this.devmessage["deviceKey"],
                   "deviceName": this.devmessage["deviceName"],
                   "nickname": this.devmessage["nickname"],
                   "netType": this.devmessage["netType"],
                   "deviceType": this.devmessage["deviceType"],
                   "extraInfo": this.devmessage["extraInfo"]
               }
               if (json["status"] == "success") {
                   if (collect1 == "") {
                       collect1 = this.devmessage["extraInfo"]["collectRate"]["Value"];
                   }
                   if (upload1 == "") {
                       upload1 = this.devmessage["extraInfo"]["uploadRate"]["Value"]
                   }
                   objm["extraInfo"]["collectRate"]["Value"] = collect1;
                   objm["extraInfo"]["uploadRate"]["Value"] = upload1;
                   Onput1("http://api.ahusmart.com/api/v1/device", objm, token, this.firstDeviceUpdate2);
                  new Ctor().open ("设置成功！");

               }
               else if (json["status"] == "fail") {
                new Ctor().open("设置失败");
               }
               else{
                new Ctor().open("设置失败");
               }
        },

        firstDeviceUpdate2:function(json){
          if(json["code"]=="200"){
  console.log("数据库修改轴承频率成功");
   this.firstFreqency.colFreqency='';
     this.firstFreqency.upFreqency='';
  var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("zkey") + "&deviceKey=" + this.bearingcankey;
        Onget(urls, token, this.firstBmessages);
 }
        },
        setFirstBearingLimit(){
          var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
          var obj2 = {
                   "sim": this.devmessage["nickname"],
                   "type": "warn",
               };
   for(var i=0;i<this.moveFirstPara.length;i++){
     if (isNaN(+this.moveFirstPara[i].data)){
       new Ctor().open("输入参数错误")
       return;
     }
   if(this.moveFirstPara[i].id=="vbat"){
     var vbat=this.moveFirstPara[i].data;
    if (vbat != "") {
                   var key1 = "vbat";
                   var value1 = vbat;
                   obj2[key1] = value1;
               }
   }
   if(this.moveFirstPara[i].id=="warn1"){
     var warn1=this.moveFirstPara[i].data;
    if (warn1 != "") {
                   var key1 = "warn1";
                   var value1 = warn1;
                   obj2[key1] = value1;
               }
   }
   if(this.moveFirstPara[i].id=="warn2"){
     var warn2=this.moveFirstPara[i].data;
    if (warn2 != "") {
                   var key1 = "warn2";
                   var value1 = warn2;
                   obj2[key1] = value1;
               }
   }
   if(this.moveFirstPara[i].id=="warn3"){
     var warn3=this.moveFirstPara[i].data;
    if (warn3 != "") {
                   var key1 = "warn3";
                   var value1 = warn3;
                   obj2[key1] = value1;
               };
      }
      if(this.moveFirstPara[i].id=="warn4"){
     var warn4=this.moveFirstPara[i].data;
    if (warn4 != "") {
                   var key1 = "warn4";
                   var value1 = warn4;
                   obj2[key1] = value1;
               };
      }
   }
   var urlp = "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" + this.bearingtype2[this.bearingnum] + "&bodyType=json&timeout=10";
this.openFullScreen2('参数配置中.....')
     Onpost1(urlp, obj2,token, this.firstrelimit1);
    }
    else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
        },
        firstrelimit1:function(json){
          loading.close();
      if (json["status"] == "success") {
        var objm = {
          "productKey": this.devmessage["productKey"],
           "deviceKey": this.devmessage["deviceKey"],
           "deviceName": this.devmessage["deviceName"],
           "nickname": this.devmessage["nickname"],
           "netType": this.devmessage["netType"],
           "deviceType":this.devmessage["deviceType"],
          "extraInfo":this.devmessage["extraInfo"]
                   };

     for(var i=0;i<this.moveFirstPara.length;i++){
   if(this.moveFirstPara[i].id=="vbat"){
     var vbat=this.moveFirstPara[i].data;
    if (vbat != "") {
      objm["extraInfo"]["vbat"]["Value"] =vbat;
               }
   }
   if(this.moveFirstPara[i].id=="warn1"){
     var warn1=this.moveFirstPara[i].data;
    if (warn1 != "") {
      objm["extraInfo"]["warn1"]["Value"] = warn1;
               }
   }
   if(this.moveFirstPara[i].id=="warn2"){
     var warn2=this.moveFirstPara[i].data;
    if (warn2 != "") {
      objm["extraInfo"]["warn2"]["Value"] = warn2;
               }
   }
   if(this.moveFirstPara[i].id=="warn3"){
     var warn3=this.moveFirstPara[i].data;
    if (warn3 != "") {
      objm["extraInfo"]["warn3"]["Value"] = warn3
               };
      }
      if(this.moveFirstPara[i].id=="warn4"){
     var warn4=this.moveFirstPara[i].data;
    if (warn4 != "") {
      objm["extraInfo"]["warn4"]["Value"] = warn4
               };
      }
   }
   Onput1("http://api.ahusmart.com/api/v1/device", objm, token, this.firstDeviceUpdate2);
         new Ctor().open("设置成功！");
                   }
     else {
                new Ctor().open("设置失败！");
         }
        },
        // 第2个表格参数配置对话框内的事件
        // 修改
        setSecondBearingFreq(){
          alert("修改")
        },
        setSecondBearingLimit(){
          alert("修改")
        },
        // 双路选择图标监听事件
        firstSelectedHistoryTableType(){
          if (this.firstHistoryTableTypeRefForm.type === 'picture') {
            this.firstBearingPageVisible = true 
            this.firstRecordTableVisible = false
            this.firstAlertInfoTableVislble = false
          }
          if (this.firstHistoryTableTypeRefForm.type === 'recordTable') {
            this.firstBearingPageVisible = false 
            this.firstRecordTableVisible = true
            this.firstAlertInfoTableVislble = false
          }
          if (this.firstHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.firstBearingPageVisible = false 
            this.firstRecordTableVisible = false
            this.firstAlertInfoTableVislble = true
          }
        },
        secondSelectedHistoryTableType(){
          if (this.secondHistoryTableTypeRefForm.type === 'picture') {
            this.secondBearingPageVisible = true 
            this.secondRecordTableVisible = false
            this.secondAlertInfoTableVislble = false
          }
          if (this.secondHistoryTableTypeRefForm.type === 'recordTable') {
            this.secondBearingPageVisible = false 
            this.secondRecordTableVisible = true
            this.secondAlertInfoTableVislble = false
          }
          if (this.secondHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.secondBearingPageVisible = false 
            this.secondRecordTableVisible = false
            this.secondAlertInfoTableVislble = true
          }
        },
        // 双路当前设备选择时间监听事件
        firstSelectedTime(){
          this.firstHistoryTableTypeRefForm.type = 'picture';
            this.firstBearingPageVisible = true ;
            this.firstRecordTableVisible = false;
            this.firstAlertInfoTableVislble = false;
          var start=this.firstTimeValue[0]+" 00:00:00";
          var end=this.firstTimeValue[0]+" 23:59:59";
          
       var devicekey=this.firstTablekey[this.bearingnum];
        var bearingh={
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....')
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rfirstzhistory1);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.firstbearingahistory1);

          
        },
        secondSelectedTime(){
          this.secondHistoryTableTypeRefForm.type = 'picture';
            this.secondBearingPageVisible = true ;
            this.secondRecordTableVisible = false;
            this.secondAlertInfoTableVislble = false;
            var start=this.secondTimeValue[0]+" 00:00:00";
          var end=this.secondTimeValue[0]+" 23:59:59";
          var devicekey1=this.secondTablekey[this.bearingnum2];
        var bearingh={
                   deviceKey:devicekey1,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....');
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rfirstzhistory2);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": devicekey1,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.secondbearingahistory2);
      
        },
        // 双路当前设备表格分页事件
      handleFirstNowSizeChange(val){
        this.firstPageInfo.pageSize = val
      },
      handleFirstNowCurrentChange(val){
        this.firstPageInfo.currentPage = val
      },
      handleSecondNowSizeChange(val){
        this.secondNowPageInfo.pageSize = val
      },
      handleSecondNowCurrentChange(val){
        this.secondNowPageInfo.currentPage = val
      },
      // 2个表格当前设备报警信息分页事件
      firstBearingHandleAlertCurrentChange(val){
        this.firstBearingalertPage.currentPage = val
      },
      secondBearingHandleAlertCurrentChange(val){
        this.secondBearingalertPage.currentPage = val
      },

      // 除尘卡片单一故障事件
      // 刷新
      singleDustRefresh(index){
        this.singdustnum=(this.dustSingleList.currentPage-1)*this.dustSingleList.pagesize+index;
        
        var nickname=this.dustSinglesimid[this.singdustnum]
        obj1 = {
             "nickname":nickname,
             "ordertype": 41,
                     };
    
                      var urld= "http://api.ahusmart.com/api/v1/downRaw?productKey=" + sessionStorage.getItem("dkey") + "&bodyType=json&timeout=15";
     this.openFullScreen2("检测中.....")
     Onpost1(urld, obj1, token, this.shice1);
    
       },
shice1:function(json){
  loading.close();
if(json["status"]=="success"){
  var date=Date.parse(new Date());
  var guzhang = {
                date: timestampToTime(date),
                name: this.dustSingleTableData[this.singdustnum].name,
                diffPre: getNumber1(json["yacha"],2)+"Kpa" ,
                pre:  getNumber1(json["qiya"],2)+"Mpa",
                inFreqency:  getNumber1(json["freq11"],2)+"Hz",
                outFreqency:  getNumber1(json["freq12"],2)+"Hz",
                temp:  getNumber1(json["wenkong"],2)+"℃",
                state: "在线"
              }; 
              this.dustSingleTableData[this.singdustnum]= guzhang ;
              this.dustSingleTableData.push(guzhang);
              delete this.dustSingleTableData[this.dustSingleTableData.length-1];
              this.dustSingleTableData.length= this.dustSingleTableData.length-1;
          new Ctor().open("检测成功");
}else{
  new Ctor().open("检测失败");
}
},


      // 历史记录对话框显示
      showSingleDustHistory(index){

        this.singleTimeValue=[];
        this.singleHistoryTableTypeRefForm.type="picture";
        this.setSingleDustHistoryDataDialogVisible = true;
       this.singleDustPageVisible=true;
       this.singleDustrecordTableVisible = false;
        this.singleAlertInfoTableVislble = false;
       this.truedustSingleList.pagesize=10
        this.singdustnum=(this.dustSingleList.currentPage-1)*this.dustSingleList.pagesize+index;
        var devicekey=this.dustSingleTablekey[(this.dustSingleList.currentPage-1)*this.dustSingleList.pagesize+index];
        var start=new Date().toLocaleDateString()+" 00:00:00";
        var end=new Date().toLocaleDateString()+" 23:59:59"
        var obj1 = {
                   deviceKey:devicekey,
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
               }
          this.openFullScreen2('数据查询中...')
         Onpost1("http://api.ahusmart.com/api/v1/historyData", obj1, token, this.rdhistory2);
         var start=new Date().toLocaleDateString()+" 00:00:00";
                          var end=new Date().toLocaleDateString()+" 23:59:59"
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("dkey"),
                                      "deviceKey": devicekey,
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                 // this.openFullScreen2('数据查询中...')
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.ahistory2);

      },

      ahistory2:function(json){
        loading.close();
var ardata1 = json;
      if (ardata1["code"] == "200") {
        this.singleAlertNowInfoList = [];
        var count = Number(ardata1["data"]["alertInfo"]["length"]);
        var status="";
        for (var i = 0; i < count; i++) {
          if(ardata1["data"]["alertInfo"][i]["unRead"]=="true"){
            status="未读"
          }else{
            status="已读"
          }
          var dustalert = {
            id: i,
            time: timestampToTime(ardata1["data"]["alertInfo"][i]["time"] * 1000),
            alertInfo: ardata1["data"]["alertInfo"][i]["Content"],
            status:status
          };
          this.singleAlertNowInfoList.push(dustalert);
        }
      } else {
         this.singleAlertNowInfoList=[];
      }
     // 
    },

rdhistory2:function(json){
      this.trueDustTableData=[];
      this.dusthistorytableexcel=[];
      var wendu = new Array();
                     var qiya = new Array();
                     var yacha= new Array();
                     var pinlv1= new Array();
                     var pinlv2 = new Array();
                     var time = new Array();
  if(json["code"]=="200"){
    
                     var count=Number(json["data"]["deviceData"]["length"]);
                             for(var i=count-1;i>=0;i--){
                                 qiya.push( getNumber1(json["data"]["deviceData"][i]["qiya"],2));
                                 yacha.push( getNumber1(json["data"]["deviceData"][i]["yacha"],2));
                                 pinlv1.push(getNumber1(json["data"]["deviceData"][i]["freq11"],2));
                                 pinlv2.push(getNumber1(json["data"]["deviceData"][i]["freq12"],2));
                                 wendu.push(getNumber1(json["data"]["deviceData"][i]["wenkong"],2));
                                 time.push(json["data"]["deviceData"][i]["date"]);
                                 var data={
                                  date: json["data"]["deviceData"][i]["date"],
                         name:json["data"]["deviceData"][i]["deviceName"],
                          diffPre:getNumber1(json["data"]["deviceData"][i]["yacha"],2)+"Kpa",
                    pre: getNumber1(json["data"]["deviceData"][i]["qiya"],2)+"Mpa",
                 inFreqency: getNumber1(json["data"]["deviceData"][i]["freq11"],2)+"Hz",
                 outFreqency:getNumber1(json["data"]["deviceData"][i]["freq12"],2)+"hz",
                 temp: getNumber1(json["data"]["deviceData"][i]["wenkong"],2)+"℃"
              
                                 }
                               this.trueDustTableData.push(data);
                               this.dusthistorytableexcel.push(data)
                             }
                             Tu3(qiya,yacha,time,"singyali");
                             Tu4(wendu,time,"singtemp1");
                             Tu5(pinlv1,pinlv2,time,"singfreq1");
                             window.onresize= function () {
                              Tu3(qiya,yacha,time,"singyali");
                             Tu4(wendu,time,"singtemp1");
                             Tu5(pinlv1,pinlv2,time,"singfreq1");
              }
  }
  else{
    new Ctor().open("未获取到除尘历史数据");
    qiya=[];yacha=[];time=[];wendu=[];pinlv1=[];pinlv2=[];
    Tu3(qiya,yacha,time,"singyali");
    Tu4(wendu,time,"singtemp1");
    Tu5(pinlv1,pinlv2,time,"singfreq1");
  }
  loading.close();
},

      // 参数配置对话框显示
      setSingleDustCan(index){
 this.singleUploadTime.day1='';
  this.singleUploadTime.hour1='';
  this.singleUploadTime.minutes1='';
  this.singleDustPress.up1='';
  this.singleDustPress.down1='';
  this.singleAirPressure.up1='';
  this.singleAirPressure.down1='';
  this.singleinFreqency.up1='';
  this.singleinFreqency.down1='';
  this.singleoutFreqency.up1='';
  this.singleoutFreqency.down1='';
  this.singletemp.up1='';
  this.singletemp.down1='';
  this.singleDustDataDialogVisible = true;
        this.singdustnum=(this.dustSingleList.currentPage-1)*this.dustSingleList.pagesize+index;
        var devicekey=this.dustSingleTablekey[(this.dustSingleList.currentPage-1)*this.dustSingleList.pagesize+index];
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + devicekey;
        Onget(urls, token, this.singleDmessages);
      },

      singleDmessages:function(json){
        this.singleUploadTime.day='';
  this.singleUploadTime.hour='';
  this.singleUploadTime.minutes='';
  this.singleDustPress.up='';
  this.singleDustPress.down='';
  this.singleAirPressure.up='';
  this.singleAirPressure.down='';
  this.singleinFreqency.up='';
  this.singleinFreqency.down='';
  this.singleoutFreqency.up='';
  this.singleoutFreqency.down='';
  this.singletemp.up='';
  this.singletemp.down='';
if(json["code"]=="200"){
  var gata = json["data"]["extraInfo"];
  this.dusttitle= "PLC编号:"+gata["plcNumber"]["Value"]+" / "+"除尘器号:"+ gata["chuchenhao"]["Value"]
  this.dustcanmessage=json["data"];
  this.singleUploadTime.day1=gata["nDay"]["Value"]+"天";
  this.singleUploadTime.hour1=gata["nHour"]["Value"]+"小时";
  this.singleUploadTime.minutes1=gata["nMinute"]["Value"]+"分钟";
  this.singleDustPress.up1=gata["nUpPa"]["Value"]+"pa";
  this.singleDustPress.down1=gata["nDownPa"]["Value"]+"pa";
  this.singleAirPressure.up1=gata["nUppressure"]["Value"]+"pa";
  this.singleAirPressure.down1=gata["nDownpressure"]["Value"]+"pa";
  this.singleinFreqency.up1=gata["nUpHz11"]["Value"]+"Hz";
  this.singleinFreqency.down1=gata["nDownHz12"]["Value"]+"Hz";
  this.singleoutFreqency.up1=gata["nUpHz21"]["Value"]+"Hz";
  this.singleoutFreqency.down1=gata["nDownHz22"]["Value"]+"Hz";
  this.singletemp.up1=gata["nUpTemp"]["Value"]+"℃";
  this.singletemp.down1=gata["nDownTemp"]["Value"]+"℃";
}else{
  new Ctor.open("获取参数信息失败");
}
 },
 setSingleDustTime(){
          var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
        this.demess=[];
   var day=this.dustcanmessage["extraInfo"]["nDay"]["Value"];
   var hours=this.dustcanmessage["extraInfo"]["nHour"]["Value"];
   var min=this.dustcanmessage["extraInfo"]["nMinute"]["Value"];
   if(this.singleUploadTime.day!=""){
day=this.singleUploadTime.day;
}
if(this.singleUploadTime.hour!=""){
hours=this.singleUploadTime.hour;
}
if(this.singleUploadTime.minutes!=""){
min=this.singleUploadTime.minutes;
}

   if (isNaN(+day) || isNaN(+hours) || isNaN(+min) || Number(hours) >= 24 || Number(min) >= 60) {
        // alert("输入参数错误！");
         new Ctor().open("输入参数错误！")
         }
else{
  for(var i=0;i<this.dustsimid.length;i++){
       if(this.dustcanmessage["nickname"].split(":")[0]==this.dustsimid[i].split(":")[0]){
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + this.dustdevicekey[i];
        Onget(urls, token, this.singleDmessages1);
       }
     }
  var obj1 = {
             "nickname":this.dustcanmessage["nickname"],
             "ordertype": 43,
             "oDay":Number( this.dustcanmessage["extraInfo"]["nDay"]["Value"]),
             "oHour":Number( this.dustcanmessage["extraInfo"]["nHour"]["Value"]),
             "oMinute":Number( this.dustcanmessage["extraInfo"]["nMinute"]["Value"]),
             "nDay": Number(day),
             "nHour":Number(hours),
             "nMinute":Number(min)
                     };
                     if(obj1["nDay"]=="0"&&obj1["nHour"]==0&&obj1["nMinute"]==0){
                     // alert("输入参数错误！");
                      new Ctor().open("输入参数错误！");
                     }else{
                      var urld= "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" +this.dusttype2[this.singdustnum] + "&bodyType=json&timeout=15";
     this.openFullScreen2("配置中.....")
     Onpost1(urld, obj1, token, this.singlereTime);
                     }
    
      }
    }
    else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
      
    }
    },
      singlesetdustlimit(){
        var yanz = prompt("请输入管理员密码：")
          if(yanz=="admin"){
        var ya1=  this.dustcanmessage["extraInfo"]["nUpPa"]["Value"] ;
       var ya2=  this.dustcanmessage["extraInfo"]["nDownPa"]["Value"] ;
        var qy1= this.dustcanmessage["extraInfo"]["nUppressure"]["Value"] ;
        var qy2= this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]  ;
         var fr11= this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]  ;
          var fr12= this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"] ;
         var fr21= this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"] ;
          var fr22= this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"] ;
           var w1= this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"] ;
           var w2= this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"] ;
                  if (this.singleDustPress.up!="") {
                      ya1=this.singleDustPress.up;//修改前压差上极限
                  }
                  if(this.singleDustPress.down!=""){
                      ya2=this.singleDustPress.down;
                      }
                  if( this.singleAirPressure.up!=""){
                      qy1=this.singleAirPressure.up;
                  }
                  if(this.singleAirPressure.down!=""){
                      qy2=this.singleAirPressure.down;
                  }
                  if(this.singleinFreqency.up!=""){
                      fr11=this.singleinFreqency.up;
                  }
                  if(this.singleinFreqency.down!=""){
                      fr12=this.singleinFreqency.down;
                  }
                  if(this.singleoutFreqency.up!=""){
                      fr21=this.singleoutFreqency.up;
                  }  
                  if(this.singleoutFreqency.down!=""){
                      fr22=this.singleoutFreqency.down;
                  }
                  if(this.singletemp.up!=""){
                      w1=this.singletemp.up;
                  }
                  if(this.singletemp.down!=""){
                      w2=this.singletemp.down;
                  } 
                   else{ }

            if(isNaN(+ya1)||isNaN(+ya2)||isNaN(+qy1)||isNaN(+qy2)||isNaN(+fr11)||isNaN(+fr12)||isNaN(+fr21)||isNaN(+fr22)||isNaN(+w1)||isNaN(+w2))
                   {
                       alert("输入参数错误！");
                   }

                   else {
                   var obj3 = {
                           "nickname": this.dustcanmessage["nickname"],
                           "ordertype": 45,
                           "oUpPa": parseFloat(this.dustcanmessage["extraInfo"]["nUpPa"]["Value"]).toFixed(2),//修改前压差上极限
                           "oDownPa": parseFloat(this.dustcanmessage["extraInfo"]["nDownPa"]["Value"]).toFixed(2),//修改前压差下极限
                           "oUppressure": parseFloat(this.dustcanmessage["extraInfo"]["nUppressure"]["Value"]).toFixed(2),//修改前气压上极限
                           "oDownpressure": parseFloat(this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]).toFixed(2),//修改前气压下极限
                           "oUpHz11": parseFloat(this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]).toFixed(2),//修改前频率11上极限
                           "oDownHz12": parseFloat(this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"]).toFixed(2),//修改前频率12下极限
                           "oUpHz21": parseFloat(this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"]).toFixed(2),//修改前频率21上极限
                           "oDownHz22": parseFloat(this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"]).toFixed(2),//修改前频率21下极限
                           "oUpTemp": parseFloat(this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"]).toFixed(2),//修改前温度上极限
                           "oDownTemp": parseFloat(this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"]).toFixed(2),//修改前温度下极限
                           "nUpPa": parseFloat(ya1).toFixed(2),//修改后压差上极限
                           "nDownPa": parseFloat(ya2).toFixed(2),//修改后压差下极限
                           "nUppressure": parseFloat(qy1).toFixed(2),//修改后气压上极限
                           "nDownpressure": parseFloat(qy2).toFixed(2),//修改后气压下极限
                           "nUpHz11": parseFloat(fr11).toFixed(2),//修改后频率11上极限
                           "nDownHz12": parseFloat(fr12).toFixed(2),//修改后频率12下极限
                           "nUpHz21": parseFloat(fr21).toFixed(2),//修改后频率21上极限
                           "nDownHz22": parseFloat(fr22).toFixed(2),//修改后频率21下极限
                           "nUpTemp": parseFloat(w1).toFixed(2),//修改后温度上极限
                           "nDownTemp": parseFloat(w2).toFixed(2)//修改
                       };
           var urld= "http://api.ahusmart.com/api/v1/newDownRaw?deviceType=" +this.dusttype2[this.singdustnum] + "&bodyType=json&timeout=15";
           this.openFullScreen2('配置中......')
             Onpost1(urld, obj3, token, this.singlereYu);
                      }
                    }
     else if(yanz ===""||yanz){
      alert("密码错误！");
    }
    else{
    }
      },
      singlereYu:function(json){
  loading.close();
    if(json["status"]=="sucess"){
    var objo1 = {
            "productKey": sessionStorage.getItem("dkey"),
             "deviceKey": this.dustcanmessage["deviceKey"],
             "deviceName":this.dustcanmessage["deviceName"],
            "nickname": this.dustcanmessage["nickname"],
             "netType": this.dustcanmessage["netType"],
             "deviceType": this.dustcanmessage["deviceType"],
             "extraInfo": this.dustcanmessage["extraInfo"]
                       }
                 var ya1=  this.dustcanmessage["extraInfo"]["nUpPa"]["Value"] ;
                 var ya2=  this.dustcanmessage["extraInfo"]["nDownPa"]["Value"] ;
                  var qy1= this.dustcanmessage["extraInfo"]["nUppressure"]["Value"] ;
                  var qy2= this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]  ;
                  var fr11= this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]  ;
                  var fr12= this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"] ;
                  var fr21= this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"] ;
                  var fr22= this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"] ;
                  var w1= this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"] ;
                  var w2= this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"] ;

                  if (this.singleDustPress.up!="") {
                      ya1=this.singleDustPress.up;//修改前压差上极限
                  }
                  if(this.singleDustPress.down!=""){
                      ya2=this.singleDustPress.down;
                      }
                  if( this.singleAirPressure.up!=""){
                      qy1=this.singleAirPressure.up;
                  }
                  if(this.singleAirPressure.down!=""){
                      qy2=this.singleAirPressure.down;
                  }
                  if(this.singleinFreqency.up!=""){
                      fr11=this.singleinFreqency.up;
                  }
                  if(this.singleinFreqency.down!=""){
                      fr12=this.singleinFreqency.down;
                  }
                  if(this.singleoutFreqency.up!=""){
                      fr21=this.singleoutFreqency.up;
                  }  
                  if(this.singleoutFreqency.down!=""){
                      fr22=this.singleoutFreqency.down;
                  }
                  if(this.singletemp.up!=""){
                      w1=this.singletemp.up;
                  }
                  if(this.singletemp.down!=""){
                      w2=this.singletemp.down;
                  } 
                       objo1["extraInfo"]["nUpPa"]["Value"]=getNumber2(ya1);
                       objo1["extraInfo"]["nDownPa"]["Value"]=getNumber2(ya2);
                       objo1["extraInfo"]["nUppressure"]["Value"]=getNumber2( qy1);
                       objo1["extraInfo"]["nDownpressure"]["Value"]=getNumber2( qy2);
                       objo1["extraInfo"]["nUpHz11"]["Value"]=getNumber2(fr11);
                       objo1["extraInfo"]["nDownHz12"]["Value"]=getNumber2(fr12);
                       objo1["extraInfo"]["nUpHz21"]["Value"]=getNumber2(fr21);
                       objo1["extraInfo"]["nDownHz22"]["Value"]=getNumber2(fr22);
                       objo1["extraInfo"]["nUpTemp"]["Value"]=getNumber2(w1);
                       objo1["extraInfo"]["nDownTemp"]["Value"] = getNumber2(w2);
                       Onput1("http://api.ahusmart.com/api/v1/device", objo1, token, this.singleDeviceUpdate1);
                      new Ctor().open("设置成功");
                      }
                      else{
                        new Ctor().open("设置失败")
                      }
                      },
 
      singleDmessages1:function(json){
if(json["code"]=="200"){
  this.demess.push(json);
}
},
 singlereTime:function(json){
   loading.close();
var t=json;
if (json["status"] == "success") {
                       var day =this.singleUploadTime.day ;
                       var hours =this.singleUploadTime.hour ;
                       var min = this.singleUploadTime.minutes;
                       if (day == "") { day = this.dustcanmessage["extraInfo"]["nDay"]["Value"]; }
                       if (hours == "") { hours= this.dustcanmessage["extraInfo"]["nHour"]["Value"]; }
                       if (min == "") { min = this.dustcanmessage["extraInfo"]["nMinute"]["Value"]; }
                       for (var m = 0; m < this.demess.length; m++) {
                               var objo =
                               {
                                   "productKey": this.demess[m]["data"]["productKey"],
                                   "deviceKey": this.demess[m]["data"]["deviceKey"],
                                   "deviceName": this.demess[m]["data"]["deviceName"],
                                   "nickname": this.demess[m]["data"]["nickname"],
                                   "netType": this.demess[m]["data"]["netType"],
                                   "deviceType": this.demess[m]["data"]["deviceType"],
                                   "extraInfo": this.demess[m]["data"]["extraInfo"]
                               };
                                   objo["extraInfo"]["nDay"]["Value"] = Number(day);
                                   objo["extraInfo"]["nHour"]["Value"] = Number(hours);
                                   objo["extraInfo"]["nMinute"]["Value"] = Number(min);
                               Onput1("http://api.ahusmart.com/api/v1/device", objo, token, this.singleDeviceUpdate);
                               new Ctor().open("设置成功");
                       }
}
else{
  new Ctor().open("设置失败");
}
 },

  singlereYu:function(json){
  loading.close();
    if(json["status"]=="success"){
    var objo1 = {
            "productKey": sessionStorage.getItem("dkey"),
             "deviceKey": this.dustcanmessage["deviceKey"],
             "deviceName":this.dustcanmessage["deviceName"],
            "nickname": this.dustcanmessage["nickname"],
             "netType": this.dustcanmessage["netType"],
             "deviceType": this.dustcanmessage["deviceType"],
             "extraInfo": this.dustcanmessage["extraInfo"]
                       }
                 var ya1=  this.dustcanmessage["extraInfo"]["nUpPa"]["Value"] ;
                 var ya2=  this.dustcanmessage["extraInfo"]["nDownPa"]["Value"] ;
                  var qy1= this.dustcanmessage["extraInfo"]["nUppressure"]["Value"] ;
                  var qy2= this.dustcanmessage["extraInfo"]["nDownpressure"]["Value"]  ;
                  var fr11= this.dustcanmessage["extraInfo"]["nUpHz11"]["Value"]  ;
                  var fr12= this.dustcanmessage["extraInfo"]["nDownHz12"]["Value"] ;
                  var fr21= this.dustcanmessage["extraInfo"]["nUpHz21"]["Value"] ;
                  var fr22= this.dustcanmessage["extraInfo"]["nDownHz22"]["Value"] ;
                  var w1= this.dustcanmessage["extraInfo"]["nUpTemp"]["Value"] ;
                  var w2= this.dustcanmessage["extraInfo"]["nDownTemp"]["Value"] ;

                  if (this.singleDustPress.up!="") {
                      ya1=this.singleDustPress.up;//修改前压差上极限
                  }
                  if(this.singleDustPress.down!=""){
                      ya2=this.singleDustPress.down;
                      }
                  if( this.singleAirPressure.up!=""){
                      qy1=this.singleAirPressure.up;
                  }
                  if(this.singleAirPressure.down!=""){
                      qy2=this.singleAirPressure.down;
                  }
                  if(this.singleinFreqency.up!=""){
                      fr11=this.singleinFreqency.up;
                  }
                  if(this.singleinFreqency.down!=""){
                      fr12=this.singleinFreqency.down;
                  }
                  if(this.singleoutFreqency.up!=""){
                      fr21=this.singleoutFreqency.up;
                  }  
                  if(this.singleoutFreqency.down!=""){
                      fr22=this.singleoutFreqency.down;
                  }
                  if(this.singletemp.up!=""){
                      w1=this.singletemp.up;
                  }
                  if(this.singletemp.down!=""){
                      w2=this.singletemp.down;
                  } 
                       objo1["extraInfo"]["nUpPa"]["Value"]=getNumber2(ya1);
                       objo1["extraInfo"]["nDownPa"]["Value"]=getNumber2(ya2);
                       objo1["extraInfo"]["nUppressure"]["Value"]=getNumber2( qy1);
                       objo1["extraInfo"]["nDownpressure"]["Value"]=getNumber2( qy2);
                       objo1["extraInfo"]["nUpHz11"]["Value"]=getNumber2(fr11);
                       objo1["extraInfo"]["nDownHz12"]["Value"]=getNumber2(fr12);
                       objo1["extraInfo"]["nUpHz21"]["Value"]=getNumber2(fr21);
                       objo1["extraInfo"]["nDownHz22"]["Value"]=getNumber2(fr22);
                       objo1["extraInfo"]["nUpTemp"]["Value"]=getNumber2(w1);
                       objo1["extraInfo"]["nDownTemp"]["Value"] = getNumber2(w2);
                       Onput1("http://api.ahusmart.com/api/v1/device", objo1, token, this.singleDeviceUpdate);
                      new Ctor().open("设置成功");
                      }
                      else{
                        new Ctor().open("设置失败")
                      }
                      },
  singleDeviceUpdate:function(json){
  if(json["code"]=="200"){
   console.log("数据库修改定时成功");
        var urls = "http://api.ahusmart.com/api/v1/deviceDetail?productKey=" + sessionStorage.getItem("dkey") + "&deviceKey=" + this.dustSingleTablekey[this.singdustnum];
        Onget(urls, token, this.singleDmessages);
}
 },

      // 分页
      handleSingleSizeChange(val){
        this.dustSingleList.pagesize = val
      },
      handleSingleCurrentChange(val){
        this.dustSingleList.currentPage = val
      },
      // 上传时间修改
      
      // 单一除尘设备选择类型事件
      singleSelectedHistoryTableType(){
        if (this.singleHistoryTableTypeRefForm.type === 'picture') {
            this.singleDustPageVisible = true
            this.singleDustrecordTableVisible = false
            this.singleAlertInfoTableVislble = false
          }
          if (this.singleHistoryTableTypeRefForm.type === 'recordTable') {
            this.singleDustPageVisible = false
            this.singleDustrecordTableVisible = true
            this.singleAlertInfoTableVislble = false
            this.truedustSingleList.pagesize=10
          }
          if (this.singleHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.singleDustPageVisible = false
            this.singleDustrecordTableVisible = false
            this.singleAlertInfoTableVislble = true
          }
      },
      singleSelectedTime(){//卡片内时间选择器
        this.singleHistoryTableTypeRefForm.type="picture";
        this.setSingleDustHistoryDataDialogVisible = true;
       this.singleDustPageVisible=true;
            this.singleDustrecordTableVisible = false;
            this.singleAlertInfoTableVislble = false;
        var start= this.singleTimeValue[0]+" 00:00:00";
      var end=this.singleTimeValue[1]+" 23:59:59";
      var obj1 = {
                   deviceKey: this.dustSingleTablekey[this.singdustnum],
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
               }
          this.openFullScreen2('数据查询中...');
         Onpost1("http://api.ahusmart.com/api/v1/historyData", obj1, token, this.rdhistory2);

                     var obj2 = {
                                      "productKey": sessionStorage.getItem("dkey"),
                                      "deviceKey": this.dustSingleTablekey[this.singdustnum],
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                //  this.openFullScreen2('数据查询中...');
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.ahistory2);

      },
      // 打开某种设备历史记录记录表分页事件
      truehandleSizeChange(val){
        this.truedustSingleList.pagesize = val
      },
      truehandleCurrentChange(val){
        this.truedustSingleList.currentPage = val
      },
      // 报警信息分页
      singleBearingHandleAlertCurrentChange(val){
        this.singleBearingalertPage.currentPage = val
      },
       // 所有故障除尘设备选择类型事件
       alldustSelectedHistoryTableType(){
        if (this.alldustHistoryTableTypeRefForm.type === 'picture') {
            this.allDustPageVisible = true 
            this.allDustrecordTableVisible = false
            this.alldustAlertInfoTableVislble = false
          }
          if (this.alldustHistoryTableTypeRefForm.type === 'recordTable') {
            this.allDustPageVisible = false 
            this.allDustrecordTableVisible = true
            this.alldustAlertInfoTableVislble = false
          }
          if (this.alldustHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.allDustPageVisible = false 
            this.allDustrecordTableVisible = false
            this.alldustAlertInfoTableVislble = true
          }
      },
      alldustSelectedTime(){//日期选择器
        this.alldustHistoryTableTypeRefForm.type="picture";
        this.allDustPageVisible = true 
            this.allDustrecordTableVisible = false
            this.alldustAlertInfoTableVislble = false
       var start= this.alldustTimeValue[0]+" 00:00:00";
      var end=this.alldustTimeValue[1]+" 23:59:59";
      var obj1 = {
                   deviceKey: this.gdustdevicekey[this.dustnum],
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
               }
          this.openFullScreen2('数据查询中...')
         Onpost1("http://api.ahusmart.com/api/v1/historyData", obj1, token, this.rdhistory1);
         var obj2 = {
                                      "productKey": sessionStorage.getItem("dkey"),
                                      "deviceKey": this.gdustdevicekey[this.dustnum],
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.ahistory1);
      },
      // 打开某种设备历史记录记录表分页事件
      alldusthandleSizeChange(val){
        this.alldustSingleList.pagesize = val
      },
      alldusthandleCurrentChange(val){
        this.alldustSingleList.currentPage = val
      },
      // 报警信息分页
      alldustHandleAlertCurrentChange(val){
        this.alldustalertPage.currentPage = val
      },
      // 除尘所有故障设备历史记录内的事件
       // 双路选择图标监听事件
       allfirstSelectedHistoryTableType(){
          // console.log(this.firstHistoryTableTypeRefForm.type)
          if (this.allfirstHistoryTableTypeRefForm.type === 'picture') {
            this.allfirstBearingPageVisible = true 
            this.allfirstRecordTableVisible = false
            this.allfirstAlertInfoTableVislble = false
          }
          if (this.allfirstHistoryTableTypeRefForm.type === 'recordTable') {
            this.allfirstBearingPageVisible = false 
            this.allfirstRecordTableVisible = true
            this.allfirstAlertInfoTableVislble = false
          }
          if (this.allfirstHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.allfirstBearingPageVisible = false 
            this.allfirstRecordTableVisible = false
            this.allfirstAlertInfoTableVislble = true
          }
        },
        
        allsecondSelectedHistoryTableType(){
          if (this.allsecondHistoryTableTypeRefForm.type === 'picture') {
            this.allsecondBearingPageVisible = true 
            this.allsecondRecordTableVisible = false
            this.allsecondAlertInfoTableVislble = false
          }
          if (this.allsecondHistoryTableTypeRefForm.type === 'recordTable') {
            this.allsecondBearingPageVisible = false 
            this.allsecondRecordTableVisible = true
            this.allsecondAlertInfoTableVislble = false
          }
          if (this.allsecondHistoryTableTypeRefForm.type === 'alertInfoTable') {
            this.allsecondBearingPageVisible = false 
            this.allsecondRecordTableVisible = false
            this.allsecondAlertInfoTableVislble = true
          }
        },
        handlesecondBearingalertPage(val){
   this.secondBearingalertPage.currentPage=val;
        },
        // 双路当前设备选择时间监听事件
        allfirstSelectedTime(){
          var start=this.allfirstTimeValue[0]+" 00:00:00";
          var end=this.allfirstTimeValue[1]+" 23:59:59";
          this.allfirstHistoryTableTypeRefForm.type = 'picture'
            this.allfirstBearingPageVisible = true;
            this.allfirstRecordTableVisible = false;
            this.allfirstAlertInfoTableVislble = false;
            var bearingh={
                   deviceKey:this.tableData1key[this.bearingnum],
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....')
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rzhistory1);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": this.tableData1key[this.bearingnum],
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.bearingahistory1);

          
        },
        allsecondSelectedTime(){
          // console.log(this.secondTimeValue)
          var start=this.allsecondTimeValue[0]+" 00:00:00";
          var end=this.allsecondTimeValue[1]+" 23:59:59";
         this.allsecondHistoryTableTypeRefForm.type = 'picture'
            this.allsecondBearingPageVisible = true 
            this.allsecondRecordTableVisible = false
            this.allsecondAlertInfoTableVislble = false
            var bearingh={
                   deviceKey:this.tableData2key[this.bearingnum2],
                   startTime: new Date(start).getTime() / 1000,
                   endTime: new Date(end).getTime() / 1000,
                   asc: 0
                     }
                     this.openFullScreen2('数据查询中.....')
                     Onpost1(" http://api.ahusmart.com/api/v1/historyData",bearingh,token,this.rallzhistory2);
                     var obj2 = {
                                      "productKey": sessionStorage.getItem("zkey"),
                                      "deviceKey": this.tableData2key[this.bearingnum2],
                                      "startTime": new Date(start).getTime() / 1000, // unix秒
                                      "endTime": new Date(end).getTime() / 1000,
                                      "asc": 0 // 0倒序，1正序

                                  }
                                  Onpost1(" http://api.ahusmart.com/api/v1/alertTimeLimit", obj2, token, this.bearingahistory2);
        },
        // 双路当前设备表格分页事件
        allhandleFirstNowSizeChange(val){
        this.allfirstNowPageInfo.pageSize = val
      },
      allhandleFirstNowCurrentChange(val){
        this.allfirstNowPageInfo.currentPage = val
      },
      allhandleSecondNowSizeChange(val){
        this.allsecondNowPageInfo.pageSize = val
      },
      allhandleSecondNowCurrentChange(val){
        this.allsecondNowPageInfo.currentPage = val
      },
      // 2个表格当前设备报警信息分页事件
      allfirstBearingHandleAlertCurrentChange(val){
        this.firstBearingalertPage.currentPage = val
      },
      allsecondBearingHandleAlertCurrentChange(val){
        this.allsecondBearingalertPage.currentPage = val
      },
      method51:function(){//打印除尘历史记录表
    if(this.dusthistorytableexcel.length==0){
      alert("该表格没有数据");
    }
    else{
      var tab=document.getElementById("dusthistorytable");
      // if(tab!=null){
        method5("dusthistorytable");
      // }
        // else{
        //   var tab1=document.getElementById("dusthistorytable1");
        //   method5("dusthistorytable1");
        // }
 }


    },
    method52:function(){//打印单路历史记录表
    if(this.bearinghistorytableexecl1.length==0){
      alert("该表格没有数据");
    }
    else{
      method5("bearinghistorytable1");
    }
 },
  method53:function(){//打印双路历史记录表
 if(this.bearinghistorytableexecl2.length==0){
    alert("该表格没有数据")
  }else{
   //method5("bearinghistorytable2");
   method5("bearinghistorytable1");
  }
  }, 

   allsetSecondBearingFreq(){
          alert("修改")
        },
        allsetSecondBearingLimit(){
          alert("修改")
        },
        singdustexcel(){
alert("导出");
        },

        // 所有列表格内容居中
        cellCenter({row, column, rowIndex, columnIndex}){
          return "text-align:center"
        },
        // 表头居中
        headCenter({row, column, rowIndex, columnIndex}){
          return "text-align:center"
        }
      },

        
  }
  Vue.filter('dateFormat', function (dateStr) {
    let time = new Date(dateStr);
    let y = time.getFullYear();
    let m = time.getMonth() + 1;
    let d = time.getDate();
    let w = time.getDay();
    let hour = time.getHours();
    let min = time.getMinutes();
    // let sec = time.getSeconds();
    switch (w) {
    case 0:
        day = "天";
        break;
    case 1:
        day = "一";
         break;
    case 2 :
        day = "二";
         break;
    case 3:
        day = "三";
         break;
    case 4:
        day = "四";
         break;
    case 5:
        day = "五";
         break;
    case 6:
        day = "六";}
    m = String(m).padStart(2, '0')
    d = String(d).padStart(2, '0')
    hour = String(hour).padStart(2, '0')
    min = String(min).padStart(2, '0')

    return `${y}.${m}.${d} ${hour}:${min}  星期${day} `
  });
  // 创造路由实例
  var routerObj = new VueRouter({
    routes: [ // 路由匹配规则
      { path: '/', redirect: '/home' },
      { path: '/home', component: home },
      // { path: '/dust', component: dust },
      // { path: '/bearing', component: bearing }
    ]
  })
  var vm = new Vue({
    el: "#app",
    data: {
      // 是否展开侧边栏
      isCollapse: false,
    },
    methods: {
      // 是否展开侧边栏事件
      // collapse() {
      //   this.isCollapse = !this.isCollapse;
      // },
    },
    components: {
      // 定义组件标签名
      home: home,
      // dust: dust,
      // Bearing: bearing
    },
    // 挂载路由
    router: routerObj
  })

</script>



</html>